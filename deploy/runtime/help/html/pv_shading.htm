<!DOCTYPE html>
<html>
<head>
   <title>Shading and Layout</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "pv_shading.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#FFFFFF; color:#0072C6;">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1"><span class="f_Heading1">Shading and Layout</span></h1>

    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p class="p_Text"><span class="f_Text">Shading and snow losses are reductions in the incident irradiance caused by shadows or snow on the photovoltaic modules in the array.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Overview</span></h3>
<p class="p_Text"><span class="f_Text">SAM can model the impact of a reduction in plane-of-array irradiance on each subarray caused by external shading, self shading, and snow cover. This overview describes each, with links to the sections below that list and describe the inputs.</span></p>
<p class="p_Note"><span class="f_CHNote">Notes.</span><br />
<span class="f_CHNote">&nbsp;</span><br />
<span class="f_Note">The monthly soiling losses on the <a href="pv_losses.htm" class="topiclink">Losses</a> page also reduce the irradiance incident on the array. When comparing incident plane-of-array irradiance data, be sure to take soiling losses into account.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">The self-shading model does not work with the </span><span class="f_CHInterfaceElement">Simple Efficiency Module</span><span class="f_Note"> model on the <a href="pv_module.htm" class="topiclink">Module</a> page.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">External Shading</span></h4>
<p class="p_Text"><span class="f_Text"><a href="pv_shading.htm#externalshading" class="topiclink">External shading</a> is shading of the photovoltaic subarray by trees, buildings, roof protrusions and other nearby objects. SAM represents a shadow on the subarray in a given time step by a single </span><span class="f_CHInterfaceElement">beam irradiance shading loss</span><span class="f_Text"> for that time step, which it determines from data you provide in the beam shade loss tables in the <a href="edit_shading_data.htm" class="topiclink">Edit Shading Data window</a>. SAM reduces the plane-of-array beam irradiance by the shading loss percentage. For example, if a shadow occupies 25% of the subarray's surface area at 11 am, the beam shading loss for 11 am would be 25%. A shading loss of 0 means there is no shade on the subarray, and a loss of 100% means that no beam irradiance reaches the subarray.</span></p>
<p class="p_Text"><span class="f_Text">When you specify beam irradiance shading losses by time step, you can use SAM's partial shading model to estimate the impact of partial shading on the array's electrical output. The partial shading model does not work with the month-by-hour or solar azimuth-by-altitude beam shade loss tables. For more information about the partial shading model, see </span><span style="font-family: Arial,Helvetica,sans-serif; background-color: #ffffff;">MacAlpine, S.; Deline, C. (2015) Simplified Method for Modeling the Impact of Arbitrary Partial Shading Conditions on PV Array Performance. National Renewable Energy Laboratory. 8 pp.; NREL/CP-5J00-64570. (<a href="http://www.nrel.gov/docs/fy15osti/64570.pdf" target="_blank" class="weblink">PDF 699 KB</a>)</span></p>
<p class="p_Text"><span class="f_Text">SAM accounts for the effect of external shading on the plane-of-array diffuse irradiance using a single </span><span class="f_CHInterfaceElement">sky diffuse shading loss</span><span class="f_Text"> for the entire year.</span></p>
<p class="p_Text"><span class="f_Text">You can generate beam and diffuse irradiance shading loss data using SAM's <a href="pv_shading.htm#3dshading" class="topiclink">3D Shade Calculator</a> or outside of SAM. SAM can <a href="edit_shading_data.htm#importshadingdata" class="topiclink">import beam and diffuse shading data</a> from files created by PVSyst, and beam shading data from files created by the Solmetric Suneye, and Solar Pathfinder software.</span></p>
<p class="p_Text"><span class="f_Text">Use the following output variables to explore the effect of external shading (see <a href="pv_results.htm" class="topiclink">Results</a> for descriptions of the variables):</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_CHInterfaceElement">Subarray [1..4] External shading and soiling beam irradiance factor (frac)</span><span class="f_List"> (except for partial shading model)</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_CHInterfaceElement">Subarray [1..4] Partial external shading DC factor (frac)</span><span class="f_List"> (for partial shading model only)</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_CHInterfaceElement">Subarray [1..4] POA total irradiance after shading only (W/m2)</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_CHInterfaceElement">Array POA beam radiation after shading only (kW)</span></p><h4 class="p_Heading4"><span class="f_Heading4">Self Sh</span><span class="f_Heading4" style="font-weight: normal;">a</span><span class="f_Heading4">ding</span></h4>
<p class="p_Text"><span class="f_Text"><a href="pv_shading.htm#selfshading" class="topiclink">Self shading</a> is caused by row-to-row shading of modules within a subarray, where shadows from modules in neighboring rows of the array block sunlight from parts of other modules in the array during certain times of day. SAM can estimate self shading for fixed subarrays and subarrays with one-axis tracking, assuming that each subarray consists of modules in parallel rows with the same number of modules per row.</span></p>
<p class="p_Text"><span class="f_Text">For a description of the self-shading model implemented in SAM, see Gilman, P.; Dobos, A.; DiOrio, N.; Freeman, J.; Janzou, S.; Ryberg, D. (2018) SAM Photovoltaic Model Technical Reference Update. 93 pp.; NREL/TP-6A20-67399 available along with other technical documentation from the <a href="https://sam.nrel.gov/photovoltaic/pv-sub-page-2.html" target="_blank" class="weblink" title="https://sam.nrel.gov/photovoltaic/pv-sub-page-2.html">SAM website</a>.</span></p>
<p class="p_Text"><span class="f_Text">Use the following output variables to explore the effect of self shading (see <a href="pv_results.htm" class="topiclink">Results</a> for descriptions of the variables):</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_CHInterfaceElement">Subarray [1..4] Self-shading linear beam irradiance factor</span><span class="f_List"> (thin film linear only)</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_CHInterfaceElement">Subarray [1..4] Self-shading non-linear DC factor</span><span class="f_List"> (standard non-linear only)</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_CHInterfaceElement">Subarray [1..4] Self-shading non-linear sky diffuse irradiance factor</span><span class="f_List"> (standard non-linear only)</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_CHInterfaceElement">Subarray [1..4] Self-shading non-linear ground diffuse irradiance factor</span><span class="f_ListLast"> (standard non-linear only)</span></p><h4 class="p_Heading4"><span class="f_Heading4">Snow Losses</span></h4>
<p class="p_Text"><span class="f_Text">When your weather file contains snow depth data, SAM can estimate <a href="pv_shading.htm#snow" class="topiclink">snow losses</a> in the array's output caused by snow covering the modules in the subarray.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Shading and Snow Inputs</span></h3>
<h4 class="p_Heading4"><a id="3dshading" class="hmanchor"></a><img id="TOGGLE0186A1_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="9" height="9" style="margin:0;width:9px;height:9px;border:none" src="hmtoggle_arrow1.gif"/> &nbsp; &nbsp; &nbsp; &nbsp;<span class="f_Heading4"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #000000; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A1','TOGGLE0186A1_ICON')">3D Shade Calculator</a></span></h4>
<div id="TOGGLE0186A1" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The SAM 3D Shade Calculator uses a sun position algorithm and a three-dimensional drawing of a photovoltaic array and nearby shading objects to generate hour-by-month tables of beam irradiance shade loss percentages, and a sky diffuse loss percentage. It has the following features:</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Uses Bing Maps geocoding to automatically find latitude, longitude, and time zone for any street address.</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">A three dimensional drawing, or shade scene, represents the photovoltaic array and nearby shading objects.</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">The scene consists of active surfaces (photovoltaic subarrays) and shading objects.</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Four three-dimensional shapes are designed to represent most shading objects: Box, cylinder, tree, and roof.</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">View and edit the shade scene in three-dimensional, bird's eye, and elevation views.</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Add an optional aerial photograph from Bing Maps or your own image as an underlay for the bird's eye view to help position objects on the scene.</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Drag the three-dimensional view to see shadows on active surfaces and the shade loss at different sun positions.</span></p><p class="p_ProcedureStepLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ProcedureStepLast">Calculate diurnal and hourly beam irradiance shade loss for a single year based on the scene location and relative positions of each active surface and shading objects in the scene.</span></p><p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To use the SAM shade analysis calculator:</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_ProcedureStep">On the <a href="pv_shading.htm" class="topiclink">Shading and Layout</a> page (detailed photovoltaic model) or <a href="pvwatts_system_design.htm" class="topiclink">System Design</a> page (PVWatts), click </span><span class="f_CHInterfaceElement">Open 3D shade calculator</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_ProcedureStep"><a href="3dshad-define-location.htm" class="topiclink">Define the scene location</a> (latitude, longitude, time zone).</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_ProcedureStep"><a href="3dshad-shading-objects.htm" class="topiclink">Add shading objects</a> to the scene -- these are trees, buildings, and other structures near the array that may block direct solar irradiance from reaching the array.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">4.</span><span class="f_ProcedureStep"><a href="3dshad-active-surface.htm" class="topiclink">Add active surface</a> objects to the scene to represent the photovoltaic array or subarrays.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">5.</span><span class="f_ProcedureStep"><a href="3dshad-save-close.htm" class="topiclink">Save and close</a> the calculator to apply shading factor valuess to the SAM <a href="pv_shading.htm" class="topiclink">shading</a> inputs.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">6.</span><span class="f_ProcedureStep"><a href="3dshad-generate-data.htm" class="topiclink">Generate shade data</a>.</span></p><p class="p_ProcedureStepLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">7.</span><span class="f_ProcedureStepLast"><a href="3dshad-export.htm" class="topiclink">Export shade data</a> to use in SAM or other simulation software</span><span class="f_Step" style="font-family: Arial,Helvetica,sans-serif;">.</span></p><p class="p_Text"><span class="f_Text">For more step-by-step instructions, see <a href="3dshad-how-to.htm" class="topiclink">How-To</a>.</span></p>
<p class="p_Text"><span class="f_Text">For a description of the 3D shade calculator's features, see <a href="3dshad-reference.htm" class="topiclink">Reference</a>.</span></p>
</td>
</tr>
</table>
</div>
<h4 class="p_Heading4"><a id="externalshading" class="hmanchor"></a><img id="TOGGLE0186A2_ICON" class="dropdown-toggle-icon" alt="hmtoggle_arrow1" width="9" height="9" style="margin:0;width:9px;height:9px;border:none" src="hmtoggle_arrow1.gif"/> &nbsp; &nbsp; &nbsp; &nbsp;<span class="f_Heading4"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #000000; background-color: transparent; text-decoration: none;" href="javascript:HMToggle('toggle','TOGGLE0186A2','TOGGLE0186A2_ICON')">Shade Loss Tables for External Shading</a></span></h4>
<div id="TOGGLE0186A2" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Heading2" style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">To model external shading of a subarray in SAM, you provide a set of beam shading loss percentages in one of the beam shade loss tables, and a single sky diffuse shading loss.</span></p>
<p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To enable the external shading:</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_ProcedureStep">Click </span><span class="f_CHInterfaceElement">Edit Shading</span><span class="f_ProcedureStep"> for the subarray for which you want to enable external shading to open the <a href="edit_shading_data.htm" class="topiclink">Edit Shading Data</a> window. (Define the subarrays on the <a href="pv_system_design.htm" class="topiclink">System Design</a> page.)</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_ProcedureStep">If you are working with a shading file from PVsyst, Solmetric Suneye, or Solar Pathfinder software, in the Edit Shading window, </span><span class="f_ProcedureStepNoNumber">click the appropriate button under</span><span class="f_CHInterfaceElement"> Import shading data from external tools</span><span class="f_ProcedureStepNoNumber"> to <a href="edit_shading_data.htm#importshadingdata" class="topiclink">import the file</a>.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_ProcedureStep">If you are using a <a href="edit_shading_data.htm#beamshadelosstables" class="topiclink">beam shade loss table</a> to specify shading factors (you can type, import, or paste values into the table), check the appropriate </span><span class="f_CHInterfaceElement">Enable</span><span class="f_ProcedureStep"> box in the Edit Shading window to display the table.</span></p><p class="p_Note"><span class="f_CHNote">Note. </span><span class="f_ListLast">SAM does not prevent you from enabling more than one beam shade loss table even if that results in an unrealistic shading model. Be sure to verify that you have enabled the set of shade loss tables you intend before running a simulation.</span></p>
<p class="p_Text"><img alt="IMG_PVShading-EnableDisable" width="581" height="241" style="margin:0;width:581px;height:241px;border:none" src="img_pvshading-enabledisable.png"/></p>
</td>
</tr>
</table>
</div>
<h4 class="p_Heading4"><a id="arraydimensions" class="hmanchor"></a><img id="TOGGLE0186A3_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="9" height="9" style="margin:0;width:9px;height:9px;border:none" src="hmtoggle_arrow1.gif"/> &nbsp; &nbsp; &nbsp; &nbsp;<span class="f_Heading4"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #000000; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A3','TOGGLE0186A3_ICON')">Array Dimensions for Self Shading and Snow Losses</a></span></h4>
<div id="TOGGLE0186A3" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">To model the effects of self shading and snow cover, SAM needs basic information about the arrangement of modules and rows in each subarray. The total number of modules in each subarray is defined on the <a href="pv_system_design.htm" class="topiclink">System Design</a> page.</span></p>
<p class="p_Note"><span class="f_CHNote">Notes.</span><span class="f_Note"> </span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">The Array Dimensions input are only active for a subarray when you either choose a self-shading option, or check the Snow Losses check box.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">SAM assumes that modules in each subarray are laid out in rectangles. It cannot calculate self shading or snow coverage losses for subarrays with irregular shapes.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">The array dimensions for self shading and snow coverage are different from the electrical wiring of strings defined on the <a href="pv_system_design.htm" class="topiclink">System Design</a> page.</span></p>
<p class="p_Text" style="text-align: center;"><img alt="IMG_SelfShad-dimensions" width="334" height="108" style="margin:0 auto 0 auto;width:334px;height:108px;border:none" src="img_selfshad-dimensions.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Number of modules along side of row</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The number of modules along the edge of the subarray array perpendicular to the bottom of the array as defined below.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Number of modules along bottom of row</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The number of modules along the bottom of a row, which is the edge of the row nearest to the ground.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Number of rows</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The number of rows given the number of modules in the subarray from the <a href="pv_system_design.htm" class="topiclink">System Design</a> page and the numbers of modules along the side and bottom of row that you specify.</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">Number of Rows = Number of Modules in Subarray ÷ Number of Modules along Side ÷ Number of Modules along Bottom</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">To model a realistic rectangular arrangement of modules, the number of rows should be an integer: The product of the number of modules along the side and bottom of each subarray should be a divisor of the total number of modules in the subarray.</span></p>
<p class="p_Note"><span class="f_CHNote">Notes.</span><span class="f_Note"> </span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">A subarray with only one row will not experience any self shading.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">If the number of rows is one or is not an integer, SAM generates a simulation message but will still run and generate results.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Modules in subarray from System Design page</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The total number of modules in each subarray, as defined on the <a href="pv_system_design.htm" class="topiclink">System Design</a> page.</span></p>
</td>
</tr>
</table>
</div>
<h4 class="p_Heading4"><a id="selfshading" class="hmanchor"></a><img id="TOGGLE0186A4_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="9" height="9" style="margin:0;width:9px;height:9px;border:none" src="hmtoggle_arrow1.gif"/> &nbsp; &nbsp; &nbsp; &nbsp;<span class="f_Heading4"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #000000; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A4','TOGGLE0186A4_ICON')">Self Shading for Fixed Subarrays and One-axis Trackers</a></span></h4>
<div id="TOGGLE0186A4" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The self-shading model estimates the reduction in the array's DC output due to row-to-row shading of modules within the subarray, where shadows from modules in neighboring rows of the array block sunlight from parts of other modules in the array during certain times of day.</span></p>
<p class="p_Text"><span class="f_Text">&nbsp;</span></p>
<p class="p_Text"><span class="f_Text">The response of a real photovoltaic module to shading is complex, and depends on several factors, including photovoltaic cell material, shape and layout of cells in the module, and configuration of bypass diodes in the module. SAM's self-shading model makes the following simplifying assumptions.</span></p>
<p class="p_Text"><span class="f_Text">For the </span><span class="f_CHInterfaceElement">Standard (non-linear)</span><span class="f_Text"> option:</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">The cell material is crystalline silicon, either mono-crystalline or poly-crystalline. The self-shading model does not work for modules with thin film cells. SAM indicates the cell material on the <a href="pv_module.htm" class="topiclink">Module</a> page under Physical Characteristics.</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Each module in the array consists of square cells arranged in a rectangular grid with three bypass diodes.</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ListLast">The array uses the fixed or one-axis tracking option on the <a href="pv_system_design.htm" class="topiclink">System Design</a> page. The self-shading model does not work for two-axis or azimuth-axis tracking.</span></p><p class="p_Text"><span class="f_List">For the </span><span class="f_CHInterfaceElement">Thin film (linear)</span><span class="f_List"> option, the subarray's DC output responds linearly to the reduction in plane-of-array irradiance.</span></p>
<p class="p_Text"><span class="f_List">The self-shading model does not work with the <a href="pv_module.htm#simpleefficiency" class="topiclink">Simple Efficiency Module Model</a>.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Self Shading Inputs</span></h4>
<p class="p_Text"><span class="f_Text">The self-shading inputs consist of the <a href="pv_shading.htm#arraydimensions" class="topiclink">array dimension inputs</a> that apply to both the self shading and snow loss, and the self-shading inputs described below. Those parameters are on the <a href="pv_system_design.htm" class="topiclink">System Design</a> page.</span></p>
<p class="p_Text" style="text-align: center;"><span class="f_ImageCaption">  <img alt="IMG_SelfShad-definitions" width="351" height="110" style="margin:0 auto 0 auto;width:351px;height:110px;border:none" src="img_selfshad-definitions.png"/></span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> The self shading inputs are are only active for fixed subarrays, or for subarrays with 1-axis tracking without backtracking. &nbsp;Self shading is not active for 1-axis trackers with backtracking because backtracking avoids any self shading.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Self shading</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">None</span><span class="f_VariableDescription"> uses the approach of versions of SAM before SAM 2014.1.14. Because this option does not account for any self-shading, it tends to overestimate the array's production. We included this option to allow for comparison between the different options to see the effect of the self-shaded and backtracking options, and for comparison between results from this version and older versions of SAM.</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Standard (non-linear)</span><span class="f_VariableDescription"> is appropriate for most types of modules with crystalline silicon cells. It estimates losses from self-shading caused by shading of modules in one row by modules in neighboring rows based on the GCR value you specify.</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Thin film (linear)</span><span class="f_VariableDescription"> is for modules with thin-film cells or for specially-designed modules with cells and bypass diodes wired in such a way that the modules output varies linearly with shaded area of the module.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Module orientation</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The module orientation determines whether the short or long side of the module is parallel to the ground, assuming that all modules in the array are mounted at a fixed angle from the horizontal equal to the tilt angle specified on the <a href="pv_system_design.htm" class="topiclink">System Design</a> page.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Portrait orientation means the short end of the module is parallel to the ground, or at the bottom of the module.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Landscape orientation means the long end of the module is parallel to the ground, or at the bottom of the module.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Length of side (m)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The length of the side of a row. The bottom of the row is parallel to the ground, and the side is perpendicular to the bottom.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For portrait module orientation:</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">length of side = module length × number of modules along side of row</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For landscape module orientation:</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">length of side = module width × number of modules along side of row</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">GCR from System Design page</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Ground coverage ratio from the <a href="pv_system_design.htm" class="topiclink">System Design</a> page, defined as the length of the side of one row divided by the distance between the bottom of one row and the bottom of its neighboring row.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Row spacing estimate (m)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The distance in meters between the bottom of any two rows in the subarray. SAM displays this value for reference. The self-shading calculations use the module area and GCR.</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">row spacing estimate = length of side ÷ GCR</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Module aspect ratio</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The ratio of the module length to module width. </span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The built-in module libraries for the CEC and Sandia module models contain data for the area of each module, but not for the module length and width. For this reason, you must provide the aspect ratio as an input for the self-shading calculations. You can use the module dimensions for your module from the manufacturer data sheet to calculate the aspect ratio, and compare SAM's calculated values to the values on the data sheet to check your work.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Module length</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The length of the long side of the module.</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">module length = √( module area × module aspect ratio )</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Module width</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The width of the short side of the module.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">module width = </span><span class="f_EquationExcel">√( module area ÷ module aspect ratio )</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Module area</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The module area from the <a href="pv_module.htm" class="topiclink">Module page</a>.</span></p>
</td>
</tr>
</table>
</div>
<h4 class="p_Heading4"><a id="snow" class="hmanchor"></a><img id="TOGGLE0186A5_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="9" height="9" style="margin:0;width:9px;height:9px;border:none" src="hmtoggle_arrow1.gif"/> &nbsp; &nbsp; &nbsp; &nbsp;<span class="f_Heading4"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #000000; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A5','TOGGLE0186A5_ICON')">Snow Losses</a></span></h4>
<div id="TOGGLE0186A5" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">For a description of the snow model, see the following publications available along with other technical documentation from the <a href="https://sam.nrel.gov/photovoltaic/pv-sub-page-2.html" target="_blank" class="weblink" title="https://sam.nrel.gov/photovoltaic/pv-sub-page-2.html">SAM website</a>:</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Gilman, P.; Dobos, A.; DiOrio, N.; Freeman, J.; Janzou, S.; Ryberg, D. (2018) SAM Photovoltaic Model Technical Reference Update. 93 pp.; NREL/TP-6A20-67399</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ListLast">Ryberg, D.; Freeman, J. (2017). &nbsp;Integration, Validation and Application of a PV Snow Coverage Model in SAM. National Renewable Energy Laboratory. 33 pp. TP-6A20-68705 available along with other technical documentation from the <a href="https://sam.nrel.gov/photovoltaic/pv-sub-page-2.html" target="_blank" class="weblink" title="https://sam.nrel.gov/photovoltaic/pv-sub-page-2.html">SAM website</a>.</span></p><p class="p_Text"><span class="f_Text">Use the following output variables to explore the effect of snow cover (see <a href="pv_results.htm" class="topiclink">Results</a> for descriptions of the variables):</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_CHInterfaceElement" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_CHInterfaceElement">Array DC power loss due to snow (kW)</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_CHInterfaceElement" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_CHInterfaceElement">Weather file snow depth file (cm)</span></p><p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> Snow depth data is not available in the NSRDB PSM V3 dataset. It is available in the <a href="https://nsrdb.nrel.gov/data-sets/archives.html" target="_blank" class="weblink" title="https://nsrdb.nrel.gov/data-sets/archives.html">NSRDB 1961 - 1990 Archive Data</a>. This older data does not represent the best up-to-date data from the NSRDB, but may be useful for testing SAM's snow loss model.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Text">The Ryberg (2017) paper cited above includes a United States map of annual average snow loss values that could be used to estimate snow loss using inputs on the Losses page instead of the snow model when snow depth data is not available.</span></p>
<p class="p_Text"><span class="f_Text">SAM's snow model for photovoltaic systems estimates the loss in system output during time steps when the array is covered in snow. It uses snow depth data from the weather file, and for time steps with snow, estimates the percentage of the photovoltaic array that is covered with snow based on the array's tilt angle, plane-of-array irradiance, and ambient temperature. The model assumes that the array is completely covered with snow when the snow depth data indicates a snowfall, and that snow slides off the array as the ambient temperature increases.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Estimate snow losses</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Check this option to model snow losses if the weather file on the <a href="pv_location_and_resource.htm" class="topiclink">Location and Resource</a> page includes snow depth data.</span></p>
</td>
</tr>
</table>
</div>

</td></tr></table>

<script type="text/javascript">
HMInitToggle('TOGGLE0186A1_ICON','hm.type','dropdown','hm.state','0','hm.src0','hmtoggle_arrow0.gif','hm.src1','hmtoggle_arrow1.gif','onclick','HMToggle(\'toggle\',\'TOGGLE0186A1\',\'TOGGLE0186A1_ICON\')');
HMInitToggle('TOGGLE0186A1','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A2_ICON','hm.type','dropdown','hm.state','0','hm.src0','hmtoggle_arrow0.gif','hm.src1','hmtoggle_arrow1.gif','onclick','HMToggle(\'toggle\',\'TOGGLE0186A2\',\'TOGGLE0186A2_ICON\')');
HMInitToggle('TOGGLE0186A2','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A3_ICON','hm.type','dropdown','hm.state','0','hm.src0','hmtoggle_arrow0.gif','hm.src1','hmtoggle_arrow1.gif','onclick','HMToggle(\'toggle\',\'TOGGLE0186A3\',\'TOGGLE0186A3_ICON\')');
HMInitToggle('TOGGLE0186A3','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A4_ICON','hm.type','dropdown','hm.state','0','hm.src0','hmtoggle_arrow0.gif','hm.src1','hmtoggle_arrow1.gif','onclick','HMToggle(\'toggle\',\'TOGGLE0186A4\',\'TOGGLE0186A4_ICON\')');
HMInitToggle('TOGGLE0186A4','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A5_ICON','hm.type','dropdown','hm.state','0','hm.src0','hmtoggle_arrow0.gif','hm.src1','hmtoggle_arrow1.gif','onclick','HMToggle(\'toggle\',\'TOGGLE0186A5\',\'TOGGLE0186A5_ICON\')');
HMInitToggle('TOGGLE0186A5','hm.type','dropdown','hm.state','0');
</script>
</body>
</html>
