<!DOCTYPE html>
<html>
<head>
   <title>Battery Storage</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="description" content="The battery storage model allows you to analyze the performance of lead-acid or lithium-ion batteries connected to the AC side of a photovoltaic system between the inverter and..." />
   <meta name="picture" content="" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "battery_model.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#FFFFFF">
  <tr style="vertical-align:middle">
    <td style="text-align:left; color:#0072C6; font-family:segoe ui">
      <h1 class="p_Heading1" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_Heading1">Battery Storage</span></h1>

    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p class="p_Text"><span class="f_Text">The battery storage model allows you to analyze the performance of lead-acid or lithium-ion batteries connected to the AC side of a photovoltaic system between the inverter and the grid interconnection point. The model accounts for important factors contributing to battery performance, including voltage variation with charge state, capacity fade with cycling, and temperature effects on capacity and provides &nbsp;a realistic picture of how the battery performs and degrade over time. As with other models in SAM, the battery model inputs strike a balance between simplicity and complexity to be usable by people with &nbsp;varying degrees of interest and expertise. Many of the inputs are parameters that are available on typical manufacturer data sheets. For other inputs, you can apply reasonable default parameters by choosing a battery type.</span></p>
<p class="p_Text" style="text-align: center;"><img alt="IMG_PV-BatterySchematic" width="423" height="186" style="margin:0px auto 0px auto;width:423px;height:186px;border:none" src="img_pv-batteryschematic.png"/></p>
<p class="p_Text"><span style="font-size: 11pt; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;">For details about the implementation of SAM's battery model, see DiOrio, N., &nbsp;(2015), &quot;Technoeconomic Modeling of Battery Energy Storage,&quot; available on the <a href="https://sam.nrel.gov/reference" target="_blank" class="weblink" title="https://sam.nrel.gov/reference">Performance Model Documentation</a> page of the SAM website.</span></p>
<p class="p_Text"><span style="font-size: 11pt; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;">For general information about batteries and the one of the references used to develop this model, see Linden, D.; Reddy, T.; (2011).</span><span style="font-size: 11pt; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-style: italic;"> Linden's Handbook of Batteries</span><span style="font-size: 11pt; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;">. 4th edition. New York: McGraw Hill.</span></p>
<p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To model a photovoltaic system with battery storage:</span></p>
<p style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 24px; margin: 0px 0px 3px 24px;"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ProcedureStep">On the Battery Storage page, choose Enable battery.</span></p><p class="p_ProcedureStepNoNumber"><img alt="SS_Battery-ChooseModel" width="161" height="101" style="margin:0;width:161px;height:101px;border:none" src="ss_battery-choosemodel.png"/></p>
<h4 class="p_Heading4"><span class="f_Heading4">Battery Bank Sizing</span></h4>
<p class="p_Text"><span class="f_Text">The battery bank sizing inputs allow you to specify the size of the battery bank either by entering a desired capacity in kWh and nominal voltage, or by specifying explicitly the number of battery cells in series and number of parallel strings.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Specify desired bank size</span></p>
<p class="p_VariableDescription"><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">Enter the </span><span class="f_CHInterfaceElement">desired bank capacity</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;"> in kilowatt-hours and the</span><span class="f_CHInterfaceElement"> desired bank voltage</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;"> in Volts. SAM uses the rudimentary calculation described below to determine the number of cells in series and strings in parallel. Use this option as a starting point to help determine the battery bank size. As your analysis proceeds, you may want to refine your assumptions by specifying these values explicitly.</span></p>
<p class="p_VariableDescription"><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">SAM calculates the number of cells in series to ensure that the desired bank voltage is either met exactly or slightly exceeded, based on the cell nominal voltage under </span><span class="f_CHInterfaceElement">Voltage Properties</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">. For example, for a desired bank voltage of 24 V with a nominal cell voltage of 3.6 V, SAM calculates 24 V ÷ 3.6 V/cell = 6.7, or 7 cells in series. The actual nominal bank voltage is 3.6 V/cell × 7 cells = of 25.2 V. SAM displays the actual battery bank properties as computed values under </span><span class="f_CHInterfaceElement">Current and Capacity</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">.</span></p>
<p class="p_VariableDescription"><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">SAM calculates the bank capacity by determining the number strings of cells in parallel required to ensure that the actual capacity is as close as possible to the desired value given the cell capacity that you specify under </span><span class="f_CHInterfaceElement">Current and Capacity</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">. For the example above, if the desired bank capacity is 3 kWh, and the cell capacity is 1.5 Ah, for the computed bank voltage is 25.2 V, one string of cells has a capacity of 25.2 V × 1.5 Ah = 37.8 Wh, or 0.0378 kWh. To reach the desired bank capacity of 3 kWh, 3 kWh ÷ 0.0378 kWh/string = 79.4, or 80 strings. </span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> SAM's calculation of number of cells and strings of cells does not account for real design factors. It is a simple calculation based on the cell properties that you specify.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Specify cells</span></p>
<p class="p_VariableDescription"><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">Specify explicitly the battery bank's number of cells in series and strings in parallel.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Chemistry</span></h4>
<p class="p_Text"><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">The battery type defines the battery chemistry for (lithium ion or lead acid), and the type of battery for each chemistry. When you choose a battery type, SAM automatically changes the battery property input variables to default values for that type. These default values were drawn from DiOrio (2015), cited above, which also includes more details on how SAM calculates battery capacity.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery type</span></p>
<p class="p_VariableDescription"><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">Choose the battery chemistry and battery type for the batteries in your system.</span></p>
<p class="p_VariableDescription"><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">When you choose a battery type, SAM replaces the values of </span><span class="f_CHInterfaceElement">Voltage Properties</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;"> and </span><span class="f_CHInterfaceElement">Current and Capacity</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;"> input variables as appropriate with values for each battery type.</span></p>
<p class="p_VariableDescription"><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">When you choose a custom battery type for either the lead acid or lithium ion chemistry, SAM does not replace the input variable values.</span></p>
<p class="p_Note"><span class="f_CHNote">Notes.</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;"> </span><br />
<span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">&nbsp;</span><br />
<span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">To model a battery type not included in the list, choose either </span><span class="f_CHInterfaceElement">Lead Acid: Custom</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;"> or </span><span class="f_CHInterfaceElement">Lithium Ion: Custom</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">, and specify your voltage, current, and capacity properties appropriate for the battery.</span><br />
<span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">&nbsp;</span><br />
<span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">When you choose the custom lead acid battery type, SAM retains the capacity and discharge rate values from the table below from the previous state. For example, if you change the battery type from flooded lead acid to custom lead acid, SAM will apply the capacity/discharge rate table for flooded batteries to your custom battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Lead Acid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The three lead acid battery types use the lead acid battery capacity model described in DiOrio (2015), cited above:</span></p>
<p style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 0px 0px 6px 24px;"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">Flooded lead acid batteries with a liquid electrolyte</span></p><p style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 0px 0px 6px 24px;"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">Valve Regulated (VRLA) batteries are sealed, and the electrolyte is bound in a gel.</span></p><p style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 0px 0px 6px 24px;"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">VRLA Absorptive Glass Mat (AGM) batteries are sealed, and the electrolyte is immobilized in porous separators.</span></p><p class="p_VariableDescription"><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">Lead acid battery capacity is dependent on the discharge rate. When you choose different lead-acid battery types from the list, SAM changes internal variable values that define the relationship between capacity and discharge rate as shown in the table below. It is not possible to change these values from the Battery Storage input page. These values are based on analysis of information for batteries from different manufacturers. SAM considers the 20-hour discharge rate as the nominal capacity of a lead-acid battery and scales the capacity at faster discharge rates as a percent of the 20-hour capacity.</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 6px 24px;"><table style="border:none; border-spacing:0px;">
<thead>
<tr style="text-align:left;vertical-align:top;">
<th style="vertical-align:top; padding:2px;"><p class="p_TableHeadColumn" style="page-break-inside: avoid;"><span class="f_TableHeadColumn">&nbsp;</span></p>
</th>
<th colspan="3" style="vertical-align:top; padding:2px;"><p class="p_TableHeadColumn" style="page-break-inside: avoid;"><span class="f_TableHeadColumn">Capacity %</span></p>
</th>
</tr>
</thead>
<tbody>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; padding:2px;"><p class="p_TableHeadColumn" style="page-break-inside: avoid;"><span class="f_TableHeadColumn">Discharge Rate</span></p>
</td>
<td style="vertical-align:top; padding:2px;"><p class="p_TableHeadColumn" style="page-break-inside: avoid;"><span class="f_TableHeadColumn">Flooded</span></p>
</td>
<td style="vertical-align:top; padding:2px;"><p class="p_TableHeadColumn" style="page-break-inside: avoid;"><span class="f_TableHeadColumn">VRLA Gel</span></p>
</td>
<td style="vertical-align:top; padding:2px;"><p class="p_TableHeadColumn" style="page-break-inside: avoid;"><span class="f_TableHeadColumn">VRLA AGM</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; background-color:#c0c0c0; padding:2px;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">20-hr ( 0.05 C )</span></p>
</td>
<td style="vertical-align:top; background-color:#c0c0c0; padding:2px;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">100</span></p>
</td>
<td style="vertical-align:top; background-color:#c0c0c0; padding:2px;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">100</span></p>
</td>
<td style="vertical-align:top; background-color:#c0c0c0; padding:2px;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">100</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; padding:2px;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">10-hr ( 0.1C )</span></p>
</td>
<td style="vertical-align:top; padding:2px;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">87</span></p>
</td>
<td style="vertical-align:top; padding:2px;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">84.9</span></p>
</td>
<td style="vertical-align:top; padding:2px;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">93.2</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; background-color:#c0c0c0; padding:2px;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">1-hr ( C )</span></p>
</td>
<td style="vertical-align:top; background-color:#c0c0c0; padding:2px;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">47</span></p>
</td>
<td style="vertical-align:top; background-color:#c0c0c0; padding:2px;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">63.1</span></p>
</td>
<td style="vertical-align:top; background-color:#c0c0c0; padding:2px;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">58.1</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Lithium Ion</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The six lithium ion battery types use of the lithium-ion battery capacity model described in </span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">DiOrio (2015)</span><span class="f_VariableDescription">, cited above:</span></p>
<p style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 0px 0px 6px 24px;"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">LMO: Lithium Manganese Oxide (<img alt="EQ_BATT_lmo" width="50" height="16" style="margin:0;width:50px;height:16px;border:none" src="eq_batt_lmo.png"/>) – An inexpensive high-voltage cathode material with high power capabilities but potentially lower lifespan.</span></p><p style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 0px 0px 6px 24px;"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">LFP: Lithium Iron Phosphate (<img alt="EQ_BATT_lfp" width="54" height="16" style="margin:0;width:54px;height:16px;border:none" src="eq_batt_lfp.png"/> – A lower voltage cathode material with excellent safety properties but lower volumetric energy.</span></p><p style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 0px 0px 6px 24px;"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">LCO: Lithium Cobalt Oxide (<img alt="EQ_BATT_lco" width="47" height="16" style="margin:0;width:47px;height:16px;border:none" src="eq_batt_lco.png"/> – Among the first and still a common cathode material with high specific energy, but potentially costly and toxic.</span></p><p style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 0px 0px 6px 24px;"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">LTO: Lithium Titanate (<img alt="EQ_BATT_lto" width="61" height="16" style="margin:0;width:61px;height:16px;border:none" src="eq_batt_lto.png"/> – A promising anode material with excellent lifetime properties but lower specific capacity and important cost considerations.</span></p><p style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 0px 0px 6px 24px;"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">NMC: Nickel Manganese Cobalt (<img alt="EQ_BATT_nmc" width="80" height="16" style="margin:0;width:80px;height:16px;border:none" src="eq_batt_nmc.png"/> – A less expensive cathode material than LCO with potentially improved safety characteristics</span></p><p style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 0px 0px 6px 24px;"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">NCA: Nickel Cobalt Aluminum (<img alt="EQ_BATT_nca" width="73" height="16" style="margin:0;width:73px;height:16px;border:none" src="eq_batt_nca.png"/> – Similar in respects to NMC as a cathode material with high specific energy</span></p><p class="p_VariableDescription"><span class="f_VariableDescription">When you choose a lithium ion battery, SAM assigns values to voltage, lifetime, and thermal properties as appropriate from Reddy (2011), cited above, and from manufacturer data sheets. SAM does not change any internal variables or calculations.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Voltage Properties</span></h4>
<p class="p_Text"><span class="f_Text">The voltage properties are technical specifications available on most battery manufacturer data sheets.</span></p>
<p class="p_Text"><span class="f_Text">Battery voltage varies with state of charge as the internal open circuit potential decreases or increases. When a battery charges, positive ions travel from the cathode to the anode, lowering the open circuit potential of the anode and increasing the open circuit potential of the cathode, resulting in a net increase of potential between the anode and cathode. Similarly, as a battery discharges, ions flow back from the anode to the cathode, reducing the net potential. Battery manufacturer data sheets typically report a voltage-discharge curve of some kind to illustrate this behavior. SAM uses a dynamic voltage model, which specifies how to extract information from a data sheet to populate the voltage discharge curve.</span></p>
<p class="p_Text"><span class="f_Text">Voltage variations in charging and discharging affect the battery's round-trip efficiency. During charging, voltage increases, requiring more power to charge the cell. During discharge the voltage decreases and less power can be extracted. The round-trip efficiency is computed as the net amount of energy discharged from a cell divided by how much energy it took to charge the cell.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cell nominal voltage</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The reference voltage of a single, fully charged cell in the battery as reported by the manufacturer. The typical nominal voltage for a lead acid cell is 2 V, and for lithium ion cell is 3.7 V. </span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">SAM uses the nominal voltage to size the battery bank and compute the battery bank's nominal voltage.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Internal resistance</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery's internal resistance for the battery in Ohms. SAM uses assumes a constant value that it uses both voltage calculations as well as thermal calculations.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">C-rate of discharge curve</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Battery manufacturers data sheets typically come with a curve detailed the cell voltage as a function of charge removed, and report several different curves depending on the discharge rate. The “C-rate” is the current used to discharge the battery. It is defined as the current divided by the rated capacity. So if the discharge current is at the 20-hour discharge rate, the “C-rate” is</span><span class="f_CHEquationVariable"> I</span><span class="f_CHEquationVariable" style="font-size: 7pt; vertical-align: sub;">20</span><span class="f_CHEquationVariable"> ÷ q</span><span class="f_CHEquationVariable" style="font-size: 7pt; vertical-align: sub;">20</span><span class="f_CHEquationVariable"> × C = 0.05 × C (C/20)</span><span class="f_VariableDescription">. </span></p>
<p style="text-align: center; margin: 0px 0px 6px 0px;"><img alt="IMG_BATT-DischargeCurve" width="469" height="371" style="margin:0px auto 0px auto;width:469px;height:371px;border:none" src="img_batt-dischargecurve.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Fully charged cell voltage</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The voltage at the given C-rate when a cell is at its maximum charge</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Exponential zone cell voltage</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The cell voltage at the end of the exponential zone, as shown in the Nominal Current Discharge Characteristic graph below. The cell charge removed at this point is </span><img alt="EQ_BATT_Exponential" width="54" height="20" style="margin:0;width:54px;height:20px;border:none" src="eq_batt_exponential.png"/><span class="f_VariableDescription">. </span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Nominal zone cell voltage </span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The cell voltage at the end of the nominal zone, as shown in the Nominal Current Discharge Characteristic graph below.. The cell charge removed at this point is </span><img alt="EQ_BATT_Nominal" width="54" height="20" style="margin:0;width:54px;height:20px;border:none" src="eq_batt_nominal.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge removed at exponential and nominal point</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Voltage vs discharge curves show that cell-voltage typically undergoes several distinct regions depending on charge. </span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">&nbsp;</span></p>
<p class="p_TextCenter"><img alt="IMG_BATT-NominalDischargeCharacteristic" width="563" height="343" style="margin:0px auto 0px auto;width:563px;height:343px;border:none" src="img_batt-nominaldischargecharacteristic.png"/></p>
<h4 class="p_Heading4"><span class="f_Heading4">Current and Capacity</span></h4>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cell capacity</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The capacity of a single cell when the battery is fully charged.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Max C-rate of charge</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Batteries typically have some limits based on chemistry for how much power can be input during charging or extracted during discharging. T</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">he C-rate is the current divided by the nominal capacity at that current. A one-hour discharge rate is 1C, whereas a half-hour rate is 2C and a two-hour rate is 0.5C.</span><span class="f_VariableDescription"> If this value is reported on a battery data sheet in units of power, then calculate the C-rate either as:</span></p>
<p class="p_EquationExcel"><span class="f_CHEquationVariable">C</span><span class="f_EquationExcel"> = </span><span class="f_CHEquationVariable">P</span><span class="f_EquationExcel"> ÷ ( </span><span class="f_CHEquationVariable">V</span><span class="f_EquationExcel"> × </span><span class="f_CHEquationVariable">Q</span><span class="f_EquationExcel"> )</span></p>
<p class="p_EquationExcel"><span class="f_CHEquationVariable">C</span><span class="f_EquationExcel"> = </span><span class="f_CHEquationVariable">P</span><span class="f_EquationExcel"> ÷ </span><span class="f_CHEquationVariable">E</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Where,</span></p>
<p class="p_VariableDescription"><span class="f_CHEquationVariable">P</span><span class="f_VariableDescription"> = power limit in units of W</span></p>
<p class="p_VariableDescription"><span class="f_CHEquationVariable">V</span><span class="f_VariableDescription"> = the nominal voltage of the battery bank in V</span></p>
<p class="p_VariableDescription"><span class="f_CHEquationVariable">Q</span><span class="f_VariableDescription"> = nominal charge of battery bank in Ah</span></p>
<p class="p_VariableDescription"><span class="f_CHEquationVariable">E</span><span class="f_VariableDescription"> = nominal bank capacity in Wh</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">SAM's battery thermal model also considers current flow as a primary mechanism for battery heating. Reducing the maximum current charge and discharge is one way to reduce thermal losses and improve battery efficiency.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Max C-rate discharge</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Enter the maximum allowed C-rate of discharge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Computed properties</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">These are the values that SAM uses for simulation. The values may either be ones that you specify explicitly, or that SAM calculates, depending on whether you choose the </span><span class="f_CHInterfaceElement">Specify desired bank size</span><span class="f_VariableDescription"> or </span><span class="f_CHInterfaceElement">Specify cells</span><span class="f_VariableDescription"> option.</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Nominal bank capacity</span><span class="f_VariableDescription"> The product of total number of cells and cell capacity.</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Nominal bank voltage</span><span class="f_VariableDescription"> The product of number of cells in series and the cell nominal voltage</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Cells in series</span><span class="f_VariableDescription"> The number of battery cells in series in each string of cells, determines the battery bank voltage. Either the value you specify explicitly, or that SAM calculates as described above.</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Strings in parallel</span><span class="f_VariableDescription"> The number of parallel strings of battery cells, determines the battery bank capacity. Either the value you specify explicitly, or that SAM calculates as described above.</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Maximum power</span><span class="f_VariableDescription"> The maximum discharge power, calculated from the nominal bank capacity and maximum C-rate of discharge.</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Time at maximum power</span><span class="f_VariableDescription"> The nominal bank capacity divided by the maximum power, or 1 divided by the maximum C-rate of discharge.</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Maximum charge current</span><span class="f_VariableDescription"> Calculated from the maximum C-rate of charge: Maximum Charge Current = 1000 × Maximum C-rate of Charge × Nominal Bank Capacity ÷ Nominal Bank Voltage.</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Maximum discharge current</span><span class="f_VariableDescription"> Calculated from the maximum C-rate of discharge: Max Discharge Current = 1000 × Max C-rate of Discharge × Nominal Bank Capacity ÷ Nominal Bank Voltage.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Power Converters</span></h4>
<p class="p_Text"><span class="f_Text">SAM assumes that the battery is connected to the system between the inverter and grid interconnection point. Power conversion equipment is required to convert DC power from the battery to AC power before it can serve the load or be sent to the grid, and to convert AC power from the inverter or grid before it can charge the battery.</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">AC to DC conversion efficiency</span><span class="f_VariableDescription"> &nbsp;A loss applied as the battery internally converts input AC power to DC for storage. &nbsp;This efficiency is applied as energy comes into the battery.</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">DC to AC conversion efficiency</span><span class="f_VariableDescription"> &nbsp;A loss applied as the battery internally inverts DC power to AC to meet the load. &nbsp;This efficiency is applied as energy leaves the battery.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Storage Dispatch Controller</span></h4>
<p style="line-height: 1.38; margin: 0px 0px 13px 0px;"><span style="font-size: 11pt; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;">The dispatch controller determines the timing of battery charges and discharges, and discharge limits. You can either choose an automated dispatch model where SAM determines the timing automatically, or define the timing manually using the monthly time-of-day matrices. The manual dispatch controller allows you to maximize the value of storage by matching storage dispatch to the <a href="electric_load.htm" class="topiclink">load</a> and <a href="electricity_rates.htm" class="topiclink">electricity rates</a>.</span></p>
<p class="p_Note"><span class="f_CHNote">Notes.</span><span class="f_Note"> </span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">The automated dispatch options use stored energy from the battery to minimize power consumption from the grid, rather than to minimize power price. The dispatch algorithm does not use information from the <a href="electricity_rates.htm" class="topiclink">Electricity Rates</a> page. Future versions of the dispatch model may include options for minimizing price.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">The the storage dispatch controller uses hours to define periods, even for subhourly simulations.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Choose Dispatch Model</span></h4>
<p class="p_Text"><span class="f_Text">Choose the automated dispatch model that most closely represents how you would like the battery to be charged and discharged, or choose the manual dispatch option to specify the timings manually.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Peak-shaving 1-day look ahead</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each day, look ahead to the next day's solar resource and load data, and operate system to minimize grid power consumption.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Peak shaving 1-day look behind</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each day, look behind to the previous day's solar resource and load data, and operate the system to minimize grid power consumption.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Automated grid power target</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Operate the system to shave peak demand to meet grid power targets that you specify. The target can be a single annual target, monthly targets, or targets for specific time steps.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Manual dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">No automation. You specify the timing of battery charges and discharges using up to six dispatch periods and a set of weekday and weekend hourly profiles by month.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Charge Limits and Priority</span></h4>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Minimum state of charge</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Sets a limit on the quantity of energy that can be drained from the battery. Battery lifetime is highly dependent on depth-of-discharge, so this value should be set based on your battery chemistry and desired performance over time.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum state of charge</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Sets a limit on the quantity of energy that can be sent to the battery. Battery lifetime is dependent on depth-of-discharge and state-of-charge, so this value should be set based on your battery chemistry and desired performance over time.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Minimum time at charge state</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">This setting only applies to sub-hourly simulations. You can ignore it for hourly simulations. For sub-hourly simulations, there may be periods of time where the photovoltaic output varies above and below the load causing rapid cycling of the battery. This kind of cycling, especially if the cycles are deep, may degrade battery performance over time. The minimum time at charge state prevents the battery to change between charging and discharging within the number of minutes that you specify.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">PV meets load before charging battery</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use this option if you want the photovoltaic output to serve the electric load before charging the battery. Only PV output in excess of the load can be sent to the battery for charging.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">PV charges battery before meeting load</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use this option if you want photovoltaic output to charge the battery before serving the load. PV output will only serve the load when the battery is fully charged. Use this option for a project using a battery-specific <a href="incentives.htm" class="topiclink">tax credit</a> that requires a large percentage of energy charging the battery to come from a renewable energy system instead of the grid.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Automated Grid Power Target Model</span></h4>
<p class="p_Text"><span class="f_Text">When you choose the automated grid power target dispatch model, you must also specify the grid power target(s).</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enter single or monthly powers</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to specify a either a single grid power target for the entire year, or a grid power target for each month. Click </span><span class="f_CHInterfaceElement">Edit values</span><span class="f_VariableDescription"> to specify the targets.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enter time series powers</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to enter a grid power target for each time step in the simulation. Click </span><span class="f_CHInterfaceElement">Edit data</span><span class="f_VariableDescription"> to specify the targets.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Manual Dispatch Model</span></h4>
<p class="p_Text"><span class="f_Text">The manual dispatch model allows you to manually specify the timing of battery charges and discharges. Choose the </span><span class="f_CHInterfaceElement">Manual dispatch</span><span class="f_Text"> option under </span><span class="f_CHInterfaceElement">Choose Dispatch Model</span><span class="f_Text"> to make the manual dispatch inputs active.</span></p>
<p class="p_Text"><span class="f_Text">You can specify how you want to charge the battery (from grid or PV), and whether to allow battery discharging for up to six periods. Use the weekday and weekend schedules to specify the hour of day and month of year that each period applies.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from PV</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to be charged by the photovoltaic system, check the box in the </span><span class="f_CHInterfaceElement">Charge from PV</span><span class="f_VariableDescription"> column. Note that the options under </span><span class="f_CHInterfaceElement">Charge Limits and Priority</span><span class="f_VariableDescription"> determine whether the PV system meets the load before charging or charges the battery before meeting the load.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to be charged from PV, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column, and specify the percentage of the battery's state of charge that can be charged from the grid over the time step. For example, for hourly simulations, a value of 25% would allow the grid to deliver 25% of the battery state of charge at the beginning of the hour over the hour. The purpose of the percentage is to prevent large spikes in grid power to charge the battery.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> For subhourly simulations, the charge and discharge percentages apply to the subhourly time step even though the periods are defined in hours.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">If the </span><span class="f_CHInterfaceElement">Charge from grid</span><span class="f_VariableDescription"> and </span><span class="f_CHInterfaceElement">Charge from PV</span><span class="f_VariableDescription"> check boxes are both selected and the PV array output is greater than the <a href="electric_load.htm" class="topiclink">load</a>, the grid supplements the PV array: all available excess PV electricity charges the battery and the grid meets the remaining charge requirement.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">If the </span><span class="f_CHInterfaceElement">Charge from grid</span><span class="f_VariableDescription"> and </span><span class="f_CHInterfaceElement">Allow discharging</span><span class="f_VariableDescription"> check boxes are both selected and the battery state of charge is above the minimum state of charge, the battery discharges until it reaches the minimum state of charge, at which point it starts charging from the grid, either until it reaches the maximum state of charge, or until the time period changes to one that does not allow charging from the grid.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Discharge</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to discharge to meet the <a href="electric_load.htm" class="topiclink">load</a>, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column, and specify the percentage of the battery's available charge that can be dispatched over the time step. The available charge is defined by the minimum and maximum state of charge values under </span><span class="f_CHInterfaceElement">Charge Limits and Priority</span><span class="f_VariableDescription">. </span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For example, if Period 3 is the four consecutive hours between 3 pm and 6 pm, the discharge capacity is 25%, and the charge limits are 30% and 96%, for an hourly simulation, that would allow up to 25% of the charge the battery holds at the beginning of the 3 pm hour to be discharged over the hour. For the 4 pm hour, 25% of the charge at the end of the 3 pm hour would be available, and so on until the end of Period 3. The 25% value would discharge the battery over the full four-hour period. (A 20% value would have the same effect for a 5-hour period, i.e., if Period 3 were between 3 pm and 7 pm.)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a one-minute simulation, a capacity to discharge of 25% would allow up to 25% of the available charge to be dispatched </span><span class="f_Emphasis">every minute</span><span class="f_VariableDescription"> over Period 3, so a smaller percentage would be required to allow the battery to discharge over the full four-hour period.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weekday and Weekend Schedules</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">To define the hour of day and month of year that each period applies, use your mouse to select a rectangle in the schedule matrix, and use your keyboard to type the period number (1-6). The number you type should appear in the rectangle.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Battery Lifetime</span></h4>
<p class="p_Text"><span class="f_Text">SAM's battery lifetime model considers battery cycling as the primary cause of capacity degradation. Future versions will also account for calendar losses and thermal damage. </span></p>
<p style="line-height: 1.38; margin: 0px 0px 13px 0px;"><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">The model relies on information about capacity fade at the number of cycles elapsed at an average depth of discharge. For the most comprehensive analysis, it is recommended to enter two or three triplets of information for two or three depths of discharge. As an example of a comprehensive input, consider the battery data sheet diagram:</span></p>
<p class="p_TextCenter"><img alt="IMG_BATT-LifeVSDepthDischarge" width="600" height="417" style="margin:0px auto 0px auto;width:600px;height:417px;border:none" src="img_batt-lifevsdepthdischarge.png"/></p>
<p class="p_Text"><span class="f_Text">The following example shows how you would enter the data in the graph above into the table in SAM:</span></p>
<p class="p_TextCenter"><img alt="IMG_Batt-LifeToSAM" width="681" height="222" style="margin:0px auto 0px auto;width:681px;height:222px;border:none" src="img_batt-lifetosam.png"/></p>
<p class="p_Text"><span class="f_Text">Some battery data sheets do not report comprehensive information about cycle life and depth of discharge. For these batteries, you can use SAM's default values. You must provide at least three rows of data. For a table with more than one depth-of-discharge value, SAM uses bilinear interpolation to consider both the average depth-of-discharge and cycle number when applying the capacity fade. If the table contains data for a single depth-of-discharge value, then SAM only considers the cycle number in the capacity fade calculation using a &nbsp;rainflow counting algorithm.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Battery Bank Replacement</span></h4>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">No replacements</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use this option if you do not want to account for battery replacement costs, or if you want to account for them using the Operation and Maintenance inputs on the <a href="pv_system_costs.htm" class="topiclink">System Costs</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Replace at specified capacity</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use this option if you want SAM to calculate the year in which batteries are replaced based on degradation of the battery's capacity caused by battery cycling.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">If you do not use this option and battery fails during the simulation because of insufficient capacity, the model will treat subsequent time steps as if there is no battery. If you specify a replacement capacity of less than 2%, due to simulation issues as the battery maximum capacity approaches 0% of its original capacity, an internal minimum cutoff of 2% is used as replacement criterion.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;"> To use this option, you must choose the </span><span class="f_CHInterfaceElement">PV simulation over analysis period option</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;"> on the <a href="lifetime.htm" class="topiclink">Lifetime</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery bank replacement threshold</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">When you choose the </span><span class="f_CHInterfaceElement">Replace at specified capacity</span><span class="f_VariableDescription"> option, the percentage of the battery's original nominal capacity at which the battery should be replaced.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Replace at specified schedule</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use this option to explicitly specify the years in which the batteries are replaced.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery bank replacement threshold</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">When you choose the </span><span class="f_CHInterfaceElement">Replace at specified capacity option</span><span class="f_VariableDescription">, this is the percentage of the battery's rated capacity that triggers a replacement. When the battery's capacity has degraded to this percentage. SAM replaces the battery and applies the replacement cost to the project cash flow.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery bank replacement schedule</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">When you choose the </span><span class="f_CHInterfaceElement">Replace at specified schedule</span><span class="f_VariableDescription"> option, click </span><span class="f_CHInterfaceElement">Edit data</span><span class="f_VariableDescription"> to specify the years that you want battery replacements to occur. In the Edit Data window, click </span><span class="f_CHInterfaceElement">Number of values</span><span class="f_VariableDescription">, and enter the analysis period from the <a href="financial_parameters.htm" class="topiclink">Financial Parameters</a> input page. Then in the table, type a '1' for each year in which the batteries will be replaced. The rows for the remaining years should be zero.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery bank replacement cost</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery replacement cost in Year 1 dollars. SAM uses the inflation rate from the <a href="financial_parameters.htm" class="topiclink">Financial Parameters</a> page to calculate the replacement cost in the replacement year.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cost escalation above inflation</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">An annual escalation rate for the battery replacement cost that applies over inflation.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Thermal Behavior </span></h4>
<p class="p_Text"><span class="f_Text">The thermal model computes the battery temperature, which modifies the battery capacity. The system configuration assumes that the battery is stored in a conditioned room at a fixed temperature and is not exposed directly to heat from the sun. The two main heat-transfer terms are transfer between the battery and the room, and internal energy generation via resistive heating.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Heat transfer</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Battery Cp</span><span class="f_VariableDescription"> Estimated specific heat capacity for the battery</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Battery h</span><span class="f_VariableDescription"> Estimated heat transfer coefficient from the battery to the room</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Room temperature</span><span class="f_VariableDescription"> Temperature of the room where the battery will be stored</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Capacity fade with temperature</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Many manufacturers’ data sheets include battery capacity vs. temperature, showing that as temperature decreases, the relative battery capacity decreases as well. So, if at 32°F, the capacity is 85% of nominal, the capacity percent would be entered as 85%.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Physical properties</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">In order to scale battery mass and surface area as the battery bank is sized, properties are entered on a per Wh basis.</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Specific energy per mass</span><span class="f_VariableDescription"> Energy content per unit mass</span></p>
<p class="p_VariableDescription"><span class="f_CHInterfaceElement">Surface energy per volume</span><span class="f_VariableDescription"> Energy content per unit volume</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Given these two properties, approximate battery length, width, height and mass are computed.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Battery Macro</span></h3>
<p style="line-height: 1.38; margin: 0px 0px 13px 0px;"><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">The Battery Financials <a href="macros.htm" class="topiclink">macro</a> calculates the cost and value of three scenarios based on the inputs in the current case. The macro runs lifetime simulations to show metrics for a scenario with no system where the entire building load is met by grid power, a scenario with a photovoltaic system but no batter, and a scenario with photovoltaic system with battery.</span></p>
<p class="p_Text"><span class="f_Text">The &nbsp;purpose of the macro is to help you make a economic comparison of the battery system with a PV-only system, or using only the grid to meet the load. It shows total annual charges from the electric utility bill for the three scenarios. In the example below, the system with storage has lower electricity charges over the 25-year analysis period than the other scenarios. The utility bill savings offset the additional capital, replacement, and operation and maintenance costs, making the system with storage more cost effective than both the PV-only and grid-only scenarios.</span></p>
<p style="line-height: 1.38; margin: 0px 0px 13px 0px;"><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;">To run the macro, set up a case for the photovoltaic system with battery, and then click </span><span class="f_CHInterfaceElement">Macros</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;"> (in the lower left corner of the SAM window) &nbsp;and choose Battery Financials to show the macro. Click </span><span class="f_CHInterfaceElement">Run macro</span><span style="font-family: 'Segoe UI',Tahoma,Verdana,Arial,sans-serif;"> to run the macro.</span></p>
<p style="text-align: center; line-height: 1.38; margin: 0px 0px 13px 0px;"><img alt="SS_Battery-Macro" width="351" height="349" style="margin:0px auto 0px auto;width:351px;height:349px;border:none" src="ss_battery-macro.png"/></p>

</td></tr></table>

</body>
</html>
