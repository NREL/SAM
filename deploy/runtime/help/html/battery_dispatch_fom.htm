<!DOCTYPE html>
<html>
<head>
   <title>Battery Dispatch FOM</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "battery_dispatch_fom.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#FFFFFF; color:#0072C6;">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1"><span class="f_Heading1">Battery Dispatch FOM</span></h1>

    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p class="p_Text"><span class="f_Text">The Battery Dispatch page displays inputs for controlling the battery dispatch, or timing of battery charging and discharging. For inputs that describe the battery's performance characteristics, see the <a href="battery_storage_fom.htm" class="topiclink">Battery Cell and System</a> page.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Charge Limits and Priority</span></h3>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Minimum state of charge, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Sets a limit on the quantity of energy that can be drained from the battery. Battery lifetime is highly dependent on depth of discharge, so this value should be set based on your battery chemistry and desired performance over time. For example a value of 15% would prevent the battery from discharging below a 15% state of charge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum state of charge, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Sets a limit on the quantity of energy that can be sent to the battery. Battery lifetime is dependent on depth of discharge and state of charge, so this value should be set based on your battery chemistry and desired performance over time. For example a value of 95% would prevent the battery from charging above 95% state of charge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Initial state of charge, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The state of charge of the battery at the beginning of the simulation. A value of 100% would be for a fully charged battery, 0% would be for a fully discharged battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Minimum time at charge state, min</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">There may be periods of time where the photovoltaic or other power system output varies above and below the load causing rapid cycling of the battery. Rapid cycling may also result for dispatch options that respond to power prices when prices change rapidly from time step to time step. This kind of cycling, especially if the cycles are deep, may degrade battery performance over time. The minimum time at charge state prevents the battery from changing between charging and discharging within the number of minutes that you specify.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Storage Dispatch Controller (Front of Meter)</span></h3>
<p class="p_Text"><span class="f_Text">The battery dispatch options determine when the battery charges and discharges. The charge options determine any limits on how the battery can charge or discharge.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Dispatch Options</span></h4>
<p class="p_Text"><span class="f_Text">Choose the dispatch option that most closely represents when you want the battery to charge and discharge.</span></p>
<p class="p_Text"><span class="f_Text">Choose the automated dispatch model that most closely represents how you would like the battery to be charged and discharged, or choose the manual dispatch option to specify the timings manually.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Automated dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Automated dispatch dispatches the battery to maximize revenue from power sales.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">PV smoothing</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">PV smoothing dispatches the battery for photovoltaic-battery systems to limit power ramp rates at the grid interconnection point.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Dispatch to custom time series</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Dispatch the battery according to time series charge and discharge power values you provide. Use this option when you know exactly how you want the battery to charge and discharge</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Manual dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">No automation. You specify the timing of battery charges and discharges using up to six dispatch periods and a set of weekday and weekend hourly profiles by month.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Charge Options</span></h4>
<p class="p_Text"><span class="f_Text">For non-manual dispatch options, choose the source of power for charging the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the grid to charge the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from system</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the system to charge the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from clipped system power</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Available for any of the three automated dispatch options for a PV system with DC-connected batteries only. This option will use any DC array power in excess of the inverter's nominal DC input power to charge the battery.</span></p>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A1_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A1','TOGGLE0186A1_ICON')">Automated Dispatch</a></span></td></tr></table></div><div id="TOGGLE0186A1" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">SAM's front-of-meter automated dispatch algorithms are described in DiOrio, N.; Denholm, P.; Hobbs, W. (2020). <a href="https://doi.org/10.1016/j.apenergy.2019.114465" target="_blank" class="weblink">A Model for Evaluating the Configuration and Dispatch of PV Plus Battery Power Plants</a>. Applied Energy Vol 262 March 2020.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> The automated dispatch options use power price information from the Revenue or Financial Parameters pages. If you are modeling a system that responds to hourly or subhourly power prices instead of the month by hour weekday and weekend schedules, you can use the TOD factors by time step option to enter price data. (Set the PPA price to $1/kWh if you want to use $/kWh price data instead of multipliers.) The merchant plant financial model may not work well with battery storage systems because of the cleared capacity requirement.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Perfect look ahead</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each day, dispatch the battery based on the available power from the photovoltaic or other power source and time-of-delivery (TOD) power price multipliers (on the Revenue or Financial Parameters page) to maximize revenue. The look-ahead option is a perfect prediction of available power and prices because the battery dispatch coincides with the actual power production.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">One day look behind</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to perfect look ahead, but based on the available power and TOD multipliers in the previous 24 hours.The look-behind option adds some uncertainty to the dispatch because the battery dispatch coincides with solar resource for the previous day. The following illustration is for behind-the-meter storage with an electric load, but the concept is the same for a front-of-meter battery.</span></p>
<p class="p_Text" style="text-align: center;"><img alt="IMG_BATT-dispatch-peak-shaving" width="294" height="237" style="margin:0 auto 0 auto;width:294px;height:237px;border:none" src="img_batt-dispatch-peak-shaving.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Look ahead to custom weather file</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to the look ahead automated dispatch option, except, for the PV-battery configuration, use a different weather file for the forecast of available power.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Frequency to update dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For any of the three automated dispatch options, determines how often a new dispatch decision is made.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Look-ahead period</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the automated look ahead and automated custom weather file option, the number of hours ahead of the current time step to use for the dispatch decision in the current time step.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Cycle degradation penalty option</span></h4>
<p class="p_Text"><span class="f_Text">For any of the automated dispatch options, choose a method for estimating the cost of cycling the battery: Choose </span><span class="f_CHInterfaceElement">Calculate automatically</span><span class="f_Text"> if you want SAM to calculate the cost, or choose </span><span class="f_CHInterfaceElement">Enter penalty</span><span class="f_Text"> to enter a cost per cycle-kWh value.</span></p>
<p class="p_Text"><span class="f_Text">If you choose the &quot;calculate automatically&quot; option, SAM reports the calculated penalty as </span><span class="f_CHInterfaceElement">Computed cycle degradation penalty</span><span class="f_Text"> in the <a href="battery_results.htm" class="topiclink">battery time series results</a>.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cycle degradation penalty</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">When you choose the &quot;enter penalty&quot; option for the cycle degradation penalty option, this is the penalty in $/cycle-kWh of battery total capacity for cycling the battery. You can either enter a single value, or click the </span><img alt="SS_AnnSched-valschedbutton" width="23" height="24" style="margin:0;width:23px;height:24px;border:none" src="ss_annsched-valschedbutton.png"/> <span class="f_VariableDescription">button to enter a different penalty for each year of the analysis period.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Custom Weather File for Forecast</span></h4>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the automated dispatch custom weather file option, click </span><span class="f_CHInterfaceElement">Browse</span><span class="f_VariableDescription"> to choose a weather file in the SAM CSV format to use for the solar resource forecast that is different from the file used for the simulation.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A2_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A2','TOGGLE0186A2_ICON')">PV Smoothing</a></span></td></tr></table></div><div id="TOGGLE0186A2" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The PV smoothing algorithm dispatches the battery to reduce rapid fluctuations in a photovoltaic-battery system's output that can occur on partly cloudy days.</span></p>
<p class="p_Note"><span class="f_CHNote">Notes.</span><span class="f_Note"> </span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">The PV smoothing algorithms requires a simulation time step of 15 minutes or smaller. For SAM's photovoltaic models, the simulation time step is determined by the temporal resolution of the weather file. You can download 15-minute and 5-minute weather data from the NREL National Solar Radiation Database by choosing the </span><span class="f_CHInterfaceElement">Advanced download</span><span class="f_Note"> option on the <a href="pv_location_and_resource.htm" class="topiclink">Location and Resource</a> page, or you can convert data from an hourly weather file to subhourly time steps using the &quot;Solar Resource Interpolation&quot; <a href="macros.htm" class="topiclink">macro</a>.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">When you choose the PV smoothing dispatch option, be sure to check the charge options to allow the battery to charge from the system, grid or both.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">Simulations with PV smoothing can take several minutes to run, depending on your computer and the weather file time step.</span></p>
<p class="p_Text"><span class="f_Text">After running a simulation, you can find results of the PV smoothing algorithm on the Results page Data Tables, Time Series, and other tabs by searching for &quot;pv smoothing.&quot; The relevant results all start with </span><span class="f_CHInterfaceElement">PV smoothing...</span><span class="f_Text">.</span></p>
<p class="p_Text"><span class="f_Text">For more information about the algorithm, see:</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">For an introduction to the PV Smoothing algorithm, see the &quot;Battery Updates for Fall 2021&quot; webinar recording available on the SAM website at <a href="https://sam.nrel.gov/battery-storage/battery-videos.html" target="_blank" class="weblink" title="https://sam.nrel.gov/battery-storage/battery-videos.html">https://sam.nrel.gov/battery-storage/battery-videos.html</a>. </span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">The model is based on the EPRI open source project PV Ramp Rate Smoothing available on GitHub.com at <a href="https://github.com/epri-dev/PV-Ramp-Rate-Smoothing" target="_blank" class="weblink" title="https://github.com/epri-dev/PV-Ramp-Rate-Smoothing">https://github.com/epri-dev/PV-Ramp-Rate-Smoothing</a>.</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ListLast">A description of the model will be available in the forthcoming publication Fregosi, D.; Bolen, M.; Hobbs, W. (Forthcoming) &quot;An analysis of storage requirements and benefits of short-term forecasting for PV ramp rate mitigation:&quot;</span></p><p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weather file time stamp, minutes</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The temporal resolution of the currently selected weather file on the Location and Resource page. The PV smoothing algorithm requires a weather file with a time step of 15 minutes or smaller.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Ramp timestep multiplier</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The ramp interval is a multiple of the simulation time step determined by the ramp timestep multiplier. For example, if the simulation time step is 5 minutes, for a ramp interval of 15 minutes, you would enter a ramp timestep multiplier value of 3.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Ramp interval, minutes</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The interval used to calculate the ramp rate. The ramp rate is a change in power from one interval to the next.</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">Ramp Interval (minutes) = Weather File Times Step (minutes) × Ramp Timestep Multiplier</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum ramp rate, % of nameplate per ramp interval</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The maximum change in power allowed from one ramp interval to the next as a percentage of the </span><span class="f_CHInterfaceElement">Nameplate for PV smoothing</span><span class="f_VariableDescription">, or the interconnection limit from the <a href="grid_limits.htm" class="topiclink">Grid</a> page, whichever is less. </span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> SAM uses the interconnection limit value to calculate the PV smoothing maximum ramp rate even when the interconnection limit on the Grid page is disabled. If you do not want the interconnection limit to affect PV smoothing, enable it and set it to a value much higher than the PV array nameplate capacity, and then disable it.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery resting SOC, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery resting state of charge as a percent of its nameplate capacity.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery energy, kWhac</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery's nominal capacity expressed in AC kilowatt-hours, from the <a href="battery_storage_fom.htm" class="topiclink">Battery Cell and System</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery power, kWac</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery's nominal maximum discharge rate expressed in AC kilowatt-hours, from the <a href="battery_storage_fom.htm" class="topiclink">Battery Cell and System</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery round trip efficiency, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">An estimate of the battery's nominal round-trip efficiency, calculated from Power Converters parameters on the <a href="battery_storage_fom.htm" class="topiclink">Battery Cell and System</a> page. Note that SAM calculates the battery's actual round-trip efficiency during simulations and reports it in the <a href="summary.htm" class="topiclink">Summary tab</a> of the Results page.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a DC-connected battery:</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">Battery Round Trip Efficiency (%) = ( DC to DC Conversion Efficiency (%) × Inverter Efficiency Cutoff (%) ) ÷ 100%</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For an AC-connected battery:</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">Battery Round Trip Efficiency (%) = ( AC to DC Conversion Efficiency (%) × DC to AC Conversion Efficiency (%) ) ÷ 100%</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Nameplate for PV smoothing, kWac</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The PV array's nameplate capacity in AC kilowatts, from the <a href="pv_system_design.htm" class="topiclink">System Design</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Interconnection limit, kWac</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The grid interconnection limit from the <a href="grid_limits.htm" class="topiclink">Grid</a> page. Used to calculate the maximum ramp rate. See description above.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enable AC upper bound</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">This constraint prevents the output power after PV smoothing from exceeding the AC upper bound that you specify.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">AC upper bound, fraction of nameplate</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">When you enable AC upper bound, the system's output is limited to this fraction of </span><span class="f_CHInterfaceElement">Nameplate for PV smoothing</span><span class="f_VariableDescription">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enable AC lower bound</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">This constraint prevents the system's output power after PV smoothing from falling below the AC lower bound that you specify.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">AC lower bound, fraction of nameplate</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">When you enable AC lower bound, the system's output is </span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Correct up-ramp violations</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use PV smoothing to correct ramp violations when power increases from one interval to the next.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Curtail violations</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Curtail up-ramp violations rather than sending excess power to the grid.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enable short-term power forecast</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Consider future power output in battery dispatch decision.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Forecasting window, periods of ramp rate intervals</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The forecast period when you enable short-term power forecasts.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Perfect look ahead</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use the system output in the forecast period for the power forecast.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Look ahead to custom weather file</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Base the power forecast on a different weather file than the simulation weather file from the <a href="pv_location_and_resource.htm" class="topiclink">Location and Resource</a> page. Click </span><span class="f_CHInterfaceElement">Browse</span><span class="f_VariableDescription"> to choose a weather file in the SAM CSV format for the forecast. The weather file should have the same time step as the simulation weather file.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Multipliers</span></h4>
<p class="p_Text"><span class="f_Text">The multipliers are error terms for a PI (proportional plus integral) controller.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Track PV power multiplier (kp)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Determine how aggressively to PV power. Default is 1.2.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Return to rest SOC multiplier (ki)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Determine how aggressively to return the battery to its resting state of charge. Default is 1.8.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Forecast accumulation error multiplier (kf)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Applies to the difference between the power and forecast power for the ramp rate adjustment. Default is 0.3.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Reset to defaults</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Resets the three multipliers kp, ki, and kf to their default values.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A3_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A3','TOGGLE0186A3_ICON')">Dispatch to Custom Time Series</a></span></td></tr></table></div><div id="TOGGLE0186A3" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">For the dispatch to custom time series option, provide a time series of battery power values. SAM attempts to charge and discharge the battery to meet the battery power target values.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Time series battery power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to enter time series battery power values. A negative power value for a time step indicates the battery controller should attempt to charge the battery at the given rate in that time step. A positive power value indicates the battery should discharge.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A4_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A4','TOGGLE0186A4_ICON')">Manual Dispatch</a></span></td></tr></table></div><div id="TOGGLE0186A4" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">For the manual dispatch option, you specify the timing of battery charges and discharges using up to six dispatch periods and a set of weekday and weekend hourly profiles by month under </span><span class="f_CHInterfaceElement">Manual Dispatch</span><span class="f_Text">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from system</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to be charged by power from the system, check the box in the </span><span class="f_CHInterfaceElement">Charge from system</span><span class="f_VariableDescription"> column. </span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to be charged by power from the grid, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column, and specify the percentage of the battery's state of charge that can be charged from the grid over the time step in the </span><span class="f_CHInterfaceElement">Rate</span><span class="f_VariableDescription"> column.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For example, for hourly simulations, a charge rate of 25% would allow the battery to charge from the grid at 25% of its state of charge at the beginning of the time step over the time step. The purpose of this rate is to avoid damaging the battery by charging it too quickly.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> For subhourly simulations, the charge and discharge rates apply to the subhourly time step even though the periods are defined in hours.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a behind-the-meter application, if </span><span class="f_CHInterfaceElement">Charge from grid</span><span class="f_VariableDescription"> and </span><span class="f_CHInterfaceElement">Charge from system</span><span class="f_VariableDescription"> are both checked for a given period, and if in a time step in that period the system power is greater than the <a href="electric_load.htm" class="topiclink">load</a>, power from the grid will supplement the system power to meet the battery charge requirement.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">If </span><span class="f_CHInterfaceElement">Charge from grid</span><span class="f_VariableDescription"> and the discharge option is also checked for a given period, and if in that period the battery state of charge is above the minimum state of charge, the battery discharges until it reaches the minimum state of charge, at which point it starts charging from the grid, either until it reaches the maximum state of charge, or until the time period changes to one that does not allow charging from the grid.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Discharge to grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to discharge to the grid, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column, and specify the percentage of the battery's state of charge that can be discharged to the grid over the time step in the </span><span class="f_CHInterfaceElement">Rate</span><span class="f_VariableDescription"> column.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For example, if Period 3 is the four consecutive hours between 3 pm and 6 pm, the discharge rate is 25%, and the charge limits are 30% and 96%, for an hourly simulation, that would allow up to 25% of the battery state of charge at the beginning of the 3 pm hour to be discharged over the hour. For the 4 pm hour, 25% of the charge at the end of the 3 pm hour would be available, and so on until the end of Period 3. The 25% value would discharge the battery over the full four-hour period. (A 20% value would have the same effect for a 5-hour period, i.e., if Period 3 were between 3 pm and 7 pm.)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a one-minute simulation, a discharge rate of 25% would allow up to 25% of the available charge to be dispatched </span><span class="f_Emphasis">every minute</span><span class="f_VariableDescription"> over Period 3, so a smaller percentage would be required to allow the battery to discharge over the full four-hour period.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weekday and Weekend Schedules</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">To define the hour of day and month of year that each period applies, use your mouse to select a rectangle in the schedule matrix, and use your keyboard to type the period number (1-6). The number you type should appear in the rectangle.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">See <a href="weekday-schedule.htm" class="topiclink">Weekday-weekend Schedules</a> for a step-by-step description of how to use the schedule matrices</span>.</p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Copy Schedules from TOU/TOD Schedules</span></p>
<p class="p_VariableDescription">Use this button to copy the the weekday and weekend schedules from the energy charge time-of-use (TOU) schedule on the Electricity Rates page for behind-the-meter (BTM) systems, or from the time-of-delivery (TOD) schedules on the Time of Delivery or Revenue page for front-of-meter (FOM) systems.</p>
</td>
</tr>
</table>
</div>

</td></tr></table>

<script type="text/javascript">
HMInitToggle('TOGGLE0186A1_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A1\',\'TOGGLE0186A1_ICON\')');
HMInitToggle('TOGGLE0186A1','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A2_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A2\',\'TOGGLE0186A2_ICON\')');
HMInitToggle('TOGGLE0186A2','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A3_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A3\',\'TOGGLE0186A3_ICON\')');
HMInitToggle('TOGGLE0186A3','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A4_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A4\',\'TOGGLE0186A4_ICON\')');
HMInitToggle('TOGGLE0186A4','hm.type','dropdown','hm.state','0');
</script>
</body>
</html>
