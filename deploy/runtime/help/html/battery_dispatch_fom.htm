<!DOCTYPE html>
<html>
<head>
   <title>Battery Dispatch FOM</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "battery_dispatch_fom.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#FFFFFF; color:#0072C6;">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1"><span class="f_Heading1">Battery Dispatch FOM</span></h1>

    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p class="p_Text"><span class="f_Text">The Battery Dispatch page displays inputs for controlling the battery dispatch, or timing of battery charging and discharging. For inputs that describe the battery's performance characteristics, see the <a href="battery_storage_fom.htm" class="topiclink">Battery Cell and System</a> page.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Charge Limits and Priority</span></h3>
<p class="p_Text"><span class="f_Text">The Charge Limits and Priority inputs are constraints on the battery dispatch calculations.</span></p>
<p class="p_Text"><span class="f_Text">The limits on minimum and maximum state of charge affect both the amount of energy available for battery dispatch calculations, and the depth of charge-discharge cycles for battery life calculations. Choose values appropriate for the type of battery you are modeling. The default values state of charge range of 15% to 95% is reasonable for most Li-ion battery types.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Minimum state of charge, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">A limit on the quantity of energy that can be drained from the battery as a percentage of available capacity. For example, a value of 15% would prevent the battery from discharging below 15% of the battery's available capacity in a given time step.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> The minimum and maximum state of charge are both as a percentage of available battery capacity, which changes over time as the batteries degrade and are replaced. The available capacity in a given time step is likely to be less than the battery's nominal capacity shown on the Battery Cell and System page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum state of charge, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">A limit on the quantity of energy that can be sent to the battery as a percentage of available capacity. For example a value of 95% would prevent the battery from charging above 95% state of charge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Initial state of charge, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The state of charge of the battery at the beginning of the simulation. A value of 100% would be for a fully charged battery, 0% would be for a fully discharged battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Minimum time at charge state, min</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">There may be periods of time where the photovoltaic or other power system output varies above and below the load causing rapid cycling of the battery. Rapid cycling may also result for dispatch options that respond to power prices when prices change rapidly from time step to time step. This kind of cycling, especially if the cycles are deep, may degrade battery performance over time. The minimum time at charge state prevents the battery from changing between charging and discharging within the number of minutes that you specify.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Front-of-meter (FOM) Storage Dispatch Options</span></h3>
<p class="p_Text"><span class="f_Text">The battery </span><span class="f_Emphasis">dispatch options</span><span class="f_Text"> determine when the battery charges and discharges. The </span><span class="f_Emphasis">charge options</span><span class="f_Text"> determine any limits on how the battery can charge or discharge.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Dispatch Options</span></h4>
<p class="p_Text"><span class="f_Text">Choose the dispatch option that most closely represents when you want the battery to charge and discharge.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> The list below provides a brief description of each option. To see a detailed description of each heading, click the appropriate grey and blue heading below to expand the detailed description.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Automated dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Automated dispatch dispatches the battery in response to changes in the power price to maximize revenue from power sales. Use this option for PPA projects that involve time-of-delivery price multipliers or Merchant Plant projects.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">PV smoothing</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">PV smoothing dispatches the battery for photovoltaic-battery systems to limit power ramp rates at the grid interconnection point. Use this option for projects required to meet ramp rate limits. This option is available for PV battery and Generic battery systems. It is not available for standalone batteries.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Dispatch to custom time series</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Dispatch the battery according to time series charge and discharge power values you provide. Use this option when you know exactly how you want the battery to charge and discharge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Manual dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">No automation. You specify the timing of battery charges and discharges manually using up to six dispatch periods and a set of weekday and weekend hourly profiles by month. Use this option when you want the battery to charge and discharge according to daily or seasonal schedules.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Charge Options</span></h4>
<p class="p_Text"><span class="f_Text">Choose the source of power for charging the battery. SAM enables and disables (greys out) the options as appropriate for the dispatch option and whether the battery is DC- or AC-connected.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the grid to charge the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from system</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the system to charge the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from clipped system power</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For DC-connected batteries with a photovoltaic system, allow DC array power in excess of the inverter's nominal DC input power to charge the battery.</span></p>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A1_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A1','TOGGLE0186A1_ICON')">Automated Dispatch</a></span></td></tr></table></div><div id="TOGGLE0186A1" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">SAM's front-of-meter automated dispatch algorithm attempts to charge and discharge the battery to maximize revenue from power sales to the grid. It calculates a battery power target for each time step, and charges or discharges the battery to attempt to meet the target, given any constraints on battery capacity and battery state of charge, and accounting for power conversion losses. Note that in some time steps, depending on the battery's state of charge and other constraints, the battery discharge power may be less than the target.</span></p>
<p class="p_Text"><span class="f_Text">You can explore the results of the automated dispatch by comparing the output variables </span><span class="f_CHInterfaceElement">Electricity battery power target for automated dispatch</span><span class="f_Text"> to </span><span class="f_CHInterfaceElement">Electricity to/from battery</span><span class="f_Text">. Other useful output variables include </span><span class="f_CHInterfaceElement">Market sell rate (year 1)</span><span class="f_Text"> representing the power prices used for battery dispatch calculations,  </span><span class="f_CHInterfaceElement">Battery state of charge</span><span class="f_Text">, </span><span class="f_CHInterfaceElement">Electricity to grid from battery</span><span class="f_Text">,and </span><span class="f_CHInterfaceElement">Electricity to grid from system</span><span class="f_Text"> (for PV Battery and Generic Battery configurations). </span></p>
<p class="p_Text"><span class="f_Text">Automated battery dispatch responds to power prices that vary over time, which can be defined as a PPA price with time-of-delivery multipliers for PPA projects, or market prices for Merchant Plant projects. For batteries connected to a power system (PV Battery and Generic Battery configurations), battery dispatch also responds to the availability of power from the system. Battery dispatch also accounts for the cost of cycling the battery based on a prediction of how battery cycling will affect battery degradation and replacements.</span></p>
<p class="p_Text"><span class="f_Text">The automated dispatch options determine the time horizon over which the algorithm maximizes revenue</span></p>
<p class="p_Text"><span class="f_Text">The automated dispatch algorithms are described in DiOrio, N.; Denholm, P.; Hobbs, W. (2020). <a href="https://doi.org/10.1016/j.apenergy.2019.114465" target="_blank" class="weblink">A Model for Evaluating the Configuration and Dispatch of PV Plus Battery Power Plants</a>. Applied Energy Vol 262 March 2020, also listed on the SAM website at <a href="https://sam.nrel.gov/battery-storage/battery-publications.html" target="_blank" class="weblink" title="https://sam.nrel.gov/battery-storage/battery-publications.html">https://sam.nrel.gov/battery-storage/battery-publications.html</a>.</span></p>
<p class="p_Note"><span class="f_CHNote">Notes.</span><br />
<span class="f_CHNote">&nbsp;</span><br />
<span class="f_Note">The automated dispatch options require that you choose </span><span class="f_CHInterfaceElement">Specify PPA Price</span><span class="f_Note"> on the Revenue page (Financial Parameters page for Partnership Flip and Sale Leaseback financial models) because the dispatch algorithm needs to know the power price as the simulation runs. For the Specify IRR Target option, SAM does now know the PPA price until the end of the simulation. </span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">Automated dispatch is designed to respond to power prices that change over time. For the power purchase agreement (PPA) financial models, you can specify power price multipliers either using weekday and weekend schedules, or by time step. (Set the PPA price to $1/kWh if you want to use $/kWh price data instead of multipliers, or set it to $0.001/kWh for $/MWh price data.)</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">The merchant plant financial model may not work well with battery storage systems because of the cleared capacity requirement.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Perfect look ahead</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each day, charge and discharge the battery based on the available power from the photovoltaic or other power source and power price to maximize revenue. For standalone batteries with no power system, charge and discharge the battery based on the power price.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The look-ahead option is a perfect prediction of available power and prices because the battery dispatch coincides with the actual power generation and prices.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">One day look behind</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to perfect look ahead, but based on the available power and power prices in the previous 24 hours. The look-behind option adds some uncertainty to the dispatch because the battery dispatch coincides with power generation and prices for the previous day. The following illustration is for behind-the-meter storage with an electric load, but the concept is the same for a front-of-meter battery.</span></p>
<p class="p_Text" style="text-align: center;"><img alt="IMG_BATT-dispatch-fom-automatic" width="409" height="338" style="margin:0 auto 0 auto;width:409px;height:338px;border:none" src="img_batt-dispatch-fom-automatic.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Custom forecast</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the PV Battery configuration, similar to the look ahead automated dispatch option, except use a different weather file for the forecast of available power for battery dispatch than SAM uses to calculate the photovoltaic array power output.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Generic Battery configuration, similar to the look ahead automated dispatch option, except use a different generation profile for the forecast of available power than the generation profile on the Power Plant page.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> The custom forecast option is not available for standalone batteries, which do not dispatch in response to a generation profile from a photovoltaic array or other power generating equipment.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Frequency to update dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For any of the three automated dispatch options, determines how often a new dispatch decision is made.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Look ahead period</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Perfect Look Ahead and Look Ahead to Custom Weather file options, the number of hours ahead of the current time step to use for the dispatch decision in the current time step.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weather file for automated dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the PV Battery configuration, the weather file to use for the custom forecast option. Click </span><span class="f_CHInterfaceElement">Browse</span><span class="f_VariableDescription"> to choose a weather file in the <a href="weather_format_sam_csv_solar.htm" class="topiclink">SAM CSV format</a>.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Generation profile for automated dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Generic Battery configuration, a time series generation profile (hourly or subhourly) to use for the custom forecast option. Click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to import or paste a generation profile.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Cycle Degradation Penalty</span></h4>
<p class="p_Text"><span class="f_VariableDescription">The cycle degradation penalty represents the future cost of replacing the battery. It allows SAM to account for the battery replacement cost in the battery dispatch decision. </span><span class="f_Text">For any of the automated dispatch options, choose a method for estimating the cost of cycling the battery:</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_CHInterfaceElement">Calculate automatically</span><span class="f_List"> if you want SAM to calculate the cost.</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_CHInterfaceElement">Enter penalty</span><span class="f_ListLast"> to enter a cost per cycle-kWh value.</span></p><p class="p_Text"><span class="f_Text">If you choose the Calculate Automatically option, SAM reports the calculated penalty as </span><span class="f_CHInterfaceElement">Computed cycle degradation penalty</span><span class="f_Text"> in the <a href="battery_results.htm" class="topiclink">battery time series results</a>.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cycle degradation penalty</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">When you choose the &quot;enter penalty&quot; option for the cycle degradation penalty option, this is the penalty in $/cycle-kWh of battery total capacity for cycling the battery. You can either enter a single value, or click the </span><img alt="SS_AnnSched-valschedbutton" width="23" height="24" style="margin:0;width:23px;height:24px;border:none" src="ss_annsched-valschedbutton.png"/> <span class="f_VariableDescription">button to enter a different penalty for each year of the analysis period.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A2_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A2','TOGGLE0186A2_ICON')">PV Smoothing</a></span></td></tr></table></div><div id="TOGGLE0186A2" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The PV smoothing algorithm dispatches the battery to reduce rapid fluctuations in a photovoltaic-battery system's output that can occur on partly cloudy days.</span></p>
<p class="p_Note"><span class="f_CHNote">Notes.</span><span class="f_Note"> </span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">The PV smoothing algorithms requires a simulation time step of 15 minutes or smaller. For SAM's photovoltaic models, the simulation time step is determined by the temporal resolution of the weather file. You can download 15-minute and 5-minute weather data from the NREL National Solar Radiation Database by choosing the </span><span class="f_CHInterfaceElement">Advanced download</span><span class="f_Note"> option on the <a href="pv_location_and_resource.htm" class="topiclink">Location and Resource</a> page, or you can convert data from an hourly weather file to subhourly time steps using the &quot;Solar Resource Interpolation&quot; <a href="macros.htm" class="topiclink">macro</a>.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">When you choose the PV smoothing dispatch option, be sure to check the charge options to allow the battery to charge from the system, grid or both.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">Simulations with PV smoothing can take several minutes to run, depending on your computer and the weather file time step.</span></p>
<p class="p_Text"><span class="f_Text">After running a simulation, you can find results of the PV smoothing algorithm on the Results page Data Tables, Time Series, and other tabs by searching for &quot;pv smoothing.&quot; The relevant results all start with </span><span class="f_CHInterfaceElement">PV smoothing...</span><span class="f_Text">. </span><span class="f_CHInterfaceElement">PV smoothing outpower</span><span class="f_Text"> is the battery target power for PV smoothing algorithm: It attempt to dispatch the battery to meet the target, but constraints such as battery state of charge may prevent the target from being met in some time steps. </span><span class="f_CHInterfaceElement">Electricity to grid</span><span class="f_Text"> is power delivered by the PV system and/or battery to the grid, which may be subject to grid constraints or AC losses specified on the <a href="battery_storage_fom.htm" class="topiclink">Battery Cell and System</a>, <a href="grid_limits.htm" class="topiclink">Grid</a> and <a href="pv_losses.htm" class="topiclink">Losses</a> pages.</span></p>
<p class="p_Text"><span class="f_Text">For more information about the algorithm, see:</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">For an introduction to the PV Smoothing algorithm, see the &quot;Battery Updates for Fall 2021&quot; webinar recording available on the SAM website at <a href="https://sam.nrel.gov/battery-storage/battery-videos.html" target="_blank" class="weblink" title="https://sam.nrel.gov/battery-storage/battery-videos.html">https://sam.nrel.gov/battery-storage/battery-videos.html</a>. </span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">The model is based on the EPRI open source project PV Ramp Rate Smoothing available on GitHub.com at <a href="https://github.com/epri-dev/PV-Ramp-Rate-Smoothing" target="_blank" class="weblink" title="https://github.com/epri-dev/PV-Ramp-Rate-Smoothing">https://github.com/epri-dev/PV-Ramp-Rate-Smoothing</a>.</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ListLast">A description of the model will be available in the forthcoming publication Fregosi, D.; Bolen, M.; Hobbs, W. (Forthcoming) &quot;An analysis of storage requirements and benefits of short-term forecasting for PV ramp rate mitigation.&quot;</span></p><p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weather file time stamp, minutes</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The temporal resolution of the currently selected weather file on the Location and Resource page. The PV smoothing algorithm requires a weather file with a time step of 15 minutes or smaller.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Ramp timestep multiplier</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The ramp interval is a multiple of the simulation time step determined by the ramp timestep multiplier. For example, if the simulation time step is 5 minutes, for a ramp interval of 15 minutes, you would enter a ramp timestep multiplier value of 3.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Ramp interval, minutes</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The interval used to calculate the ramp rate. The ramp rate is a change in power from one interval to the next.</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">Ramp Interval (minutes) = Weather File Times Step (minutes) × Ramp Timestep Multiplier</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum ramp rate, % of nameplate per ramp interval</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The maximum change in power allowed from one ramp interval to the next as a percentage of the </span><span class="f_CHInterfaceElement">Nameplate for PV smoothing</span><span class="f_VariableDescription">, or the interconnection limit from the <a href="grid_limits.htm" class="topiclink">Grid</a> page, whichever is less. </span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> SAM uses the interconnection limit value to calculate the PV smoothing maximum ramp rate even when the interconnection limit on the Grid page is disabled. If you do not want the interconnection limit to affect PV smoothing, enable it and set it to a value much higher than the PV array nameplate capacity, and then disable it.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery resting SOC, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery resting state of charge as a percent of its nameplate capacity.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery energy, kWhac</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery's nominal capacity expressed in AC kilowatt-hours, from the <a href="battery_storage_fom.htm" class="topiclink">Battery Cell and System</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery power, kWac</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery's nominal maximum discharge rate expressed in AC kilowatt-hours, from the <a href="battery_storage_fom.htm" class="topiclink">Battery Cell and System</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery round trip efficiency, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">An estimate of the battery's nominal round-trip efficiency, calculated from Power Converters parameters on the <a href="battery_storage_fom.htm" class="topiclink">Battery Cell and System</a> page. Note that SAM calculates the battery's actual round-trip efficiency during simulations and reports it in the <a href="summary.htm" class="topiclink">Summary tab</a> of the Results page.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a DC-connected battery:</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">Battery Round Trip Efficiency (%) = ( DC to DC Conversion Efficiency (%) × Inverter Efficiency Cutoff (%) ) ÷ 100%</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For an AC-connected battery:</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">Battery Round Trip Efficiency (%) = ( AC to DC Conversion Efficiency (%) × DC to AC Conversion Efficiency (%) ) ÷ 100%</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Nameplate for PV smoothing, kWac</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The PV array's nameplate capacity in AC kilowatts, from the <a href="pv_system_design.htm" class="topiclink">System Design</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Interconnection limit, kWac</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The grid interconnection limit from the <a href="grid_limits.htm" class="topiclink">Grid</a> page. Used to calculate the maximum ramp rate. See description above.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enable AC upper bound</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">This constraint prevents the output power after PV smoothing from exceeding the AC upper bound that you specify.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">AC upper bound, fraction of nameplate</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">When you enable AC upper bound, the system's output is limited to this fraction of </span><span class="f_CHInterfaceElement">Nameplate for PV smoothing</span><span class="f_VariableDescription">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enable AC lower bound</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">This constraint prevents the system's output power after PV smoothing from falling below the AC lower bound that you specify.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">AC lower bound, fraction of nameplate</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">When you enable AC lower bound, the system's output is </span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Correct up-ramp violations</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use PV smoothing to correct ramp violations when power increases from one interval to the next.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Curtail violations</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Curtail up-ramp violations rather than sending excess power to the grid.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enable short-term power forecast</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Consider future power output in battery dispatch decision.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Forecasting window, periods of ramp rate intervals</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The forecast period when you enable short-term power forecasts.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Perfect look ahead</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Enable Short-term Power Forecast option, use the system output in the forecast period for the power forecast.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Look ahead to custom weather file</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Enable Short-term Power Forecast option, base the power forecast on a different weather file than the weather file from the <a href="pv_location_and_resource.htm" class="topiclink">Location and Resource</a> page used to simulate the system's performance.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weather file for PV smoothing forecast</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Look Ahead to Custom Weather File option, the weather file to use for the smoothing forecast. Click </span><span class="f_CHInterfaceElement">Browse</span><span class="f_VariableDescription"> to choose a weather file in the <a href="weather_format_sam_csv_solar.htm" class="topiclink">SAM CSV format</a> for the forecast. The weather file should have the same time step as the simulation weather file.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Multipliers</span></h4>
<p class="p_Text"><span class="f_Text">The multipliers are error terms for a PI (proportional plus integral) controller.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Track PV power multiplier (kp)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Determine how aggressively to PV power. Default is 1.2.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Return to rest SOC multiplier (ki)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Determine how aggressively to return the battery to its resting state of charge. Default is 1.8.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Forecast accumulation error multiplier (kf)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Applies to the difference between the power and forecast power for the ramp rate adjustment. Default is 0.3.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Reset to defaults</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Resets the three multipliers kp, ki, and kf to their default values.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A3_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A3','TOGGLE0186A3_ICON')">Dispatch to Custom Time Series</a></span></td></tr></table></div><div id="TOGGLE0186A3" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">For the dispatch to custom time series option, provide a time series of battery power values. SAM attempts to charge and discharge the battery to meet the battery power target values.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Time series battery power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to enter time series battery power values. A negative power value for a time step indicates the battery controller should attempt to charge the battery at the given rate in that time step. A positive power value indicates the battery should discharge.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A4_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A4','TOGGLE0186A4_ICON')">Manual Dispatch</a></span></td></tr></table></div><div id="TOGGLE0186A4" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">For the manual dispatch option, you specify the timing of battery charges and discharges using up to six dispatch periods and a set of weekday and weekend hourly profiles by month under </span><span class="f_CHInterfaceElement">Manual Dispatch</span><span class="f_Text">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from system</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to be charged by power from the system, check the box in the </span><span class="f_CHInterfaceElement">Charge from system</span><span class="f_VariableDescription"> column. Charge from system is disabled for standalone batteries.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to be charged by power from the grid, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column, and specify the percentage of the battery's state of charge that can be charged from the grid over the time step in the </span><span class="f_CHInterfaceElement">Rate</span><span class="f_VariableDescription"> column.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For example, for hourly simulations, a charge rate of 25% would allow the battery to charge from the grid at 25% of its state of charge at the beginning of the time step over the time step. The purpose of this rate is to avoid damaging the battery by charging it too quickly.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> For subhourly simulations, the charge and discharge rates apply to the subhourly time step even though the periods are defined in hours.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">If </span><span class="f_CHInterfaceElement">Charge from grid</span><span class="f_VariableDescription"> and the discharge option is also checked for a given period, and if in that period the battery state of charge is above the minimum state of charge, the battery discharges until it reaches the minimum state of charge, at which point it starts charging from the grid, either until it reaches the maximum state of charge, or until the time period changes to one that does not allow charging from the grid.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Discharge to grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to discharge to the grid, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column, and specify the percentage of the battery's state of charge that can be discharged to the grid over the time step in the </span><span class="f_CHInterfaceElement">Rate</span><span class="f_VariableDescription"> column.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For example, if Period 3 is the four consecutive hours between 3 pm and 6 pm, the discharge rate is 25%, and the charge limits are 30% and 96%, for an hourly simulation, that would allow up to 25% of the battery state of charge at the beginning of the 3 pm hour to be discharged over the hour. For the 4 pm hour, 25% of the charge at the end of the 3 pm hour would be available, and so on until the end of Period 3. The 25% value would discharge the battery over the full four-hour period. (A 20% value would have the same effect for a 5-hour period, i.e., if Period 3 were between 3 pm and 7 pm.)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a one-minute simulation, a discharge rate of 25% would allow up to 25% of the available charge to be dispatched </span><span class="f_Emphasis">every minute</span><span class="f_VariableDescription"> over Period 3, so a smaller percentage would be required to allow the battery to discharge over the full four-hour period.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weekday and Weekend Schedules</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The weekday and weekend schedules determine the hour of day and month of year for each of the up to six dispatch periods. SAM ignores the charge and discharge options for any periods that you do not assign to the weekday or weekend schedules.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">To define the hour of day and month of year that each period applies, use your mouse to select a rectangle in the schedule matrix, and use your keyboard to type the period number (1-6). The number you type should appear in the rectangle.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">See <a href="weekday-schedule.htm" class="topiclink">Weekday Weekend Schedules</a> for a step-by-step description of how to use the schedule matrices</span>.</p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Copy Schedules from TOU/TOD Schedules</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use this button to copy the the weekday and weekend schedules from the time-of-delivery (TOD) schedules on the Time of Delivery or Revenue page for front-of-meter (FOM) systems. This option is not available for the Merchant Plant financial model.</span></p>
</td>
</tr>
</table>
</div>

</td></tr></table>

<script type="text/javascript">
HMInitToggle('TOGGLE0186A1_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A1\',\'TOGGLE0186A1_ICON\')');
HMInitToggle('TOGGLE0186A1','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A2_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A2\',\'TOGGLE0186A2_ICON\')');
HMInitToggle('TOGGLE0186A2','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A3_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A3\',\'TOGGLE0186A3_ICON\')');
HMInitToggle('TOGGLE0186A3','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A4_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A4\',\'TOGGLE0186A4_ICON\')');
HMInitToggle('TOGGLE0186A4','hm.type','dropdown','hm.state','0');
</script>
</body>
</html>
