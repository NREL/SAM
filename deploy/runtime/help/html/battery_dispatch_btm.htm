<!DOCTYPE html>
<html>
<head>
   <title>Battery Dispatch BTM</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "battery_dispatch_btm.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#FFFFFF; color:#0072C6;">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1"><span class="f_Heading1">Battery Dispatch BTM</span></h1>

    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p class="p_Text"><span class="f_Text">The Battery Dispatch page for behind-the-meter (BTM) batteries displays inputs for controlling the timing of battery charging and discharging. For inputs that describe the battery's performance characteristics, see the <a href="battery_storage_btm.htm" class="topiclink">Battery Cell and System</a> page.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Charge Limits and Priority</span></h3>
<p class="p_Text"><span class="f_Text">The Charge Limits and Priority inputs are constraints on the battery dispatch calculations.</span></p>
<p class="p_Text"><span class="f_Text">The limits on minimum and maximum state of charge affect both the amount of energy available for battery dispatch calculations, and the depth of charge-discharge cycles for battery life calculations. Choose values appropriate for the type of battery you are modeling. The default values state of charge range of 15% to 95% is reasonable for most Li-ion battery types.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Minimum state of charge, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">A limit on the quantity of energy that can be drained from the battery as a percentage of available capacity. For example, a value of 15% would prevent the battery from discharging below 15% of the battery's available capacity in a given time step.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> The minimum and maximum state of charge are both as a percentage of available battery capacity, which changes over time as the batteries degrade and are replaced. The available capacity in a given time step is likely to be less than the battery's nominal capacity shown on the Battery Cell and System page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum state of charge, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">A limit on the quantity of energy that can be sent to the battery as a percentage of available capacity. For example a value of 95% would prevent the battery from charging above 95% state of charge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Initial state of charge, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The state of charge of the battery at the beginning of the simulation. A value of 100% would be for a fully charged battery, 0% would be for a fully discharged battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Minimum time at charge state, min</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">There may be periods of time where the photovoltaic or other power system output varies above and below the load causing rapid cycling of the battery. Rapid cycling may also result for dispatch options that respond to power prices when prices change rapidly from time step to time step. This kind of cycling, especially if the cycles are deep, may degrade battery performance over time. The minimum time at charge state prevents the battery from changing between charging and discharging within the number of minutes that you specify.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Behind-the-meter (BTM) Storage Dispatch Options</span></h3>
<p class="p_Text"><span class="f_Text">The battery dispatch options determine when the battery charges and discharges. The charge options determine any limits on how the battery can charge or discharge.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Dispatch Options</span></h4>
<p class="p_Text"><span class="f_Text">Choose the dispatch option that most closely represents when you want the battery to charge and discharge.</span></p>
<p class="p_Note"><span class="f_CHNote">Notes.</span><span class="f_Note"> </span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">The list below provides a brief description of each option. To see a detailed description of each heading, click the appropriate grey and blue heading below to expand the detailed description.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">If you are modeling <a href="grid_outage.htm" class="topiclink">grid outages</a> to calculate resiliency metrics, during an outage the battery switches to a special dispatch mode that prioritizes meeting the load, regardless of the dispatch option you choose.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Peak shaving</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Dispatch the battery to reduce peak demand. Use this option when the electricity rate structure includes energy rates with kWh/kW units or demand charges and you want to use the battery to reduce billing demand.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Input grid power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Dispatch the battery in response to time series grid power target data you provide to ensure the power from the grid is at or below the target power levels.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Input battery power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Dispatch the battery according to time series charge and discharge power values you provide. Use this option when you know exactly how you want the battery to charge and discharge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Manual dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Dispatch the battery based on month-by-hour weekday and weekend schedules you provide. Use this option to dispatch the battery in response to time-of-use electricity rates.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Price signal forecast</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Dispatch the battery to minimize the energy and demand charge portions of the monthly electricity bill.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Charge Options</span></h4>
<p class="p_Text"><span class="f_Text">The battery charge options are limits on the dispatch options. Not all charge options are available for all dispatch options. SAM automatically disables (greys out) charge options that do not apply to the dispatch option you choose.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow power from the grid to charge the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from system</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the photovoltaic array or other power system to charge the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from clipped system power</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a photovoltaic array with DC-connected battery, allow the photovoltaic array to charge the battery when the array DC power exceeds the inverter nominal DC input power.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can discharge to grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the battery to discharge to the grid. This option is only available for the Input Grid Power Targets dispatch option.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from system only when system output exceeds load</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the photovoltaic array or other power system to charge the battery only when the system AC output is greater than &nbsp;the load.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Discharge battery only when load exceeds system output</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the battery to discharge only when the load is greater than the photovoltaic or other power system AC output.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from fuel cell</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For Fuel Cell PV Battery systems, allow the battery to charge from the fuel cell.</span></p>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A1_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A1','TOGGLE0186A1_ICON')">Peak Shaving</a></span></td></tr></table></div><div id="TOGGLE0186A1" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The peak shaving dispatch options attempt to discharge the battery during times of peak demand over a forecast period. Peak shaving dispatch considers the load, and either the available solar resource for PV systems, or the AC output for generic battery systems over the forecast period and calculates a grid power target for each time step in that period. It then charges or discharges the battery as possible given the battery's capacity and state of charge to meet the target. Use this option to reduce monthly demand charges when the rates on the <a href="electricity_rates.htm" class="topiclink">Electricity Rates</a> page include demand rates.</span></p>
<p class="p_Text"><span class="f_Text">Peak shaving discharges the battery each day to reduce that day's peak load. This results in more battery cycling than would result from a dispatch strategy that discharges the battery once a month to reduce the peak load.</span></p>
<p class="p_Text"><span class="f_Text">For a detailed description of the behind-the-meter peak shaving dispatch algorithm, see DiOrio, N. (2017). An Overview of the Automated Dispatch Controller Algorithms in SAM. NREL/TP-6A20-68614. (<a href="https://www.nrel.gov/docs/fy18osti/68614.pdf" class="weblink">PDF 770 KB</a>)</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Peak Shaving Option</span></h4>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">One day look ahead (perfect)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each day, dispatch the battery based on the solar resource over the next 24 hours and the load over the forecast horizon specified below. The look-ahead option is a perfect prediction of the load and solar resource because the battery dispatch coincides with the solar resource and load.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">One day look behind</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to the one-day look ahead option, but based on the previous 24 hours of solar resource for the prediction. The look-behind option adds some uncertainty to the dispatch because the battery dispatch coincides with solar resource for the previous day, so the battery dispatch for each day may not exactly match the solar resource.</span></p>
<p class="p_Text" style="text-align: center;"><img alt="IMG_BATT-dispatch-peak-shaving" width="294" height="237" style="margin:0 auto 0 auto;width:294px;height:237px;border:none" src="img_batt-dispatch-peak-shaving.png"/></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> SAM allows you to use a different forecast period for the solar resource and the load. Choose both a peak shaving option and a load forecast horizon option as appropriate for your analysis.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Custom forecast</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Combines one day look ahead dispatch with a different weather file than the one used for the photovoltaic system simulation. This makes the dispatch more realistic because the battery dispatch does not exactly match the the photovoltaic system output.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the custom forecast option, click </span><span class="f_CHInterfaceElement">Browse</span><span class="f_VariableDescription"> to choose the a weather file to use for battery dispatch.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Load Forecast Horizon</span></h4>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Perfect look ahead</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each day, dispatch the battery based on the load specified on the <a href="electric_load.htm" class="topiclink">Electric Load</a> page over the next 24 hours and the solar resource over the period specified above.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">One day look behind</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to perfect look ahead, but based on the previous 24 hours of load data.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Look ahead to custom load</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to perfect look ahead, but dispatches the battery based on different load data than the data on the Electric Load page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Custom load profile</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Look Ahead to Custom Load Forecast option, the load data to use for the dispatch forecast instead of the data on the Electric Load page.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to import or paste custom load data for the dispatch forecast.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Match load growth</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Look Ahead to Custom Load Forecast option, use the same load growth rate for the forecast load as the load data on the Electric Load page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enter custom growth</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Look ahead to Custom Load Forecast option, use a different load growth rate than the load data on the Electric Load page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Load forecast growth rate</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Look Ahead to Custom Load forecast option with Enter Custom Growth, the annual growth rate for the custom load profile.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A2_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A2','TOGGLE0186A2_ICON')">Input grid power targets</a></span></td></tr></table></div><div id="TOGGLE0186A2" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The input grid power target option is similar to the peak shaving option, except that it attempts to operate the battery in response to grid power targets that you specify instead of automatically calculating the targets to reduce peak demand. In each time step, SAM compares the electric load to the power target, charges the battery when the load is less than the target, and discharges when the load is greater than the target. You can specify twelve constant monthly targets or a target for each time step.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> The system may not always be able to meet the grid power targets, for example if the battery is discharged when the photovoltaic array or other power source is not generating power.</span></p>
<p class="p_Text"><span class="f_Text">Choose </span><span class="f_CHInterfaceElement">Input grid power targets</span><span class="f_Text">, and then choose either </span><span class="f_CHInterfaceElement">Monthly power targets</span><span class="f_Text"> or </span><span class="f_CHInterfaceElement">Time series power targets</span><span class="f_Text">:</span></p>
<p class="p_Text" style="text-align: center;"><img alt="ss-battery-dispatch-btm-grid-targets" width="354" height="55" style="margin:0 auto 0 auto;width:354px;height:55px;border:none" src="ss-battery-dispatch-btm-grid-targets.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Monthly power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to specify a either a single grid power target for the entire year by setting the grid power target for all months to the same value, or a different grid power target for each month.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For </span><span class="f_CHInterfaceElement">Monthly grid power targets</span><span class="f_VariableDescription">, Click </span><span class="f_CHInterfaceElement">Edit values</span><span class="f_VariableDescription"> to specify the targets. To apply a single target to the entire year, enter the target as a single value in the Edit Values window and click </span><span class="f_CHInterfaceElement">Apply</span><span class="f_VariableDescription">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Time series power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to enter a grid power target for each time step in the simulation. For </span><span class="f_CHInterfaceElement">Time series grid power targets</span><span class="f_VariableDescription">, click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to specify the targets.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A3_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A3','TOGGLE0186A3_ICON')">Input battery power targets</a></span></td></tr></table></div><div id="TOGGLE0186A3" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The input battery power targets option operates the battery in response to battery power targets you specify. In each time step, the controller attempts to charge to the negative power value you enter, or discharge to the positive power value you enter.</span></p>
<p class="p_Text"><span class="f_Text">Choose </span><span class="f_CHInterfaceElement">Input battery power</span><span class="f_Text"> targets, and then enter the battery power target data.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Time series battery power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> and import or copy and paste an array of battery power values in kW, where discharge power is positive, charge power is negative. The array must have the same number of rows as simulation time steps: For hourly simulations, 8,760 rows, for for 15-minute simulations 35,040 rows, etc.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A4_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A4','TOGGLE0186A4_ICON')">Manual dispatch</a></span></td></tr></table></div><div id="TOGGLE0186A4" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">For the manual dispatch option, you specify the timing of battery charges and discharges using up to six dispatch periods and a set of weekday and weekend hourly profiles by month under </span><span class="f_CHInterfaceElement">Manual Dispatch</span><span class="f_Text">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from system</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to be charged by power from the system, check the box in the </span><span class="f_CHInterfaceElement">Charge from system</span><span class="f_VariableDescription"> column. </span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to be charged by power from the grid, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column, and specify the percentage of the battery's state of charge that can be charged from the grid over the time step in the </span><span class="f_CHInterfaceElement">Rate</span><span class="f_VariableDescription"> column.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For example, for hourly simulations, a charge rate of 25% would allow the battery to charge from the grid at 25% of its state of charge at the beginning of the time step over the time step. The purpose of this rate is to avoid damaging the battery by charging it too quickly.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> For subhourly simulations, the charge and discharge percentages apply to the subhourly time step even though the periods are defined in hours.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a behind-the-meter application, if </span><span class="f_CHInterfaceElement">Charge from grid</span><span class="f_VariableDescription"> and </span><span class="f_CHInterfaceElement">Charge from system</span><span class="f_VariableDescription"> are both checked for a given period, and if in a time step in that period the system power is greater than the <a href="electric_load.htm" class="topiclink">load</a>, power from the grid supplements the system power to meet the battery charge requirement.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">If </span><span class="f_CHInterfaceElement">Charge from grid</span><span class="f_VariableDescription"> and one or both of the discharge options is also checked for a given period, and if in that period the battery state of charge is above the minimum state of charge, the battery discharges until it reaches the minimum state of charge, at which point it starts charging from the grid, either until it reaches the maximum state of charge, or until the time period changes to one that does not allow charging from the grid.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Discharge to load</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to discharge to the load, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column, and specify the percentage of the battery's available charge that can be discharged to the load over the time step in the </span><span class="f_CHInterfaceElement">Rate</span><span class="f_VariableDescription"> column.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For example, let's assume that Period 3 is the four consecutive hours between 3 pm and 6 pm, the discharge rate is 25%, and the minimum and maximum state of charge limits under </span><span class="f_CHInterfaceElement">Charge Limits and Priority</span><span class="f_VariableDescription"> are 30% and 96%, respectively. For an hourly simulation, that would allow up to 25% of the battery state of charge at the beginning of the 3 pm hour to be discharged over the hour. For the 4 pm hour, 25% of the charge at the end of the 3 pm hour would be available, and so on until the end of Period 3. The 25% discharge rate would result in the battery being fully discharged over the four-hour period. (A 20% value would have the same effect for a 5-hour period, i.e., if Period 3 were between 3 pm and 7 pm.)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a one-minute simulation, a discharge rate of 25% would allow up to 25% of the available charge to be dispatched </span><span class="f_Emphasis">every minute</span><span class="f_VariableDescription"> over Period 3, so a smaller percentage would be required to allow the battery to discharge over the full four-hour period.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Discharge to grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery can only discharge to the grid during time steps that it is allowed to discharge to the load. For each period that you want to allow the battery to discharge to the grid, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column. SAM uses the same discharge rate for discharges to the load and the grid.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">System power priority</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use this option to determine how to prioritize the dispatch of power from the power generating system (PV array or generic system). This option is not available with the </span><span class="f_CHInterfaceElement">Charge from system only when system output exceeds load</span><span class="f_VariableDescription"> option.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose </span><span class="f_CHInterfaceElement">Meet load</span><span class="f_VariableDescription"> to prioritize using system power to meet the load over charging the battery.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose </span><span class="f_CHInterfaceElement">Charge battery</span><span class="f_VariableDescription"> to prioritize using system power to charge the battery over meeting the load. </span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weekday and Weekend Schedules</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The weekday and weekend schedules determine the hour of day and month of year for each of the up to six dispatch periods. SAM ignores the charge and discharge options for any periods that you do not assign to the weekday or weekend schedules.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">To define the hour of day and month of year that each period applies, use your mouse to select a rectangle in the schedule matrix, and use your keyboard to type the period number (1-6). The number you type should appear in the rectangle.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">See <a href="weekday-schedule.htm" class="topiclink">Weekday Weekend Schedules</a> for a step-by-step description of how to use the schedule matrices</span>.</p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Copy Schedules from TOU/TOD Schedules</span></p>
<p class="p_VariableDescription">Use this button to copy the the weekday and weekend schedules from the energy charge time-of-use schedule on the Electricity Rates page.</p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A5_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A5','TOGGLE0186A5_ICON')">Price signal forecast</a></span></td></tr></table></div><div id="TOGGLE0186A5" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span style="font-family: Verdana,Geneva,Arial,sans-serif;">The price signal forecast option operates the battery to minimize the electricity bill based on an electricity price estimate that represents the cost to the system owner of purchasing electricity from the grid in each time step. For this option, battery dispatch depends on:</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">A rolling 24-hour forecast of system power generation and load as defined under </span><span class="f_CHInterfaceElement">Generation Forecast Horizon</span><span class="f_List">..</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Energy and demand rates (flat, time-of-use, and/or tiered)</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Battery state of charge and available capacity</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Battery degradation</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ListLast">Cost of future battery replacements</span></p><p class="p_Text"><span class="f_Text">The price signal forecast dispatch option is described in Mirletz, B.; Guittet, D. (2021). Heurestic Dispatch Based on Price Signals for Behind-the-Meter PV-Battery Systems in the System Advisor Model. NREL/CP-7A40-79575. (<a href="https://www.nrel.gov/docs/fy21osti/79575.pdf" target="_blank" class="weblink">PDF 2.2 MB</a>)</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Generation Forecast Horizon</span></h4>
<p class="p_Text"><span class="f_Text">The generation forecast horizon determines whether the battery dispatch responds to a perfect forecast of the system's output, or to a forecast that is different from the system's output over the forecast period.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Perfect look ahead</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each day, dispatch the battery based on the system's output over the next 24 hours.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">One day look behind</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to perfect look ahead, but based on the system's output over the previous 24 hours. This adds some uncertainty to the dispatch because yesterday's generation profile is likely to be different from today's.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Look ahead to custom weather file</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the PV Battery configuration, use a different weather file for the generation forecast than for simulating the system's power output. Use this option when you want the battery dispatch to be more realistic by not responding exactly to the system's output.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weather file for price signal forecast</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The weather file to use for the Look Ahead to Custom Weather File option. Click </span><span class="f_CHInterfaceElement">Browse</span><span class="f_VariableDescription"> to choose a weather file in the <a href="weather_format_sam_csv_solar.htm" class="topiclink">SAM CSV format</a>.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Load Forecast Horizon</span></h4>
<p class="p_Text"><span class="f_Text">The generation forecast horizon determines whether the battery dispatch responds to a perfect forecast of the building or facility's electric load, or to a forecast that is different from the load over the forecast period.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Perfect look ahead</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each day, dispatch the battery based on the load specified on the <a href="electric_load.htm" class="topiclink">Electric Load</a> page over the next 24 hours.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">One day look behind</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to perfect look ahead, but based on the previous 24 hours of load data.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Look ahead to custom load</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to perfect look ahead, but dispatches the battery based on different load data than the data on the Electric Load page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Custom load profile</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Look Ahead to Custom Load Forecast option, the load data to use for the dispatch forecast instead of the data on the Electric Load page.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to import or paste custom load data for the dispatch forecast.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Match load growth</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Look Ahead to Custom Load Forecast option, use the same load growth rate for the forecast load as the load data on the Electric Load page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enter custom growth</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Look ahead to Custom Load Forecast option, use a different load growth rate than the load data on the Electric Load page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Load forecast growth rate</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Look Ahead to Custom Load forecast option with Enter Custom Growth, the annual growth rate for the custom load profile.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Cycle Degradation Penalty</span></h4>
<p class="p_Text"><span class="f_Text">The cycle degradation penalty is an estimate of the cost of charge-discharge cycles that makes it possible to account for the effect of cycling the battery on the cost of battery replacements. More frequent charge-discharge cycles can result in faster degradation of the battery and more replacements over the analysis period. Increasing the cycle degradation penalty causes the price signal forecast dispatch algorithm to attempt to reduce the frequency of battery charge-discharge cycles.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> Battery degradation and replacement parameters are on the <a href="battery_life.htm" class="topiclink">Battery Life</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cycle degradation penalty method</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose a method for estimating the cost of cycling the battery: </span></p>
<p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">Choose </span><span class="f_CHInterfaceElement">Calculate automatically</span><span class="f_VariableDescription"> if you want SAM to calculate the cost.</span></p><p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">Choose </span><span class="f_CHInterfaceElement">Enter penalty</span><span class="f_VariableDescription"> to enter a cost per cycle-kWh value.</span></p><p class="p_VariableDescription"><span class="f_VariableDescription">If you choose the Calculate Automatically option, SAM reports the calculated penalty as </span><span class="f_CHInterfaceElement">Computed cycle degradation penalty</span><span class="f_VariableDescription"> in the <a href="battery_results.htm" class="topiclink">battery time series results</a>.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cycle degradation penalty</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The penalty in $/cycle-kWh of battery total capacity for cycling the battery. You can either enter a single value, or click </span><img alt="SS_AnnSched-valschedbutton" width="23" height="24" style="margin:0;width:23px;height:24px;border:none" src="ss_annsched-valschedbutton.png"/><span class="f_VariableDescription"> to enter a different penalty for each year of the analysis period as an <a href="edit_data_table_column.htm" class="topiclink">annual schedule</a>.</span></p>
</td>
</tr>
</table>
</div>

</td></tr></table>

<script type="text/javascript">
HMInitToggle('TOGGLE0186A1_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A1\',\'TOGGLE0186A1_ICON\')');
HMInitToggle('TOGGLE0186A1','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A2_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A2\',\'TOGGLE0186A2_ICON\')');
HMInitToggle('TOGGLE0186A2','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A3_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A3\',\'TOGGLE0186A3_ICON\')');
HMInitToggle('TOGGLE0186A3','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A4_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A4\',\'TOGGLE0186A4_ICON\')');
HMInitToggle('TOGGLE0186A4','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A5_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A5\',\'TOGGLE0186A5_ICON\')');
HMInitToggle('TOGGLE0186A5','hm.type','dropdown','hm.state','0');
</script>
</body>
</html>
