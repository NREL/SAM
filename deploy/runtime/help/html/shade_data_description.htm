<!DOCTYPE html>
<html>
<head>
   <title>Shade data description</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "shade_data_description.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#FFFFFF; color:#0072C6;">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1"><span class="f_Heading1">Shade data description</span></h1>

    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p class="p_Text"><span class="f_Text">The shade loss at a given time is the ratio of the shaded area of the <a href="3dshad-create.htm" class="topiclink">active surface</a> to its total area expressed as a percentage. The beam shade factor is one minus the shade loss expressed as a fraction.</span></p>
<p class="p_Text"><span class="f_Text">The shade loss represents a reduction in beam solar irradiance incident on the active surface. The shade loss algorithm does not estimate the reduction in diffuse solar irradiance due to reduction of the view factor caused by shade objects.</span></p>
<p class="p_Text"><span class="f_Text">If there is more than one active surface in the scene, you can <a href="3dshad-generate-data.htm" class="topiclink">generate</a> a diurnal table for groups of one or more surfaces, or for groups of active surfaces. You can only generate a single hourly table for the active surfaces combined into a single array -- you cannot generate multiple hourly tables.</span></p>
<p class="p_Text"><span class="f_Text">The basic shade loss algorithm is:</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_List">Calculate the sun position given the scene's latitude, longitude, and timezone</span></p><p class="p_ListNoNumber" style="text-indent: 0; padding-left: 24px; margin-left: 48px;"><span class="f_ListNoNumber" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ListNoNumber">For the diurnal table, the sun position is at the midpoint of each hour on the 14th day of each month.</span></p><p class="p_ListNoNumber" style="text-indent: 0; padding-left: 24px; margin-left: 48px;"><span class="f_ListNoNumber" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ListNoNumber">For the hourly table, the sun position is at the midpoint of each hour of the year.</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_List">Transform the 3D scene so that the view is aligned to the perspective of the sun.</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_List">Calculate coordinates of polygons representing the scene.</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="display:inline-block;width:24px;margin-left:-24px">4.</span><span class="f_List">Cull and sort the polygons in order along the vector from the scene to the sun and projected onto a 2D plane. (This step assumes parallel sun rays, so it uses a parallel projection rather than a perspective projection).</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="display:inline-block;width:24px;margin-left:-24px">5.</span><span class="f_List">For each active surface, calculate coordinates of shade polygons, which are polygons that intersect the active surface and shade object polygons. </span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="display:inline-block;width:24px;margin-left:-24px">6.</span><span class="f_List">Calculate the shade loss as the ratio of shade polygon area to the active surface area expressed as a percentage.</span></p>
</td></tr></table>

</body>
</html>
