<!DOCTYPE html>
<html>
<head>
   <title>Dispatch</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "fuelcell_dispatch.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#FFFFFF; color:#0072C6;">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1"><span class="f_Heading1">Dispatch</span></h1>

    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p class="p_Text"><span class="f_Text">The fuel cell Dispatch page provides options for defining how to operate the fuel cell stack and battery bank.</span></p>
<p class="p_Text"><span class="f_Text">The battery storage dispatch options available depend on whether the system is in front of the electric utility meter (PPA Single Owner financial model) or behind the meter (Commercial financial model).</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Fuel Cell Operation</span></h3>
<p class="p_Text"><span class="f_Text">The fuel cell operation parameters determine the fuel cell operates.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Dispatch Options</span></h4>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Fixed output</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Operate the fuel cell at a fixed percentage of the fuel cell rated capacity at all times.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Fixed output percentage</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the fixed output option, specify the percentage of the fuel cell rated capacity from the <a href="fuelcell_fuel_cell.htm" class="topiclink">Fuel Cell</a> page. This input is disabled unless you choose the </span><span class="f_CHInterfaceElement">Fixed output</span><span class="f_VariableDescription"> dispatch option.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Follow electric load</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Operate the fuel cell to follow the electric load defined on the <a href="electric_load.htm" class="topiclink">Electric Load</a> page.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> This option does not apply to the front of meter configuration (PPA single owner financial model).</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Manual dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Operate the fuel cell according to the </span><span class="f_CHInterfaceElement">Manual Dispatch Model</span><span class="f_VariableDescription"> parameters and schedules.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Input dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Operate the fuel cell according to a time series dispatch profile that you provide.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Input dispatch schedule</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription"> For the input dispatch option, click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to provide a time series array of either kW or percentage values at which to operate the fuel cell in each simulation time step.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Operation Options</span></h4>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Allowed to shut down</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the fuel cell to shut down completely when it is not not needed to meet dispatch requirements.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Idle at minimum power</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Run the fuel cell at the minimum unit output from the <a href="fuelcell_fuel_cell.htm" class="topiclink">Fuel Cell</a> page when it is not needed to meet dispatch requirements.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Storage Battery Dispatch (Behind Meter)</span></h3>
<p class="p_Text"><span class="f_Text">The battery dispatch options determine when the battery charges and discharges. The charge options determine any limits on how the battery can charge or discharge.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Dispatch Options</span></h4>
<p class="p_Text"><span class="f_Text">Choose the dispatch option that most closely represents when you want the battery to charge and discharge.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> Click the dispatch name below to see a detailed description for each dispatch option.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Peak shaving</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Automatically dispatch the battery to reduce peak demand for demand charge reduction when the electricity rate includes demand rates.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Input grid power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Dispatch the battery in response to time series grid power target data you provide to ensure the system delivers power to the grid at the target power levels.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Input battery power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Dispatch the battery according to time series charge and discharge power values you provide. Use this option when you know exactly how you want the battery to charge and discharge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Manual dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Dispatch the battery based on month-by-hour weekday and weekend schedules you provide. Use this option to dispatch the battery in response to time-of-use electricity rates.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Price signal forecast</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Dispatch the battery in response to time series retail power price data you provide.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Charge Options</span></h4>
<p class="p_Text"><span class="f_Text">The charge options are limits on the dispatch options. Not all charge options are available for all dispatch options.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow power from the grid to charge the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from system</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the photovoltaic array or other power system to charge the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from clipped system power</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a photovoltaic array with DC-connected battery, allow the photovoltaic array to charge the battery when the array DC power exceeds the inverter nominal DC input power.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can discharge to grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the battery to discharge to the grid.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from system only when system output exceeds load</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the photovoltaic array or other power system to charge the battery only when the system AC output is greater than &nbsp;the load.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Discharge battery only when load exceeds system output</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the battery to discharge only when the load is greater than the photovoltaic or other power system AC output.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from fuel cell</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For Fuel Cell - PV - Battery systems, allow the battery to charge from the fuel cell.</span></p>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A1_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A1','TOGGLE0186A1_ICON')">Peak Shaving</a></span></td></tr></table></div><div id="TOGGLE0186A1" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The peak shaving dispatch options attempt to discharge the battery during times of peak demand over a forecast period. Peak shaving considers the load, and either the available solar resource for PV systems, or the AC output for generic battery systems, over the forecast period. Use this option to reduce monthly demand charges when the rates on the <a href="electricity_rates.htm" class="topiclink">Electricity Rates</a> page include demand rates.</span></p>
<p class="p_Text"><span class="f_Text">Peak shaving discharges the battery each day to reduce that day's peak load. This results in more battery cycling than would result from a dispatch strategy that discharges the battery once a month to reduce the peak load.</span></p>
<p class="p_Text"><span class="f_Text">For a detailed description of the behind-the-meter peak shaving dispatch algorithm, see DiOrio, N. (2017). An Overview of the Automated Dispatch Controller Algorithms in SAM. NREL/TP-6A20-68614. (<a href="https://www.nrel.gov/docs/fy18osti/68614.pdf" class="weblink">PDF 770 KB</a>)</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Peak Shaving Option</span></h4>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">One day look ahead (perfect)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each day, dispatch the battery based on the solar resource over the next 24 hours and the load over the forecast horizon specified below. The look-ahead option is a perfect prediction of the load and solar resource because the battery dispatch coincides with the solar resource and load.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">One day look behind</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to the one-day look ahead option, but based on the previous 24 hours of solar resource for the prediction. The look-behind option adds some uncertainty to the dispatch because the battery dispatch coincides with solar resource for the previous day.</span></p>
<p class="p_Text" style="text-align: center;"><img alt="IMG_BATT-dispatch-peak-shaving" width="294" height="237" style="margin:0 auto 0 auto;width:294px;height:237px;border:none" src="img_batt-dispatch-peak-shaving.png"/></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> SAM allows you to use a different forecast period for the solar resource and the load. Choose both a peak shaving option and a load forecast horizon option as appropriate for your analysis.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Custom forecast</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Combines one day look ahead dispatch with a different weather file than the one used for the photovoltaic system simulation. This makes the dispatch more realistic because the battery dispatch does not exactly match the the photovoltaic system output.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the custom forecast option, click </span><span class="f_CHInterfaceElement">Browse</span><span class="f_VariableDescription"> to choose the a weather file to use for battery dispatch.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Load Forecast Horizon</span></h4>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Perfect look ahead</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each day, dispatch the battery based on the load specified on the <a href="electric_load.htm" class="topiclink">Electric Load</a> page over the next 24 hours and the solar resource over the period specified above.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">One day look behind</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to perfect look ahead, but based on the previous 24 hours of load data.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Look ahead to custom load</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Combines the perfect look ahead load forecast horizon with different load data than the data on the Electric Load page. Click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to import or paste load data for the dispatch forecast, and choose options for modeling load growth: Either match the load growth rate on the Electric load page or use a different growth rate for the forecast.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A2_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A2','TOGGLE0186A2_ICON')">Input grid power targets</a></span></td></tr></table></div><div id="TOGGLE0186A2" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The input grid power target option attempts to operate the battery in response to grid power targets that you specify. In each time step, SAM compares the electric load to the power target, charges the battery when the load is less than the target, and discharges when the load is greater than the target. You can specify a constant annual target, twelve constant monthly targets, or a target for each time step.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> The system may not always be able to meet the grid power targets, for example if the battery is discharged when the photovoltaic array or other power source is not generating power.</span></p>
<p class="p_Text"><span class="f_Text">Choose </span><span class="f_CHInterfaceElement">Input grid power targets</span><span class="f_Text">, and then choose either </span><span class="f_CHInterfaceElement">Monthly power targets</span><span class="f_Text"> or </span><span class="f_CHInterfaceElement">Time series power targets</span><span class="f_Text">:</span></p>
<p class="p_Text" style="text-align: center;"><img alt="ss-battery-dispatch-btm-grid-targets" width="354" height="55" style="margin:0 auto 0 auto;width:354px;height:55px;border:none" src="ss-battery-dispatch-btm-grid-targets.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Monthly power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to specify a either a single grid power target for the entire year, or a grid power target for each month. For </span><span class="f_CHInterfaceElement">Monthly grid power targets</span><span class="f_VariableDescription">, Click </span><span class="f_CHInterfaceElement">Edit values</span><span class="f_VariableDescription"> to specify the targets. To apply a single target to the entire year, enter the target as a single value in the Edit Values window and click </span><span class="f_CHInterfaceElement">Apply</span><span class="f_VariableDescription">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Time series power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to enter a grid power target for each time step in the simulation. For </span><span class="f_CHInterfaceElement">Time series grid power targets</span><span class="f_VariableDescription">, click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to specify the targets.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A3_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A3','TOGGLE0186A3_ICON')">Input battery power targets</a></span></td></tr></table></div><div id="TOGGLE0186A3" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The input battery power targets option operates the battery in response to battery power targets you specify. In each time step, the controller attempts to charge to the negative power value you enter, or discharge to the positive power value you enter.</span></p>
<p class="p_Text"><span class="f_Text">Choose </span><span class="f_CHInterfaceElement">Input battery power</span><span class="f_Text"> targets, and then enter the battery power target data.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Time series battery power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> and import or copy and paste an array of battery power values in kW, where discharge power is positive, charge power is negative. The array must have the same number of rows as simulation time steps: For hourly simulations, 8,760 rows, for for 15-minute simulations 35,040 rows, etc.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A4_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A4','TOGGLE0186A4_ICON')">Manual dispatch</a></span></td></tr></table></div><div id="TOGGLE0186A4" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">For the manual dispatch option, you specify the timing of battery charges and discharges using up to six dispatch periods and a set of weekday and weekend hourly profiles by month under </span><span class="f_CHInterfaceElement">Manual Dispatch</span><span class="f_Text">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from system</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to be charged by power from the system, check the box in the </span><span class="f_CHInterfaceElement">Charge from system</span><span class="f_VariableDescription"> column. </span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to be charged by power from the grid, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column, and specify the percentage of the battery's state of charge that can be charged from the grid over the time step in the </span><span class="f_CHInterfaceElement">Rate</span><span class="f_VariableDescription"> column.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For example, for hourly simulations, a charge rate of 25% would allow the battery to charge from the grid at 25% of its state of charge at the beginning of the time step over the time step. The purpose of this rate is to avoid damaging the battery by charging it too quickly.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> For subhourly simulations, the charge and discharge percentages apply to the subhourly time step even though the periods are defined in hours.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a behind-the-meter application, if </span><span class="f_CHInterfaceElement">Charge from grid</span><span class="f_VariableDescription"> and </span><span class="f_CHInterfaceElement">Charge from system</span><span class="f_VariableDescription"> are both checked for a given period, and if in a time step in that period the system power is greater than the <a href="electric_load.htm" class="topiclink">load</a>, power from the grid will supplement the system power to meet the battery charge requirement.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">If </span><span class="f_CHInterfaceElement">Charge from grid</span><span class="f_VariableDescription"> and one or both of the discharge options is also checked for a given period, and if in that period the battery state of charge is above the minimum state of charge, the battery discharges until it reaches the minimum state of charge, at which point it starts charging from the grid, either until it reaches the maximum state of charge, or until the time period changes to one that does not allow charging from the grid.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Discharge to load</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to discharge to the load, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column, and specify the percentage of the battery's available charge that can be dispatched over the time step in the </span><span class="f_CHInterfaceElement">Rate</span><span class="f_VariableDescription"> column. The available charge is defined by the minimum and maximum state of charge values under </span><span class="f_CHInterfaceElement">Charge Limits and Priority</span><span class="f_VariableDescription">.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For example, if Period 3 is the four consecutive hours between 3 pm and 6 pm, the discharge rate is 25%, and the charge limits are 30% and 96%, for an hourly simulation, that would allow up to 25% of the battery state of charge at the beginning of the 3 pm hour to be discharged over the hour. For the 4 pm hour, 25% of the charge at the end of the 3 pm hour would be available, and so on until the end of Period 3. The 25% value would discharge the battery over the full four-hour period. (A 20% value would have the same effect for a 5-hour period, i.e., if Period 3 were between 3 pm and 7 pm.)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a one-minute simulation, a discharge rate of 25% would allow up to 25% of the available charge to be dispatched </span><span class="f_Emphasis">every minute</span><span class="f_VariableDescription"> over Period 3, so a smaller percentage would be required to allow the battery to discharge over the full four-hour period.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Discharge to grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery can only discharge to the grid during time steps that it is allowed to discharge to the load. For each period that you want to allow the battery to discharge to the grid, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column. SAM uses the same discharge rate for discharges to the load and the grid.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weekday and Weekend Schedules</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">To define the hour of day and month of year that each period applies, use your mouse to select a rectangle in the schedule matrix, and use your keyboard to type the period number (1-6). The number you type should appear in the rectangle.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">See <a href="weekday-schedule.htm" class="topiclink">Weekday-weekend Schedules</a> for a step-by-step description of how to use the schedule matrices</span>.</p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Copy Schedules from TOU/TOD Schedules</span></p>
<p class="p_VariableDescription">Use this button to copy the the weekday and weekend schedules from the energy charge time-of-use (TOU) schedule on the Electricity Rates page for behind-the-meter (BTM) systems, or from the time-of-delivery (TOD) schedules on the Time of Delivery or Revenue page for front-of-meter (FOM) systems.</p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A5_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A5','TOGGLE0186A5_ICON')">Price signal forecast</a></span></td></tr></table></div><div id="TOGGLE0186A5" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span style="font-family: Verdana,Geneva,Arial,sans-serif;">The price signal forecast option operates the battery to minimize the electricity bill based on an electricity price estimate that represents the cost to the system owner of purchasing electricity from the grid in each time step. For this option, battery dispatch depends on:</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">A rolling 24-hour look-ahead forecast of system power generation and load. This is a perfect forecast because the algorithm uses system output and load data from the simulation results for the forecast, so the resulting battery dispatch coincides with the generation and load profiles.</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Energy and demand rates (flat, time-of-use, and/or tiered)</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Battery state of charge and available capacity</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Battery degradation</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ListLast">Cost of future battery replacements</span></p><p class="p_Text"><span class="f_Text">The price signal forecast dispatch option is described in Mirletz, B.; Guittet, D. (2021). Heurestic Dispatch Based on Price Signals for Behind-the-Meter PV-Battery Systems in the System Advisor Model. NREL/CP-7A40-79575. (<a href="https://www.nrel.gov/docs/fy21osti/79575.pdf" target="_blank" class="weblink">PDF 2.2 MB</a>)</span></p>
<p class="p_Text"><span class="f_Text">Use the </span><span class="f_CHInterfaceElement">Charge Options</span><span class="f_Text"> to specify whether the battery is allowed to charge from power from the generation system in excess of the load, the grid, or both.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cycle degradation penalty method</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the price signal forecast option, choose a method for estimating the cost of cycling the battery: Choose </span><span class="f_CHInterfaceElement">Calculate automatically</span><span class="f_VariableDescription"> if you want SAM to calculate the cost, or choose </span><span class="f_CHInterfaceElement">Enter penalty</span><span class="f_VariableDescription"> to enter a cost per cycle-kWh value.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">If you choose the &quot;calculate automatically&quot; option, SAM reports the calculated penalty as </span><span class="f_CHInterfaceElement">Computed cycle degradation penalty</span><span class="f_VariableDescription"> in the <a href="battery_results.htm" class="topiclink">battery time series results</a>.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cycle degradation penalty</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The penalty in $/cycle-kWh of battery total capacity for cycling the battery. You can either enter a single value, or click the blue &quot;val/sched&quot; button to enter a different penalty for each year of the analysis period.</span></p>
</td>
</tr>
</table>
</div>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Storage Battery Dispatch (Front of Meter)</span></h3>
<p class="p_Text"><span class="f_Text">The battery dispatch options determine when the battery charges and discharges. The charge options determine any limits on how the battery can charge or discharge.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Dispatch Options</span></h4>
<p class="p_Text"><span class="f_Text">Choose the dispatch option that most closely represents when you want the battery to charge and discharge.</span></p>
<p class="p_Text"><span class="f_Text">Choose the automated dispatch model that most closely represents how you would like the battery to be charged and discharged, or choose the manual dispatch option to specify the timings manually.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Automated dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Automated dispatch dispatches the battery to maximize revenue from power sales.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">PV smoothing</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">PV smoothing dispatches the battery for photovoltaic-battery systems to limit power ramp rates at the grid interconnection point.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Dispatch to custom time series</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Dispatch the battery according to time series charge and discharge power values you provide. Use this option when you know exactly how you want the battery to charge and discharge</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Manual dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">No automation. You specify the timing of battery charges and discharges using up to six dispatch periods and a set of weekday and weekend hourly profiles by month.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Charge Options</span></h4>
<p class="p_Text"><span class="f_Text">For non-manual dispatch options, choose the source of power for charging the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the grid to charge the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from system</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Allow the system to charge the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery can charge from clipped system power</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Available for any of the three automated dispatch options for a PV system with DC-connected batteries only. This option will use any DC array power in excess of the inverter's nominal DC input power to charge the battery.</span></p>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A6_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A6','TOGGLE0186A6_ICON')">Automated Dispatch</a></span></td></tr></table></div><div id="TOGGLE0186A6" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">SAM's front-of-meter automated dispatch algorithms are described in DiOrio, N.; Denholm, P.; Hobbs, W. (2020). <a href="https://doi.org/10.1016/j.apenergy.2019.114465" target="_blank" class="weblink">A Model for Evaluating the Configuration and Dispatch of PV Plus Battery Power Plants</a>. Applied Energy Vol 262 March 2020.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> The automated dispatch options use power price information from the Revenue or Financial Parameters pages. If you are modeling a system that responds to hourly or subhourly power prices instead of the month by hour weekday and weekend schedules, you can use the TOD factors by time step option to enter price data. (Set the PPA price to $1/kWh if you want to use $/kWh price data instead of multipliers.) The merchant plant financial model may not work well with battery storage systems because of the cleared capacity requirement.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Perfect look ahead</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each day, dispatch the battery based on the available power from the photovoltaic or other power source and time-of-delivery (TOD) power price multipliers (on the Revenue or Financial Parameters page) to maximize revenue. The look-ahead option is a perfect prediction of available power and prices because the battery dispatch coincides with the actual power production.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">One day look behind</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to perfect look ahead, but based on the available power and TOD multipliers in the previous 24 hours.The look-behind option adds some uncertainty to the dispatch because the battery dispatch coincides with solar resource for the previous day. The following illustration is for behind-the-meter storage with an electric load, but the concept is the same for a front-of-meter battery.</span></p>
<p class="p_Text" style="text-align: center;"><img alt="IMG_BATT-dispatch-peak-shaving" width="294" height="237" style="margin:0 auto 0 auto;width:294px;height:237px;border:none" src="img_batt-dispatch-peak-shaving.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Look ahead to custom weather file</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Similar to the look ahead automated dispatch option, except, for the PV-battery configuration, use a different weather file for the forecast of available power.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Frequency to update dispatch</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For any of the three automated dispatch options, determines how often a new dispatch decision is made.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Look-ahead period</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the automated look ahead and automated custom weather file option, the number of hours ahead of the current time step to use for the dispatch decision in the current time step.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Cycle degradation penalty option</span></h4>
<p class="p_Text"><span class="f_Text">For any of the automated dispatch options, choose a method for estimating the cost of cycling the battery: Choose </span><span class="f_CHInterfaceElement">Calculate automatically</span><span class="f_Text"> if you want SAM to calculate the cost, or choose </span><span class="f_CHInterfaceElement">Enter penalty</span><span class="f_Text"> to enter a cost per cycle-kWh value.</span></p>
<p class="p_Text"><span class="f_Text">If you choose the &quot;calculate automatically&quot; option, SAM reports the calculated penalty as </span><span class="f_CHInterfaceElement">Computed cycle degradation penalty</span><span class="f_Text"> in the <a href="battery_results.htm" class="topiclink">battery time series results</a>.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cycle degradation penalty</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">When you choose the &quot;enter penalty&quot; option for the cycle degradation penalty option, this is the penalty in $/cycle-kWh of battery total capacity for cycling the battery. You can either enter a single value, or click the </span><img alt="SS_AnnSched-valschedbutton" width="23" height="24" style="margin:0;width:23px;height:24px;border:none" src="ss_annsched-valschedbutton.png"/> <span class="f_VariableDescription">button to enter a different penalty for each year of the analysis period.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Custom Weather File for Forecast</span></h4>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the automated dispatch custom weather file option, click </span><span class="f_CHInterfaceElement">Browse</span><span class="f_VariableDescription"> to choose a weather file in the SAM CSV format to use for the solar resource forecast that is different from the file used for the simulation.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A7_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A7','TOGGLE0186A7_ICON')">PV Smoothing</a></span></td></tr></table></div><div id="TOGGLE0186A7" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The PV smoothing algorithm dispatches the battery to reduce rapid fluctuations in a photovoltaic-battery system's output that can occur on partly cloudy days.</span></p>
<p class="p_Note"><span class="f_CHNote">Notes.</span><span class="f_Note"> </span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">The PV smoothing algorithms requires a simulation time step of 15 minutes or smaller. For SAM's photovoltaic models, the simulation time step is determined by the temporal resolution of the weather file. You can download 15-minute and 5-minute weather data from the NREL National Solar Radiation Database by choosing the </span><span class="f_CHInterfaceElement">Advanced download</span><span class="f_Note"> option on the <a href="pv_location_and_resource.htm" class="topiclink">Location and Resource</a> page, or you can convert data from an hourly weather file to subhourly time steps using the &quot;Solar Resource Interpolation&quot; <a href="macros.htm" class="topiclink">macro</a>.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">When you choose the PV smoothing dispatch option, be sure to check the charge options to allow the battery to charge from the system, grid or both.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">Simulations with PV smoothing can take several minutes to run, depending on your computer and the weather file time step.</span></p>
<p class="p_Text"><span class="f_Text">After running a simulation, you can find results of the PV smoothing algorithm on the Results page Data Tables, Time Series, and other tabs by searching for &quot;pv smoothing.&quot; The relevant results all start with </span><span class="f_CHInterfaceElement">PV smoothing...</span><span class="f_Text">.</span></p>
<p class="p_Text"><span class="f_Text">For more information about the algorithm, see:</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">For an introduction to the PV Smoothing algorithm, see the &quot;Battery Updates for Fall 2021&quot; webinar recording available on the SAM website at <a href="https://sam.nrel.gov/battery-storage/battery-videos.html" target="_blank" class="weblink" title="https://sam.nrel.gov/battery-storage/battery-videos.html">https://sam.nrel.gov/battery-storage/battery-videos.html</a>. </span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">The model is based on the EPRI open source project PV Ramp Rate Smoothing available on GitHub.com at <a href="https://github.com/epri-dev/PV-Ramp-Rate-Smoothing" target="_blank" class="weblink" title="https://github.com/epri-dev/PV-Ramp-Rate-Smoothing">https://github.com/epri-dev/PV-Ramp-Rate-Smoothing</a>.</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ListLast">A description of the model will be available in the forthcoming publication Fregosi, D.; Bolen, M.; Hobbs, W. (Forthcoming) &quot;An analysis of storage requirements and benefits of short-term forecasting for PV ramp rate mitigation:&quot;</span></p><p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weather file time stamp, minutes</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The temporal resolution of the currently selected weather file on the Location and Resource page. The PV smoothing algorithm requires a weather file with a time step of 15 minutes or smaller.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Ramp timestep multiplier</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The ramp interval is a multiple of the simulation time step determined by the ramp timestep multiplier. For example, if the simulation time step is 5 minutes, for a ramp interval of 15 minutes, you would enter a ramp timestep multiplier value of 3.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Ramp interval, minutes</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The interval used to calculate the ramp rate. The ramp rate is a change in power from one interval to the next.</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">Ramp Interval (minutes) = Weather File Times Step (minutes)  Ramp Timestep Multiplier</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum ramp rate, % of nameplate per ramp interval</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The maximum change in power allowed from one ramp interval to the next as a percentage of the </span><span class="f_CHInterfaceElement">Nameplate for PV smoothing</span><span class="f_VariableDescription">, or the interconnection limit from the <a href="grid_limits.htm" class="topiclink">Grid</a> page, whichever is less. </span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> SAM uses the interconnection limit value to calculate the PV smoothing maximum ramp rate even when the interconnection limit on the Grid page is disabled. If you do not want the interconnection limit to affect PV smoothing, enable it and set it to a value much higher than the PV array nameplate capacity, and then disable it.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery resting SOC, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery resting state of charge as a percent of its nameplate capacity.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery energy, kWhac</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery's nominal capacity expressed in AC kilowatt-hours, from the <a href="battery_storage_fom.htm" class="topiclink">Battery Cell and System</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery power, kWac</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery's nominal maximum discharge rate expressed in AC kilowatt-hours, from the <a href="battery_storage_fom.htm" class="topiclink">Battery Cell and System</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery round trip efficiency, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">An estimate of the battery's nominal round-trip efficiency, calculated from Power Converters parameters on the <a href="battery_storage_fom.htm" class="topiclink">Battery Cell and System</a> page. Note that SAM calculates the battery's actual round-trip efficiency during simulations and reports it in the <a href="summary.htm" class="topiclink">Summary tab</a> of the Results page.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a DC-connected battery:</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">Battery Round Trip Efficiency (%) = ( DC to DC Conversion Efficiency (%)  Inverter Efficiency Cutoff (%) )  100%</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For an AC-connected battery:</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">Battery Round Trip Efficiency (%) = ( AC to DC Conversion Efficiency (%)  DC to AC Conversion Efficiency (%) )  100%</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Nameplate for PV smoothing, kWac</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The PV array's nameplate capacity in AC kilowatts, from the <a href="pv_system_design.htm" class="topiclink">System Design</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Interconnection limit, kWac</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The grid interconnection limit from the <a href="grid_limits.htm" class="topiclink">Grid</a> page. Used to calculate the maximum ramp rate. See description above.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enable AC upper bound</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">This constraint prevents the output power after PV smoothing from exceeding the AC upper bound that you specify.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">AC upper bound, fraction of nameplate</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">When you enable AC upper bound, the system's output is limited to this fraction of </span><span class="f_CHInterfaceElement">Nameplate for PV smoothing</span><span class="f_VariableDescription">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enable AC lower bound</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">This constraint prevents the system's output power after PV smoothing from falling below the AC lower bound that you specify.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">AC lower bound, fraction of nameplate</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">When you enable AC lower bound, the system's output is </span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Correct up-ramp violations</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use PV smoothing to correct ramp violations when power increases from one interval to the next.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Curtail violations</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Curtail up-ramp violations rather than sending excess power to the grid.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enable short-term power forecast</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Consider future power output in battery dispatch decision.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Forecasting window, periods of ramp rate intervals</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The forecast period when you enable short-term power forecasts.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Perfect look ahead</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use the system output in the forecast period for the power forecast.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Look ahead to custom weather file</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Base the power forecast on a different weather file than the simulation weather file from the <a href="pv_location_and_resource.htm" class="topiclink">Location and Resource</a> page. Click </span><span class="f_CHInterfaceElement">Browse</span><span class="f_VariableDescription"> to choose a weather file in the SAM CSV format for the forecast. The weather file should have the same time step as the simulation weather file.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Multipliers</span></h4>
<p class="p_Text"><span class="f_Text">The multipliers are error terms for a PI (proportional plus integral) controller.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Track PV power multiplier (kp)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Determine how aggressively to PV power. Default is 1.2.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Return to rest SOC multiplier (ki)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Determine how aggressively to return the battery to its resting state of charge. Default is 1.8.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Forecast accumulation error multiplier (kf)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Applies to the difference between the power and forecast power for the ramp rate adjustment. Default is 0.3.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Reset to defaults</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Resets the three multipliers kp, ki, and kf to their default values.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A8_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A8','TOGGLE0186A8_ICON')">Dispatch to Custom Time Series</a></span></td></tr></table></div><div id="TOGGLE0186A8" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">For the dispatch to custom time series option, provide a time series of battery power values. SAM attempts to charge and discharge the battery to meet the battery power target values.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Time series battery power targets</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to enter time series battery power values. A negative power value for a time step indicates the battery controller should attempt to charge the battery at the given rate in that time step. A positive power value indicates the battery should discharge.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; border-color: #0072c6; border-style: solid; border-width: thin; background: #ebebeb; padding: 2px 2px 2px 2px; margin: 3px 0 3px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:19px"><img id="TOGGLE0186A9_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="16" height="16" style="margin:0;width:16px;height:16px;border:none" src="ico-minus-16x16.png"/></td><td style="border:none;padding:0"><span class="f_Heading2_atoc_"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #0072c6; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A9','TOGGLE0186A9_ICON')">Manual Dispatch</a></span></td></tr></table></div><div id="TOGGLE0186A9" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">For the manual dispatch option, you specify the timing of battery charges and discharges using up to six dispatch periods and a set of weekday and weekend hourly profiles by month under </span><span class="f_CHInterfaceElement">Manual Dispatch</span><span class="f_Text">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from system</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to be charged by power from the system, check the box in the </span><span class="f_CHInterfaceElement">Charge from system</span><span class="f_VariableDescription"> column. </span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge from grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to be charged by power from the grid, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column, and specify the percentage of the battery's state of charge that can be charged from the grid over the time step in the </span><span class="f_CHInterfaceElement">Rate</span><span class="f_VariableDescription"> column.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For example, for hourly simulations, a charge rate of 25% would allow the battery to charge from the grid at 25% of its state of charge at the beginning of the time step over the time step. The purpose of this rate is to avoid damaging the battery by charging it too quickly.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> For subhourly simulations, the charge and discharge rates apply to the subhourly time step even though the periods are defined in hours.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a behind-the-meter application, if </span><span class="f_CHInterfaceElement">Charge from grid</span><span class="f_VariableDescription"> and </span><span class="f_CHInterfaceElement">Charge from system</span><span class="f_VariableDescription"> are both checked for a given period, and if in a time step in that period the system power is greater than the <a href="electric_load.htm" class="topiclink">load</a>, power from the grid will supplement the system power to meet the battery charge requirement.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">If </span><span class="f_CHInterfaceElement">Charge from grid</span><span class="f_VariableDescription"> and the discharge option is also checked for a given period, and if in that period the battery state of charge is above the minimum state of charge, the battery discharges until it reaches the minimum state of charge, at which point it starts charging from the grid, either until it reaches the maximum state of charge, or until the time period changes to one that does not allow charging from the grid.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Discharge to grid</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For each period that you want to allow the battery to discharge to the grid, check the box in the </span><span class="f_CHInterfaceElement">Allow</span><span class="f_VariableDescription"> column, and specify the percentage of the battery's state of charge that can be discharged to the grid over the time step in the </span><span class="f_CHInterfaceElement">Rate</span><span class="f_VariableDescription"> column.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For example, if Period 3 is the four consecutive hours between 3 pm and 6 pm, the discharge rate is 25%, and the charge limits are 30% and 96%, for an hourly simulation, that would allow up to 25% of the battery state of charge at the beginning of the 3 pm hour to be discharged over the hour. For the 4 pm hour, 25% of the charge at the end of the 3 pm hour would be available, and so on until the end of Period 3. The 25% value would discharge the battery over the full four-hour period. (A 20% value would have the same effect for a 5-hour period, i.e., if Period 3 were between 3 pm and 7 pm.)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a one-minute simulation, a discharge rate of 25% would allow up to 25% of the available charge to be dispatched </span><span class="f_Emphasis">every minute</span><span class="f_VariableDescription"> over Period 3, so a smaller percentage would be required to allow the battery to discharge over the full four-hour period.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weekday and Weekend Schedules</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">To define the hour of day and month of year that each period applies, use your mouse to select a rectangle in the schedule matrix, and use your keyboard to type the period number (1-6). The number you type should appear in the rectangle.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">See <a href="weekday-schedule.htm" class="topiclink">Weekday-weekend Schedules</a> for a step-by-step description of how to use the schedule matrices</span>.</p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Copy Schedules from TOU/TOD Schedules</span></p>
<p class="p_VariableDescription">Use this button to copy the the weekday and weekend schedules from the energy charge time-of-use (TOU) schedule on the Electricity Rates page for behind-the-meter (BTM) systems, or from the time-of-delivery (TOD) schedules on the Time of Delivery or Revenue page for front-of-meter (FOM) systems.</p>
</td>
</tr>
</table>
</div>

</td></tr></table>

<script type="text/javascript">
HMInitToggle('TOGGLE0186A1_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A1\',\'TOGGLE0186A1_ICON\')');
HMInitToggle('TOGGLE0186A1','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A2_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A2\',\'TOGGLE0186A2_ICON\')');
HMInitToggle('TOGGLE0186A2','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A3_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A3\',\'TOGGLE0186A3_ICON\')');
HMInitToggle('TOGGLE0186A3','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A4_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A4\',\'TOGGLE0186A4_ICON\')');
HMInitToggle('TOGGLE0186A4','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A5_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A5\',\'TOGGLE0186A5_ICON\')');
HMInitToggle('TOGGLE0186A5','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A6_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A6\',\'TOGGLE0186A6_ICON\')');
HMInitToggle('TOGGLE0186A6','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A7_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A7\',\'TOGGLE0186A7_ICON\')');
HMInitToggle('TOGGLE0186A7','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A8_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A8\',\'TOGGLE0186A8_ICON\')');
HMInitToggle('TOGGLE0186A8','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A9_ICON','hm.type','dropdown','hm.state','0','hm.src0','ico-plus-16x16.png','hm.src1','ico-minus-16x16.png','onclick','HMToggle(\'toggle\',\'TOGGLE0186A9\',\'TOGGLE0186A9_ICON\')');
HMInitToggle('TOGGLE0186A9','hm.type','dropdown','hm.state','0');
</script>
</body>
</html>
