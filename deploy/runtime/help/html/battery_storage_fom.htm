<!DOCTYPE html>
<html>
<head>
   <title>Battery Storage: Front of Meter</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "battery_storage_fom.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#FFFFFF; color:#0072C6;">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1"><span class="f_Heading1">Battery Storage: Front of Meter</span></h1>

    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p class="p_Text"><span class="f_Text">The front-of-meter (FOM) battery model assumes that the battery is used to maximize revenue for a power generation project. The battery in a PV-battery front-of-meter application may be connected either to the AC or DC side of the inverter as shown in Figures 1 and 2.</span></p>
<p class="p_Text" style="text-align: center;"><img alt="IMG_Batt-PV-DC-FOM" width="406" height="137" style="margin:0 auto 0 auto;width:406px;height:137px;border:none" src="img_batt-pv-dc-fom.png"/></p>
<p class="p_TitleFigure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleFigure">Figure 1: PV-battery DC-connected Front-of-meter</span></p>
<p class="p_Text" style="text-align: center;"><img alt="IMG_Batt-PV-AC-FOM" width="354" height="152" style="margin:0 auto 0 auto;width:354px;height:152px;border:none" src="img_batt-pv-ac-fom.png"/></p>
<p class="p_TitleFigure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleFigure">Figure 2: PV-battery AC-connected Front-of-meter</span></p>
<p class="p_Text"><span class="f_Text">The battery in a generic front-of-meter application is connected to the AC side of the system as shown in Figure 3.</span></p>
<p class="p_TitleFigure" style="page-break-inside: avoid; page-break-after: avoid;"><img alt="IMG_Batt_Generic-AC_FOM" width="266" height="161" style="margin:0 auto 0 auto;width:266px;height:161px;border:none" src="img_batt_generic-ac_fom.png"/></p>
<p class="p_TitleFigure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleFigure">Figure 3: Generic-battery AC-connected Front-of-meter</span></p>
<h1 class="p_Heading1"><span class="f_Heading1">Battery Cell and System</span></h1>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Chemistry</span></h3>
<p class="p_Text"><span class="f_Text">The battery type defines the battery chemistry for (lithium ion, lead acid, or flow battery), and the type of battery for each chemistry. When you choose a battery type, SAM automatically changes the battery property input variables to default values for that type. These default values were drawn from DiOrio (2015) &quot;</span><span class="f_List">Technoeconomic Modeling of Battery Energy Storage in SAM&quot;</span><span class="f_Text"> cited above, which also includes more details on how SAM calculates battery capacity.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Battery type</span></p>
<p class="p_VariableDescription">Choose the battery chemistry and battery type for the batteries in your system.</p>
<p class="p_VariableDescription">When you choose a battery type, SAM replaces the values of <span class="f_CHInterfaceElement">Voltage Properties</span> and <span class="f_CHInterfaceElement">Current and Capacity</span> input variables as appropriate with values for each battery type.</p>
<p class="p_VariableDescription">When you choose a custom battery type for either the lead acid or lithium ion chemistry, SAM does not replace the input variable values.</p>
<p class="p_Note"><span class="f_CHNote">Notes.</span> <br />
&nbsp;<br />
To model a battery type not included in the list, choose either <span class="f_CHInterfaceElement">Lead Acid: Custom</span> or <span class="f_CHInterfaceElement">Lithium Ion: Custom</span>, and specify your voltage, current, and capacity properties appropriate for the battery.<br />
&nbsp;<br />
When you choose the custom lead acid battery type, SAM retains the capacity and discharge rate values from the table below from the previous state. For example, if you change the battery type from flooded lead acid to custom lead acid, SAM will apply the capacity/discharge rate table for flooded batteries to your custom battery.</p>
<h4 class="p_Heading4"><span class="f_Heading4">Lead Acid</span></h4>
<p class="p_VariableDescription"><span class="f_VariableDescription">The three lead acid battery types use the lead acid battery capacity model described in DiOrio (2015), cited above:</span></p>
<p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">Flooded lead acid batteries with a liquid electrolyte.</span></p><p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">Valve Regulated (VRLA) batteries are sealed, and the electrolyte is bound in a gel.</span></p><p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">VRLA Absorptive Glass Mat (AGM) batteries are sealed, and the electrolyte is immobilized in porous separators.</span></p><p class="p_VariableDescription"><span class="f_VariableDescription">Lead acid battery capacity is dependent on the discharge rate. When you choose different lead-acid battery types from the list, SAM changes internal variable values that define the relationship between capacity and discharge rate as shown in the table below. It is not possible to change these values from the Battery Storage input page. These values are based on analysis of information for batteries from different manufacturers. SAM considers the 20-hour discharge rate to be the nominal capacity of a lead-acid battery and scales the capacity at faster discharge rates as a percent of the that 20-hour capacity.</span></p>
<div style="text-align: center; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="DefaultShadedRows" >
<thead>
<tr class="DefaultShadedRows">
<th class="DefaultShadedRows"><p class="p_TableHeadColumn" style="page-break-inside: avoid;"><span class="f_TableHeadColumn">&nbsp;</span></p>
</th>
<th class="DefaultShadedRows" colspan="3"><p class="p_TableHeadColumn" style="page-break-inside: avoid;"><span class="f_TableHeadColumn">Capacity %</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="DefaultShadedRows">
<td class="DefaultShadedRows"><p class="p_TableHeadColumn" style="page-break-inside: avoid;"><span class="f_TableHeadColumn">Discharge Rate</span></p>
</td>
<td class="DefaultShadedRows"><p class="p_TableHeadColumn" style="page-break-inside: avoid;"><span class="f_TableHeadColumn">Flooded</span></p>
</td>
<td class="DefaultShadedRows"><p class="p_TableHeadColumn" style="page-break-inside: avoid;"><span class="f_TableHeadColumn">VRLA Gel</span></p>
</td>
<td class="DefaultShadedRows"><p class="p_TableHeadColumn" style="page-break-inside: avoid;"><span class="f_TableHeadColumn">VRLA AGM</span></p>
</td>
</tr>
<tr class="DefaultShadedRows">
<td class="DefaultShadedRows" style="background-color:#C0C0C0;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">20-hr ( 0.05 C )</span></p>
</td>
<td class="DefaultShadedRows" style="background-color:#C0C0C0;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">100</span></p>
</td>
<td class="DefaultShadedRows" style="background-color:#C0C0C0;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">100</span></p>
</td>
<td class="DefaultShadedRows" style="background-color:#C0C0C0;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">100</span></p>
</td>
</tr>
<tr class="DefaultShadedRows">
<td class="DefaultShadedRows"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">10-hr ( 0.1C )</span></p>
</td>
<td class="DefaultShadedRows"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">87</span></p>
</td>
<td class="DefaultShadedRows"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">84.9</span></p>
</td>
<td class="DefaultShadedRows"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">93.2</span></p>
</td>
</tr>
<tr class="DefaultShadedRows">
<td class="DefaultShadedRows" style="background-color:#C0C0C0;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">1-hr ( C )</span></p>
</td>
<td class="DefaultShadedRows" style="background-color:#C0C0C0;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">47</span></p>
</td>
<td class="DefaultShadedRows" style="background-color:#C0C0C0;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">63.1</span></p>
</td>
<td class="DefaultShadedRows" style="background-color:#C0C0C0;"><p class="p_TableTextCenter" style="page-break-inside: avoid;"><span class="f_TableTextCenter">58.1</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<h4 class="p_Heading4"><span class="f_Heading4">Lithium Ion</span></h4>
<p class="p_VariableDescription"><span class="f_VariableDescription">The six lithium ion battery types use of the lithium-ion battery capacity model described in </span><span class="f_Text">DiOrio (2015) &quot;</span><span class="f_List">Technoeconomic Modeling of Battery Energy Storage in SAM&quot;</span><span class="f_Text"> cited above</span><span class="f_VariableDescription">:</span></p>
<p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">LMO: Lithium Manganese Oxide (<img alt="EQ_BATT_lmo" width="50" height="16" style="margin:0;width:50px;height:16px;border:none" src="eq_batt_lmo.png"/>) – An inexpensive high-voltage cathode material with high power capabilities but potentially lower lifespan.</span></p><p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">LFP: Lithium Iron Phosphate (<img alt="EQ_BATT_lfp" width="54" height="16" style="margin:0;width:54px;height:16px;border:none" src="eq_batt_lfp.png"/> – A lower voltage cathode material with excellent safety properties but lower volumetric energy.</span></p><p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">LCO: Lithium Cobalt Oxide (<img alt="EQ_BATT_lco" width="47" height="16" style="margin:0;width:47px;height:16px;border:none" src="eq_batt_lco.png"/> – Among the first and still a common cathode material with high specific energy, but potentially costly and toxic.</span></p><p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">LTO: Lithium Titanate (<img alt="EQ_BATT_lto" width="61" height="16" style="margin:0;width:61px;height:16px;border:none" src="eq_batt_lto.png"/> – A promising anode material with excellent lifetime properties but lower specific capacity and important cost considerations.</span></p><p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">NMC: Nickel Manganese Cobalt (<img alt="EQ_BATT_nmc" width="80" height="16" style="margin:0;width:80px;height:16px;border:none" src="eq_batt_nmc.png"/> – A less expensive cathode material than LCO with potentially improved safety characteristics</span></p><p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">NCA: Nickel Cobalt Aluminum (<img alt="EQ_BATT_nca" width="73" height="16" style="margin:0;width:73px;height:16px;border:none" src="eq_batt_nca.png"/> – Similar in respects to NMC as a cathode material with high specific energy</span></p><p class="p_VariableDescription"><span class="f_VariableDescription">When you choose a lithium ion battery, SAM assigns values to voltage, lifetime, and thermal properties as appropriate from Reddy (2011), cited above, and from manufacturer data sheets. SAM does not change any internal variables or calculations.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Flow Batteries</span></h4>
<p class="p_Text"><span class="f_Text">Flow battery designers can decouple power output (kW) from energy capacity (kWh) when sizing systems. Flow batteries may be able to cycle more deeply and operate for more total cycles than lithium ion or lead acid batteries, but flow batteries also have pumps, which should be considered when calculating </span><span class="f_CHInterfaceElement">Ancillary Equipment Losses</span><span class="f_Text">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Vanadium Redox Flow</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The vanadium redox flow battery model available in SAM comes from R. D’Agnostino et. al, (2014) &quot;A Vanadium-Redox Flow-Battery Model for Evaluation of Distributed Storage Implementation in Residential Energy Systems&quot;</span></p>
<p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">VRFB: Vanadium Redox Flow (V</span><span class="f_VariableDescription" style="font-size: 7pt; vertical-align: super;">2+</span><span class="f_VariableDescription">,V</span><span class="f_VariableDescription" style="font-size: 7pt; vertical-align: super;">3+</span><span class="f_VariableDescription"> </span><span class="f_Emphasis">anolyte</span><span class="f_VariableDescription">), (VO</span><span class="f_VariableDescription" style="font-size: 7pt; vertical-align: super;">2+</span><span class="f_VariableDescription">, VO</span><span class="f_VariableDescription" style="font-size: 7pt; vertical-align: super;">2+</span><span class="f_VariableDescription">, </span><span class="f_Emphasis">catholyte</span><span class="f_VariableDescription">) </span></p><p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">All Iron Redox Flow</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The all iron redox flow battery model available in SAM shares the same input field framework as the vanadium flow battery, but relies on tabular voltage vs. depth-of-discharge in place of a voltage model. Default iron flow battery values are based on preliminary manufacturer data and feedback for an all-iron hybrid-redox flow battery.</span></p>
<p class="p_VariableDescription" style="text-indent: 0; padding-left: 13px; margin-left: 24px;"><span class="f_VariableDescription" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:13px;margin-left:-13px">&#8226;</span><span class="f_VariableDescription">AIFB: All Iron Redox Flow (Fe</span><span class="f_VariableDescription" style="font-size: 7pt; vertical-align: super;">2+</span><span class="f_VariableDescription">, Fe</span><span class="f_VariableDescription" style="font-size: 7pt; vertical-align: super;">3+</span><span class="f_VariableDescription">)</span></p><h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Battery Bank Sizing</span></h3>
<p class="p_Text"><span class="f_VariableDescription">The two battery bank sizing options allow you to either automatically size the battery bank based on desired size, or to specify the number of cells and their configuration in the bank yourself. The automatic option is suitable for an initial preliminary design. It uses the basic equations described below to determine numbers of cells and strings or stacks, but does not take into account real-life design considerations that are outside of the model's scope. If you use the automatic sizing option, you should refine the bank sizing parameters by specifying your own values after analyzing the initial results.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Set desired bank size</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to have SAM calculate a number of cells in series and strings in parallel based on the desired bank capacity and power values you enter.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">If you choose this option, be sure to verify the values under Computed Properties to make sure SAM was able to calculate values close to the desired values.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Specify cells</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to manually specify the number of cells in series, strings in parallel and C-rates of charge and discharge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Desired bank capacity, kWh</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Set Desired Bank size option, the size of the battery bank in kWh. Compare this to </span><span class="f_CHInterfaceElement">Nominal bank capacity</span><span class="f_VariableDescription"> under </span><span class="f_CHInterfaceElement">Computed Properties</span><span class="f_VariableDescription"> to verify that SAM calculated a nominal value close enough to the desired value to meet your requirements.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Desired bank power, kW</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Set Desired Bank size option, the maximum discharge rate in kW. Compare this to </span><span class="f_CHInterfaceElement">Maximum discharge power</span><span class="f_VariableDescription"> under </span><span class="f_CHInterfaceElement">Computed Properties</span><span class="f_VariableDescription"> to verify that SAM calculated a discharge power close enough to the desired value to meet your requirements.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Number of cells in series</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Number of Cells in Series option, the number of cells in series in the battery bank. The number of cells in series determines the maximum discharge power.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Number of strings in parallel</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Specify Cells option, the number of strings of cells in parallel in the battery bank. The number of strings in parallel determines the nominal bank capacity.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Max C-rate of charge, 1/hour</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Specify Cells option, the maximum charge rate relative to the nominal bank capacity, determines the maximum charge current shown under </span><span class="f_CHInterfaceElement">Computed Properties</span><span class="f_VariableDescription">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Max C-rate of discharge, 1/hour</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Specify Cells option, the maximum discharge rate relative to the nominal bank capacity, determines the maximum discharge current shown under </span><span class="f_CHInterfaceElement">Computed Properties</span><span class="f_VariableDescription">.</span></p>
<p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To automatically size the battery bank:</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_ProcedureStep">Click </span><span class="f_CHInterfaceElement">Set desired bank size</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_ProcedureStep">Enter values for </span><span class="f_CHInterfaceElement">Desired bank capacity</span><span class="f_ProcedureStep"> in kilowatt-hours and </span><span class="f_CHInterfaceElement">Desired bank power</span><span class="f_ProcedureStep"> in kW. Choose either </span><span class="f_CHInterfaceElement">DC</span><span class="f_ProcedureStep"> or </span><span class="f_CHInterfaceElement">AC</span><span class="f_ProcedureStep"> as appropriate for your battery ratings.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_ProcedureStep">The default desired battery bank voltage depends on the battery chemistry. When you choose the battery type, SAM sets the nominal DC voltage of the battery to a default value for each battery chemistry. If you want to change the value to a different voltage, expand the </span><span class="f_CHInterfaceElement">Battery Voltage</span><span class="f_ProcedureStep"> panel, and change the </span><span class="f_CHInterfaceElement">Desired bank voltage</span><span class="f_ProcedureStep"> in DC Volts under </span><span class="f_CHInterfaceElement">Voltage Properties</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">4.</span><span class="f_ProcedureStep">Under </span><span class="f_CHInterfaceElement">Computed Properties</span><span class="f_ProcedureStep"> in the </span><span class="f_CHInterfaceElement">Current and Capacity</span><span class="f_ProcedureStep"> group, check the </span><span class="f_CHInterfaceElement">Nominal bank capacity</span><span class="f_ProcedureStep"> and </span><span class="f_CHInterfaceElement">Nominal bank voltage</span><span class="f_ProcedureStep"> to make sure they are close enough to your desired values. Also check that </span><span class="f_CHInterfaceElement">Maximum discharge power (DC)</span><span class="f_ProcedureStep"> is close to your desired bank power.</span></p><p class="p_ProcedureStepNoNumber"><span class="f_ProcedureStepNoNumber">You can estimate the nominal battery bank hours of autonomy by dividing the capacity in kWh by the maximum discharge power in kW, which is shown as </span><span class="f_CHInterfaceElement">Time at maximum power</span><span class="f_ProcedureStepNoNumber">.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">If you use AC ratings for the capacity and power values, SAM converts them to DC using the </span><span class="f_CHInterfaceElement">DC to AC conversion efficiency</span><span class="f_Text"> you specify under </span><span class="f_CHInterfaceElement">Power Converters</span><span class="f_Text">.</span></p>
<p class="p_VariableDescription"><span class="f_Text">See <a href="battery_storage_fom.htm#sizeauto" class="topiclink">Calculations for Automatic Bank Sizing</a> for details about how SAM determines the bank size based on the values you enter.</span></p>
<p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To manually size the battery bank for conventional batteries:</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_ProcedureStep">Click </span><span class="f_CHInterfaceElement">Specify cells</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_ProcedureStep">Enter values for </span><span class="f_CHInterfaceElement">Number of cells in series</span><span class="f_ProcedureStep"> and </span><span class="f_CHInterfaceElement">Number of strings in parallel</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_ProcedureStep">Enter values for </span><span class="f_CHInterfaceElement">Max C-rate of charge</span><span class="f_ProcedureStep"> and </span><span class="f_CHInterfaceElement">Max C-rate of discharge</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStepNoNumber"><span class="f_ProcedureStepNoNumber">Batteries typically have some limits based on chemistry for how much power can be input during charging or extracted during discharging. The C-rate is the current divided by the nominal capacity at that current. A one-hour discharge rate is 1C, whereas a half-hour rate is 2C and a two-hour rate is 0.5C. If this value is reported on a battery data sheet in units of power, then calculate the C-rate either as:</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">C = P ÷ ( V × Q )</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">C = P ÷ E</span></p>
<p class="p_ProcedureStepNoNumber"><span class="f_ProcedureStepNoNumber">Where,</span></p>
<p class="p_ProcedureStepNoNumber"><span class="f_Emphasis">P</span><span class="f_ProcedureStepNoNumber"> = power limit in units of W</span></p>
<p class="p_ProcedureStepNoNumber"><span class="f_Emphasis">V</span><span class="f_ProcedureStepNoNumber"> = the nominal voltage of the battery bank in V</span></p>
<p class="p_ProcedureStepNoNumber"><span class="f_Emphasis">Q</span><span class="f_ProcedureStepNoNumber"> = nominal charge of battery bank in Ah</span></p>
<p class="p_ProcedureStepNoNumber"><span class="f_Emphasis">E</span><span class="f_ProcedureStepNoNumber"> = nominal bank capacity in Wh</span></p>
<p class="p_ProcedureStepNoNumber"><span class="f_ProcedureStepNoNumber">SAM's battery thermal model also considers current flow as a primary mechanism for battery heating. Reducing the maximum current charge and discharge is one way to reduce thermal losses and improve battery efficiency.</span></p>
<p class="p_ProcedureStepLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">4.</span><span class="f_ProcedureStepLast">Use the values under </span><span class="f_CHInterfaceElement">Computed Properties</span><span class="f_ProcedureStepLast"> in the </span><span class="f_CHInterfaceElement">Current and Capacity</span><span class="f_ProcedureStepLast"> section to check your design.</span></p><p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To manually size the battery bank for flow batteries:</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_ProcedureStep">Click </span><span class="f_CHInterfaceElement">Specify capacity and stack configuration</span><span class="f_ProcedureStep">. If you do not see this option, be sure to choose a flow battery from the </span><span class="f_CHInterfaceElement">Battery type</span><span class="f_ProcedureStep"> list under </span><span class="f_CHInterfaceElement">Chemistry</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_ProcedureStep">Enter values for </span><span class="f_CHInterfaceElement">Number of cells per stack</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_ProcedureStep">Enter values for </span><span class="f_CHInterfaceElement">Number of parallel stacks</span><span class="f_ProcedureStep"> and </span><span class="f_CHInterfaceElement">Number of stacks in series</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">4.</span><span class="f_ProcedureStep">Enter a value for the </span><span class="f_CHInterfaceElement">Bank capacity in kWh</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStepLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">5.</span><span class="f_ProcedureStepLast">Use the values under </span><span class="f_CHInterfaceElement">Computed Properties</span><span class="f_ProcedureStepLast"> to check your design.</span></p><p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> Since the capacity and power of a flow battery are decoupled, the C-rate is a computed byproduct of the configuration rather than an input design constraint.</span></p>
<h4 class="p_Heading4"><a id="sizeauto" class="hmanchor"></a><span class="f_Heading4">Calculations for Automatic Bank Sizing</span></h4>
<p class="p_Text"><span class="f_Text">SAM's bank sizing calculations use basic equations using the cell property information you specify. The calculated values are designed to help you get started with your system design. They do not account for many real-life design factors. You should use these values for an initial preliminary analysis and then use </span><span class="f_CHInterfaceElement">Specify cells</span><span class="f_Text"> for conventional batteries or </span><span class="f_CHInterfaceElement">Specify capacity and stack configuration</span><span class="f_Text"> for flow batteries to refine your analysis.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Number of cells in series, Number of cells per stack</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">SAM calculates a number of cells in series for a conventional battery, or cells per stack for a flow battery assuming one stack, that either meets exactly or slightly exceeds the desired bank voltage based on the cell nominal voltage. For example, for a desired bank voltage of 24 V with a nominal cell voltage of 3.6 V, SAM calculates </span><span class="f_Emphasis">24 V ÷ 3.6 V/cell = 6.7</span><span class="f_VariableDescription">, or 7 cells in series. The actual nominal bank voltage is </span><span class="f_Emphasis">3.6 V/cell × 7 cells = 25.2</span><span class="f_VariableDescription"> V. SAM displays the actual battery bank properties as calculated values under Current and Capacity.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Number Strings in parallel (Lithium ion, lead-acid)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">SAM calculates the bank capacity by determining the number of strings of cells in parallel required to ensure that the actual capacity is as close as possible to the desired value given the cell capacity that you specify under </span><span class="f_CHInterfaceElement">Current and Capacity</span><span class="f_VariableDescription">. For the example above, if the desired bank capacity is 3 kWh, and the cell capacity is 1.5 Ah, the calculated bank voltage would be 25.2 V, and one string of cells has a capacity of </span><span class="f_Emphasis">25.2 V × 1.5 Ah = 37.8 Wh</span><span class="f_VariableDescription">, or 0.0378 kWh. To reach the desired bank capacity of 3 kWh: </span><span class="f_Emphasis">3 kWh ÷ 0.0378 kWh/string = 79.4</span><span class="f_VariableDescription">, or 80 strings.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The calculated C-rates of charge and discharge are the desired bank power divided by the computed bank capacity.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Capacity and Stack Configuration (Vanadium redox flow, all iron redox flow)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For flow batteries, the capacity is independent of the power block and can be specified exactly by the amount of electrolyte in the tanks. SAM sets nominal bank capacity to the desired capacity you specify. SAM calculates the nominal power ratings using the desired stack (bank) voltage and other properties in the </span><span class="f_CHInterfaceElement">Current and Capacity</span><span class="f_VariableDescription"> group. The number of stacks in parallel is depends on whether the cells are power limited or current limited.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the </span><span class="f_CHInterfaceElement">Power limited</span><span class="f_VariableDescription"> option, the number of stacks in parallel is the ceiling of the desired bank power divided by the product of </span><span class="f_CHInterfaceElement">Cell max power discharge</span><span class="f_VariableDescription"> and the number of cells in the stack (assuming one stack in series). For example, consider &nbsp;a flow battery with a desired bank capacity of 100 kWh, bank power of 50 kW, and bank voltage of 48V with 1.4V cells and a cell power discharge max of 2W. The number of cells in the stack is </span><span class="f_Emphasis">ceiling(48V ÷ 1.4V/cell) = ceiling(34.2 cells) = 35 cells</span><span class="f_VariableDescription">. The bank voltage is </span><span class="f_Emphasis">35 cells × 1.4V/cell = 49V</span><span class="f_VariableDescription">. To achieve 50KW with limitations of 2W/cell, there must be </span><span class="f_Emphasis">ceiling(50 kW / (0.002 kW/cell * 35 cells)) = 715 stacks in parallel</span><span class="f_VariableDescription">. &nbsp;</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the </span><span class="f_CHInterfaceElement">Current limited</span><span class="f_VariableDescription"> option, the number of stacks in parallel is the ceiling of the desired bank power divided by the product of the battery bank voltage and </span><span class="f_CHInterfaceElement">Cell max current discharge</span><span class="f_VariableDescription">. In the example above, if all properties are the same except the battery is current limited with 10A per cell (and consequently per stack), the number of stacks in parallel must be: </span><span class="f_Emphasis">ceiling(50 kW / (49V * 10 A * 0.001) ) = 103 stacks in parallel</span><span class="f_VariableDescription">.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the </span><span class="f_CHInterfaceElement">Limit both current and power</span><span class="f_VariableDescription"> option, the stacks are sized by using the current limit, and within the model at each time step the current and power through the cells are checked and reduced if necessary.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Current and Capacity</span></h3>
<p class="p_Text"><span class="f_Text">The Current and Capacity parameters depend on the battery chemistry:</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">For lead acid and Lithium-ion batteries, you specify a cell capacity value, and SAM displays the computed properties based on the battery bank sizing parameters.</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ListLast">For flow batteries, you choose whether the battery is power- or current-limited and specify minimum and maximum rates.</span></p><h4 class="p_Heading4"><span class="f_Heading4">Lead Acid and Lithium-ion Battery Parameters</span></h4>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cell capacity</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The capacity of a single cell when the battery is fully charged. SAM sets this value to a default value when you choose a battery chemistry, but you can change its value.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Flow Battery Parameters</span></h4>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Power limited with Cell max power charge and discharge</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Limit the maximum charge and discharge power.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Current limited with Cell max current charge and discharge</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Limit the maximum charge and discharge current.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Limit both current and power</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Limit both the charge limits by both power and current.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Computed Properties</span></h4>
<p class="p_Text"><span class="f_Text">These are the values that SAM uses for simulation. The values may either be ones that you specify or that SAM calculates, depending on whether you choose the </span><span class="f_CHInterfaceElement">Set desired bank size</span><span class="f_Text"> or </span><span class="f_CHInterfaceElement">Specify cells</span><span class="f_Text"> option.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Nominal bank capacity</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The product of total number of cells and cell capacity.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Nominal bank voltage</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The product of number of cells in series and the cell nominal voltage as specified under </span><span class="f_CHInterfaceElement">Bank Voltage</span><span class="f_VariableDescription">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cells in series / Cells per stack</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The number of battery cells in series in each string of cells, which determines the battery bank voltage. Either the value you specify explicitly, or that SAM calculates as described above.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Strings in parallel / Stacks in parallel</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The number of parallel strings of battery cells, determines the battery bank capacity. Either the value you specify explicitly, or that SAM calculates as described above.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Stacks in series</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For flow batteries, the number of stacks in series.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Max C-rate of discharge</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Either calculated as </span><span class="f_Emphasis">Maximum Discharge Power ÷ Nominal Bank Capacity</span><span class="f_VariableDescription">, or value input under </span><span class="f_CHInterfaceElement">Battery Bank Sizing</span><span class="f_VariableDescription">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Max C-rate of charge</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Either calculated as </span><span class="f_Emphasis">Maximum Charge Power ÷ Nominal Bank Capacity</span><span class="f_VariableDescription">, or value input under </span><span class="f_CHInterfaceElement">Battery Bank Sizing</span><span class="f_VariableDescription">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum discharge power, DC kW</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The maximum discharge power, calculated from the nominal bank capacity and maximum C-rate of discharge. This is also the nominal DC power of the battery bank.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum charge power, DC kW</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The maximum charge power, calculated from the nominal bank capacity and maximum C-rate of charge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum discharge power, AC kW</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The maximum discharge power, calculated from the nominal bank capacity, maximum C-rate of discharge, and DC to AC conversion efficiency.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum charge power, AC kW</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The maximum discharge power, calculated from the nominal bank capacity, maximum C-rate of charge, and DC to AC conversion efficiency..</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Time at maximum power</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The nominal bank capacity divided by the maximum power, or 1 divided by the maximum C-rate of discharge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum discharge current</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Calculated from the maximum C-rate of discharge: </span><span class="f_Emphasis">Max Discharge Current = 1000 × Max C-rate of Discharge × Nominal Bank Capacity ÷ Nominal Bank Voltage</span><span class="f_VariableDescription">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum charge current</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Calculated from the maximum C-rate of charge: </span><span class="f_Emphasis">Maximum Charge Current = 1000 × Maximum C-rate of Charge × Nominal Bank Capacity ÷ Nominal Bank Voltage</span><span class="f_VariableDescription">.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Power Converters</span></h3>
<p class="p_Text"><span class="f_Text">For photovoltaic-battery systems, SAM can model a battery that is connected to either the DC or AC side of the photovoltaic inverter.</span></p>
<p class="p_Note"><span class="f_CHNote">Notes.</span><br />
<span class="f_CHNote">&nbsp;</span><br />
<span class="f_Note">The DC connected option is only available with the PV Battery configuration. The Generic Battery configuration assumes that the battery is the only DC component in the system.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">The Power Converters conversion efficiency inputs account for electrical losses associated with any battery power converter equipment except for the photovoltaic inverterfor the batteries in the system. SAM models each battery converter as a fixed conversion efficiency.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">The photovoltaic inverter is a separate component from the battery power converters specified here and uses a more sophisticated model with an efficiency curve that varies with the inverter load. You specify the photovoltaic inverter model and parameters on the <a href="pv_inverter.htm" class="topiclink">Inverter</a> page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">DC Connected</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose the DC Connected option for a battery connected to the DC side of the photovoltaic inverter through a battery management system (BMS) as shown in the diagram above.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">To account for electrical losses from the DC power optimizer between the photovoltaic array and inverter, be sure to assign an appropriate value to the </span><span class="f_CHInterfaceElement">DC power optimizer loss</span><span class="f_VariableDescription"> on the <a href="pv_losses.htm" class="topiclink">Losses</a> page.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For a DC-connected battery, during time steps when the total power from the photovoltaic array and battery is greater than the inverter's nameplate capacity, the inverter limits its output power to the nameplate capacity. For the automated dispatch options with </span><span class="f_CHInterfaceElement">Battery can charge from clipped system power</span><span class="f_VariableDescription"> enabled, if the battery is not fully charged and is not discharging, the excess power from the array charges the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">DC to DC conversion efficiency, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the DC-connected option, the electrical conversion efficiency of the battery management system (BMS). SAM applies this loss to power into or out of the battery BMS as energy enters and leaves the battery. SAM disables this input for the AC Connected option.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Inverter efficiency cutoff, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the DC-connected option, the inverter efficiency cutoff is the photovoltaic inverter operating efficiency threshold below which the battery is not allowed to charge or discharge. SAM reports the inverter operating efficiency in the time series results.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">AC Connected</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose the AC-connected option for a battery connected to the system between the inverter and grid interconnection point as shown in the diagram above. Power conversion equipment is required to convert DC power from the battery to AC power before it can serve the load or be sent to the grid, and to convert AC power from the inverter or grid before it can charge the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">AC to DC conversion efficiency, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the AC-connected option, the electrical conversion efficiency associated with the equipment that converts AC power from either the photovoltaic inverter output or grid to DC power for the battery. SAM disables this input for the DC Connected option.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">DC to AC conversion efficiency, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the AC-connected option, the electrical conversion efficiency associated with the equipment that converts DC power from the battery to AC power for either the AC load or grid, or both. SAM disables this input for the DC Connected option.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Charge Limits and Priority</span></h3>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Minimum state of charge, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Sets a limit on the quantity of energy that can be drained from the battery. Battery lifetime is highly dependent on depth of discharge, so this value should be set based on your battery chemistry and desired performance over time. For example a value of 15% would prevent the battery from discharging below a 15% state of charge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Maximum state of charge, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Sets a limit on the quantity of energy that can be sent to the battery. Battery lifetime is dependent on depth of discharge and state of charge, so this value should be set based on your battery chemistry and desired performance over time. For example a value of 95% would prevent the battery from charging above 95% state of charge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Initial state of charge, %</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The state of charge of the battery at the beginning of the simulation. A value of 100% would be for a fully charged battery, 0% would be for a fully discharged battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Minimum time at charge state, min</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">This setting only applies to subhourly simulations. You can ignore it for hourly simulations. For sub-hourly simulations, there may be periods of time where the photovoltaic output varies above and below the load causing rapid cycling of the battery. This kind of cycling, especially if the cycles are deep, may degrade battery performance over time. The minimum time at charge state prevents the battery to change between charging and discharging within the number of minutes that you specify.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Battery Lifetime</span></h3>
<p class="p_Text"><span class="f_Text">SAM's battery lifetime model considers battery cycling and age as the primary causes of capacity degradation.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> To control the frequency of battery replacements as they degrade over time or to remove battery replacements from your analysis, expand the Battery Replacements panel to change the replacement options, and change the battery replacement costs shown under Operation and Maintenance Costs on the System Costs page as appropriate.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Cycle Degradation</span></h4>
<p class="p_Text"><span class="f_Text">Cycle degradation is a reduction in the battery's capacity at 100% state of charge as the battery experiences many charge/discharge cycles. The cycle degradation model relies on information about capacity fade at the number of cycles elapsed at an average depth of discharge in the Cycle Degradation table.</span></p>
<p class="p_Text"><span class="f_Text">SAM assigns default values to the table appropriate for the given battery chemistry when you choose a battery type. You can use the default values unless you have better data from a manufacturer data sheet or other source.</span></p>
<p class="p_Text"><span class="f_Text">If you decide to use your own cycle degradation data, you must provide at least three rows of data in the table. For a table with more than one depth-of-discharge value, SAM uses bilinear interpolation to consider both the average depth-of-discharge and cycle number to determine the available capacity. If the table contains data for a single depth-of-discharge value, SAM only considers the cycle number in the capacity fade calculation using a rainflow counting algorithm.</span></p>
<p class="p_Text"><span class="f_Text">For example, given the following graph from a battery's data sheet showing a curve for three different depth-of-discharge levels:</span></p>
<p class="p_TextCenter"><img alt="IMG_BATT-LifeVSDepthDischarge" width="396" height="275" style="margin:0 auto 0 auto;width:396px;height:275px;border:none" src="img_batt-lifevsdepthdischarge_zoom66.png"/></p>
<p class="p_Text"><span class="f_Text">You might enter the following data in the table:</span></p>
<p class="p_TextCenter"><img alt="IMG_Batt-LifeToSAM" width="681" height="222" style="margin:0 auto 0 auto;width:681px;height:222px;border:none" src="img_batt-lifetosam.png"/></p>
<h4 class="p_Heading4"><span class="f_Heading4">Calendar Degradation</span></h4>
<p class="p_Text"><span class="f_Text">Calendar degradation is a reduction in capacity over a battery's life that occurs over time, regardless of the number of charge/discharge cycles. This degradation may be a function of time, temperature and state of charge, or simply a function of time.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">None</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose </span><span class="f_CHInterfaceElement">None</span><span class="f_VariableDescription"> to ignore calendar degradation. SAM will calculate capacity degradation using only the data in the Cycle Degradation table.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Lithium-ion model</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose </span><span class="f_CHInterfaceElement">Lithium-ion model</span><span class="f_VariableDescription"> to use the equations shown to calculate calendar degradation for Lithium-ion batteries. The Calendar Degradation graph shows the degradation curves resulting from the equations.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The Lithium-ion model accounts for how a Lithium-ion battery's capacity degrades with time, temperature, and state-of-charge. For a description of the model, see </span><span class="f_ListLast">Smith, K.; Saxon, A.; Keyser, M.; Lundstrom, B.; Cao, Z.; Roc, A. (2017). <a href="http://ieeexplore.ieee.org/document/7963578" target="_blank" class="weblink" title="http://ieeexplore.ieee.org/document/7963578">Life Prediction Model for Grid-Connected Li-ion Battery Energy Storage System</a>. 7 pp. 2017 American Control Conference, Seattle, USA.</span></p>
<p class="p_VariableDescription" style="text-align: center;"><img alt="SS_Battery-LifetimeLionModel" width="599" height="258" style="margin:0 auto 0 auto;width:599px;height:258px;border:none" src="ss_battery-lifetimelionmodel.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Custom Degradation</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose </span><span class="f_CHInterfaceElement">Custom</span><span class="f_VariableDescription"> to use the Custom Degradation table to specify degradation curves. The Calendar Degradation graph shows degradation curves from the data in the table.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">To enter custom data in the table, click </span><span class="f_CHInterfaceElement">Custom degradation</span><span class="f_VariableDescription">, and for </span><span class="f_CHInterfaceElement">Rows</span><span class="f_VariableDescription">, type the number of data points in your degradation curve. Each capacity value should be a percentage of the battery nominal full capacity. The battery age should be in days. For example, the table below shows that the battery degrades to 80% of its nominal capacity after 10 years (365 days × 10 years = 3650 days), and to 50% of nominal capacity in after 20 years.</span></p>
<p class="p_VariableDescription" style="text-align: center;"><img alt="SS_Battery-LifetimeCustom" width="600" height="262" style="margin:0 auto 0 auto;width:600px;height:262px;border:none" src="ss_battery-lifetimecustom.png"/></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Battery Replacements</span></h3>
<p class="p_Text"><span class="f_Text">When you enable battery replacements, SAM determines when batteries need to be replaced based either on battery degradation as determined by the Battery Lifetime inputs or a fixed replacement schedule that you specify. It also calculates an annual replacement cost in the project cash flow based battery replacement cost specified as an operation and maintenance cost on the System Costs page.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">No replacements</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use this option if you do not want to account for battery replacement costs, or if you want to account for them using one of the general Operation and Maintenance cost categories on the <a href="pv_system_costs.htm" class="topiclink">System Costs</a> page.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">If you choose the No replacements option, SAM operates the system with no battery after the available storage capacity is depleted.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Replace at specified capacity</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use this option if you want SAM to calculate the year(s) in which batteries are replaced based on degradation of the battery's capacity caused by battery cycling as determined from the </span><span class="f_CHInterfaceElement">Battery Lifetime</span><span class="f_VariableDescription"> parameters.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Set </span><span class="f_CHInterfaceElement">Battery bank replacement threshold</span><span class="f_VariableDescription"> as percentage of the nominal battery capacity that triggers a replacement. When the battery's available capacity has degraded to this percentage, SAM replaces the battery and applies the battery replacement cost from the <a href="pv_system_costs.htm" class="topiclink">System Costs</a> page to the project <a href="cashflow.htm" class="topiclink">cash flow</a>. If you set the threshold to less than 2%, SAM sets the value internally to 2% to avoid simulation issues as the battery's available capacity approaches 0% of its original capacity.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Replace at specified schedule</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Use this option to specify the years when batteries are replaced and the percent of nominal battery capacity that is replaced in those years, regardless of the battery's degradation.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to specify the percentage of total battery capacity to be replaced in each replacement year. In the Edit Array window, click </span><span class="f_CHInterfaceElement">Number of values</span><span class="f_VariableDescription">, and enter the analysis period from the <a href="financial_parameters.htm" class="topiclink">Financial Parameters</a> input page. Then in the table, type a percentage for each year in which the batteries will be replaced. The rows for the remaining years should be zero.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Battery Voltage</span></h3>
<p class="p_Text"><span class="f_Text">The voltage properties are technical specifications available on most battery manufacturer data sheets.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> When you change the battery type, SAM changes the voltage properties inputs to default values appropriate for the battery chemistry you selected. You can use these default values unless you have better information from a manufacturer's data sheet or other source.</span></p>
<p class="p_Text"><span class="f_Text">Battery voltage varies with state of charge as the internal open circuit potential decreases or increases. When a battery charges, positive ions travel from the cathode to the anode, lowering the open circuit potential of the anode and increasing the open circuit potential of the cathode, resulting in a net increase of potential between the anode and cathode. Similarly, as a battery discharges, ions flow back from the anode to the cathode, reducing the net potential. Battery manufacturer data sheets typically report a voltage-discharge curve of some kind to illustrate this behavior. SAM uses a dynamic voltage model, which specifies how to extract information from a data sheet to populate the voltage discharge curve.</span></p>
<p class="p_Text"><span class="f_Text">Voltage variations in charging and discharging affect the battery's round-trip efficiency. During charging, voltage increases, requiring more power to charge the cell. During discharge the voltage decreases and less power can be extracted. The round-trip efficiency is computed as the net amount of energy discharged from a cell divided by how much energy it took to charge the cell.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Voltage Properties Common to All Chemistries</span></h4>
<p class="p_Text"><span class="f_Text">The following voltage properties are available for all of the battery chemistry options.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Desired bank voltage</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The battery bank voltage you are trying to achieve in your design. SAM calculates the number of cells in series based on the desired bank voltage and cell nominal voltage: </span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">Number of Cells in Series = ROUND UP ( Desired Bank Voltage ÷ Cell Nominal Voltage )</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cell nominal voltage</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The reference voltage of a single, fully charged cell in the battery as reported by the manufacturer. The typical nominal voltage for a lead acid cell is 2 V, and for lithium ion cell is 3.7 V. </span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">SAM uses the nominal voltage to size the battery bank and compute the battery bank's nominal voltage.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Cell Internal resistance</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The cell internal resistance for each cell in the battery in Ohms. SAM assumes that this is a constant value and uses it in voltage and thermal calculations by scaling the cell internal resistance to a total battery resistance based on the cell configuration.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Electrochemical Properties</span></h4>
<p class="p_Text"><span class="f_Text">The electrochemical model properties apply to the lead acid and Lithium-ion battery types. They are disabled for the flow battery types.</span></p>
<p class="p_Text"><span class="f_Text">SAM displays the Voltage Discharge graph based on the electrochemical properties you specify.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">C-rate of discharge curve</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Battery manufacturer data sheets typically include a set of curves like the one below that show cell voltage as a function of charge removed for different discharge rates. The &quot;C-rate&quot; is the current used to discharge the battery. It is defined as the current divided by the rated capacity.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">In this example, if the discharge current is given at the 20-hour discharge rate, the C-rate would be </span><span class="f_CHEquationVariable">I</span><span class="f_CHEquationVariable" style="font-size: 7pt; vertical-align: sub;">20</span><span class="f_CHEquationVariable"> ÷ q</span><span class="f_CHEquationVariable" style="font-size: 7pt; vertical-align: sub;">20</span><span class="f_CHEquationVariable"> × C = 0.05 × C (C/20)</span><span class="f_VariableDescription">.</span></p>
<p style="text-align: center; margin: 0 0 6px 0;"><img alt="IMG_BATT-DischargeCurve" width="469" height="371" style="margin:0 auto 0 auto;width:469px;height:371px;border:none" src="img_batt-dischargecurve.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Fully charged cell voltage</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The cell voltage (Vfull) at the given C-rate when a cell is at its maximum charge.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Exponential zone cell voltage</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The cell voltage (Vexp) at the end of the exponential zone, as shown in the Nominal Current Discharge Characteristic graph below. The cell charge removed at this point is </span><img alt="EQ_BATT_Exponential" width="54" height="20" style="margin:0;width:54px;height:20px;border:none" src="eq_batt_exponential.png"/><span class="f_VariableDescription">.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Nominal zone cell voltage </span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The cell voltage (Vnom) at the end of the nominal zone, as shown in the Nominal Current Discharge Characteristic graph below.. The cell charge removed at this point is <img alt="EQ_BATT_Nominal" width="54" height="20" style="margin:0;width:54px;height:20px;border:none" src="eq_batt_nominal.png"/>.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> The voltage inputs must satisfy Vfull &gt; Vexp &gt; Vnom.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Charge removed at exponential and nominal point</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Voltage vs discharge curves show that cell-voltage typically undergoes several distinct regions depending on charge. </span></p>
<p class="p_TextCenter"><img alt="IMG_BATT-NominalDischargeCharacteristic" width="563" height="343" style="margin:0 auto 0 auto;width:563px;height:343px;border:none" src="img_batt-nominaldischargecharacteristic.png"/></p>
<h4 class="p_Heading4"><span class="f_Heading4">Voltage Table</span></h4>
<p class="p_Text"><span class="f_Text">If you are modeling a flow battery, choose the Voltage Table option and use the table to define the voltage versus depth-of-discharge curve. SAM will update the Voltage Discharge curve to show the data you enter in the table.</span></p>
<p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To use the voltage table to define the voltage curve:</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_ProcedureStep">Choose </span><span class="f_CHInterfaceElement">Voltage table</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_ProcedureStep">For </span><span class="f_CHInterfaceElement">Rows</span><span class="f_ProcedureStep">, type the number of pairs of voltage - depth of discharge pairs you want to use to define the voltage. The table will expand to the number of rows you type.</span></p><p class="p_ProcedureStepNoNumber"><span class="f_ProcedureStepNoNumber">You can also click Import to import data from a text file. Try clicking Export to create a template file to see what the text format should be.</span></p>
<p class="p_ProcedureStepLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_ProcedureStepLast">Type values in the depth of discharge and cell voltage columns. The Voltage Discharge graph will update as you type.</span></p><h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Battery Losses</span></h3>
<p class="p_Text"><span class="f_Text">Some battery systems have losses that are not accounted for by the conversion losses specified under Power Converters above. You can use the ancillary equipment losses to account for these additional losses. By default, these losses are set to zero, which is appropriate for most analyses.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Ancillary Equipment Losses</span></h4>
<p class="p_Text"><span class="f_Text">These are losses to account for electrical losses or consumption by equipment in the battery system such as for heaters and pumps for temperature control equipment.</span></p>
<p class="p_Text"><span class="f_Text">For DC-connected batteries, the losses are applied the system's DC power. For AC-connected systems, they are applied to the AC power.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Losses by operating mode</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to specify losses by month that apply when the battery is charging, discharging, or idle.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid; margin: 0 0 6px 25px;"><span class="f_VariableName">Charging mode losses</span></p>
<p class="p_VariableDescription" style="margin: 0 0 6px 25px;"><span class="f_VariableDescription">Losses that apply when the battery is charging. </span></p>
<p class="p_VariableDescription" style="margin: 0 0 6px 25px;"><span class="f_VariableDescription">Click </span><span class="f_CHInterfaceElement">Edit values</span><span class="f_VariableDescription"> to specify the loss in kW by month. SAM will apply the loss in each time step of the month. For example, if the expected loss in January is 500 W, enter 0.5 for January, and SAM will reduce the available power by 0.5 kW for each time step in January.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid; margin: 0 0 6px 25px;"><span class="f_VariableName">Discharging mode losses</span></p>
<p class="p_VariableDescription" style="margin: 0 0 6px 25px;"><span class="f_VariableDescription">Losses that apply when the battery is discharging.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid; margin: 0 0 6px 25px;"><span class="f_VariableName">Idle mode losses</span></p>
<p class="p_VariableDescription" style="margin: 0 0 6px 25px;"><span class="f_VariableDescription">Losses that apply when the battery is neither charging, nor discharging.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Time series losses</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to specify hourly or subhourly time series losses.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid; margin: 0 0 6px 25px;"><span class="f_VariableName">Time series losses</span></p>
<p class="p_VariableDescription" style="margin: 0 0 6px 25px;"><span class="f_VariableDescription">Click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to enter or import kW loss values for each time step of the simulation</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_Heading3_atocs_">Battery Thermal</span></h3>
<p class="p_Text"><span class="f_Text">The thermal model calculates the battery temperature affects battery capacity and lifetime. The model's two main heat-transfer terms are transfer between the battery and its environment, and energy generated by resistive heating inside the battery. The battery internal resistance input is under Battery Voltage.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Thermal Properties</span></h4>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Specific heat Cp (J/kg-K)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Estimated specific heat capacity for the battery.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Heat transfer coefficient h (W/m²-K)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Estimated heat transfer coefficient for heat transfer from the battery to the room.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The default value for behind-the-meter applications is 7.5 W/m²-K, and for front-of-meter applications, the default is 15 W/m²-K.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Environment temp option</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose how to represent the temperature of the battery's environment.</span></p>
<p class="p_VariableDescription" style="text-align: center;"><img alt="SS_Battery-TempOption" width="389" height="70" style="margin:0 auto 0 auto;width:389px;height:70px;border:none" src="ss_battery-tempoption.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Use weather file ambient temperature</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to use temperature data from the weather file as the battery environment temperature. This would be appropriate for a battery installed outdoors. Note that SAM does not account for the effect of solar heating for a battery exposed to direct sunlight.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enter single fixed temperature</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to model the battery environment temperature as a single constant value throughout the year. This would be appropriate for a battery installed in a conditioned room or building.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Enter time series temperature</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Choose this option to provide your own time series temperature data.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Single environment temperature</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Enter Single Fixed Temperature option, the temperature of the battery environment in degrees Celsius. This is disabled for the Use Weather File Ambient Temperature and Enter Time Series Temperature options.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Time series environment temperature</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">For the Enter Time Series Temperature option, click </span><span class="f_CHInterfaceElement">Edit array</span><span class="f_VariableDescription"> to enter or import hourly or subhourly temperature data in degrees Celsius. Note that the number of time steps must match the simulation time step determined by the weather file. This is disabled for the Enter Single Fixed Temperature and Use Weather File Ambient Temperature options.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Capacity fade with temperature</span></h4>
<p class="p_VariableDescription"><span class="f_VariableDescription">The manufacturer data sheet may include battery capacity versus temperature data showing how the battery's capacity decreases with ambient temperature. </span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Temp (°C)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Battery environment temperature in degrees Celsius.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Capacity (%)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Battery discharge capacity as a percentage of rated capacity at the given temperature.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Physical properties</span></h4>
<p class="p_VariableDescription"><span class="f_VariableDescription">In order to scale battery mass and surface area as the battery bank is sized, properties are entered on a per Watt-hour basis.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Specific energy per mass (Wh/kg)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Energy content per unit mass.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Surface energy per volume (Wh/L)</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Energy content per unit volume.</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Given these two properties, SAM calculates the approximate battery length, width, height and mass are computed assuming a cube shape.</span></p>
<h3 class="p_Heading3_atocs_" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><a id="macro" class="hmanchor"></a><span class="f_Heading3_atocs_">Value of Renewable Energy Macro</span></h3>
<p class="p_Text"><span class="f_Text">For residential and commercial projects, you can use the Value of Renewable Energy <a href="macros.htm" class="topiclink">macro</a> to help you make an economic comparison between meeting the building electric load from the grid with no renewable energy system or battery, the grid with a renewable energy system, and the grid with a renewable energy system and battery. You can use the macro to analyze rate-switching scenarios where the rate structure for the grid-only scenario is different from the one with the renewable energy system.</span></p>
<p class="p_Text"><span class="f_Text">To run the macro, set up a case for the photovoltaic system with battery, and then click </span><span class="f_CHInterfaceElement">Macros</span><span class="f_Text"> (in the lower left corner of the SAM window) and click </span><span class="f_CHInterfaceElement">Value of RE System</span><span class="f_Text"> to show the macro. Follow the instructions to choose the appropriate rate structures and run the macro.</span></p>
<p style="text-align: center; line-height: 1.38; margin: 0 0 13px 0;"><img alt="SS_Macro-ValueofRE" width="345" height="350" style="margin:0 auto 0 auto;width:345px;height:350px;border:none" src="ss_macro-valueofre.png"/></p>

</td></tr></table>

</body>
</html>
