<!DOCTYPE html>
<html>
<head>
   <title>Stochastic Simulations</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "stochastic.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#FFFFFF; color:#0072C6;">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1"><span class="f_Heading1">Stochastic Simulations</span></h1>

    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p class="p_Text"><span class="f_Text">The Stochastic Simulations page provides tools you can use to generate distributions of input values for statistical and sensitivity analysis. For example, you could explore how uncertainty in the installation cost of one or more system components might affect a project's net present value and levelized cost of energy (LCOE) over the project life.</span></p>
<p class="p_Text"><span class="f_Text">Click </span><span class="f_CHInterfaceElement">Stochastic</span><span class="f_Text"> in the lower left corner of the main window to display the Stochastic Simulations page:</span></p>
<p class="p_Text"><img alt="SS_MainWindow-StochasticButton" width="225" height="112" style="margin:0;width:225px;height:112px;border:none" src="ss_mainwindow-stochasticbutton.png"/></p>
<p class="p_Text"><span class="f_Text">SAM uses the Latin Hypercube Sampling (LHS) and STEPWISE packages from Sandia National Laboratories to generate distributions for stochastic simulations. For information about these packages, see:</span></p>
<p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Wyss, G; Jorgensen, K. (1998). &quot;A User's Guide To LHS: Sandia's Latin Hypercube Sampling Software.&quot; Sandia National Laboratories. SAND98-0210. 140 pp. (<a href="https://doi.org/10.2172/573301" target="_blank" class="weblink" title="https://doi.org/10.2172/573301">PDF 15 MB</a>) </span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">Helton, J.; Davis, F.; (2000). &quot;Sampling-Based Methods for Uncertainty and Sensitivity Analysis.&quot; SAND99-2240. 121 pp. (<a href="https://doi.org/10.2172/760743" target="_blank" class="weblink" title="https://doi.org/10.2172/760743">PDF 5 MB</a>)</span></p><p class="p_List" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_List" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_List">The LHS package is hosted on Sandia's Dakota platform <a href="https://dakota.sandia.gov/content/packages/lhs" target="_blank" class="weblink">https://dakota.sandia.gov/content/packages/lhs</a>.</span></p><p class="p_ListLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ListLast" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:24px;margin-left:-24px">&#8226;</span><span class="f_ListLast">For the stochastic simulation regression results, SAM uses the STEPWISE package also hosted on Dakota at <a href="https://dakota.sandia.gov/content/packages/stepwise" target="_blank" class="weblink" title="https://dakota.sandia.gov/content/packages/stepwise">https://dakota.sandia.gov/content/packages/stepwise</a>.</span></p><p class="p_Text"><span class="f_Text">SAM's <a href="macros.htm" class="topiclink">LK scripting language</a> includes LHS functions so you can create input distributions from your LK scripts. See the <a href="https://github.com/NREL/SAM/tree/develop/samples/LK%20Scripts%20for%20SAM" target="_blank" class="weblink" title="&nbsp;https://github.com/NREL/SAM/tree/develop/samples/LK%20Scripts%20for%20SAM">LK samples on the SAM GitHub.com</a> repository for an example.</span></p>
<p class="p_Text"><span class="f_Text">For a video demonstration of stochastic simulations in SAM, see <a href="https://sam.nrel.gov/simulation-options.html" target="_blank" class="weblink" title="https://sam.nrel.gov/simulation-options.html">Parametric and Statistical Analysis in SAM</a>.</span></p>
<p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To run stochastic simulations:</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_ProcedureStep">For </span><span class="f_CHInterfaceElement">Input variables</span><span class="f_ProcedureStep">, click </span><span class="f_CHInterfaceElement">Add</span><span class="f_ProcedureStep"> to display a list of available input variables.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_ProcedureStep">Check the variables in the list that you want to assign a distribution of values and click </span><span class="f_CHInterfaceElement">OK</span><span class="f_ProcedureStep">. You can choose one or more variables.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_ProcedureStep">For each variable in the list of stochastic input variables, either double-click the variable name, or click the variable and then click </span><span class="f_CHInterfaceElement">Edit</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">4.</span><span class="f_ProcedureStep">Choose a <a href="stochastic.htm#distributions" class="topiclink">distribution</a>, enter parameter values for the distribution and click </span><span class="f_CHInterfaceElement">OK</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStepNoNumber"><span class="f_ProcedureStepNoNumber">For example, if you choose a Normal distribution, enter a mean value for the input and a standard deviation. SAM shows the variable's name and its value from the SAM inputs for reference.</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">5.</span><span class="f_ProcedureStep">If you chose more than one variable and want to assign a <a href="stochastic.htm#correlations" class="topiclink">correlation</a> between two of those variables, click </span><span class="f_CHInterfaceElement">Add</span><span class="f_ProcedureStep"> under </span><span class="f_CHInterfaceElement">Correlations</span><span class="f_ProcedureStep"> and choose a pair of variables to correlate with a correlation value between -1 and 1.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">6.</span><span class="f_ProcedureStep">Under </span><span class="f_CHInterfaceElement">Outputs</span><span class="f_ProcedureStep">, click </span><span class="f_CHInterfaceElement">Add</span><span class="f_ProcedureStep"> to choose the output variables for the stochastic simulations. For example, if you want to see how the net present value varies for a given distribution of installation costs, choose the net present value output variable.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">7.</span><span class="f_ProcedureStep">Click </span><span class="f_CHInterfaceElement">Run simulations</span><span class="f_ProcedureStep"> to generate a table of input values based on the distributions you defined and a table of results corresponding to the inputs along with the coefficient of determination R² and Beta coefficient ß for each output.</span></p><p class="p_Note"><span class="f_CHNote">Notes.</span><br />
<span class="f_CHNote">&nbsp;</span><br />
<span class="f_Note">When you click </span><span class="f_CHInterfaceElement">Run simulations</span><span class="f_Note"> after changing inputs, correlations, or outputs, SAM automatically generates a new set of samples and displays them in the Stochastic Input Vectors window.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">You can click </span><span class="f_CHInterfaceElement">Compute samples</span><span class="f_Note"> to generate a new set of samples based on the same inputs and correlations. When you click </span><span class="f_CHInterfaceElement">Run simulations</span><span class="f_Note"> after generating samples, SAM runs the simulations without regenerating the samples so the results will match the samples you generated.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">If you run stochastic simulations after closing the Stochastic Input Vectors window without changing the inputs, correlations, or outputs, the results are based on the samples that were in the closed window. SAM only generates new samples when you change the inputs, correlations, or outputs or generate a new set of samples.</span><br />
<span class="f_Note">&nbsp;</span><br />
<span class="f_Note">Stochastic simulation inputs, simulations and results are separate from the case simulation and results that you get by clicking the Simulate button.</span></p>
<h4 class="p_Heading4"><span class="f_Heading4">Tips for Exporting Stochastic Simulation Data</span></h4>
<p class="p_Text"><span class="f_Text">SAM displays stochastic simulation inputs and outputs in separate tables, which makes it difficult to interpret the results. There are two ways to work around this limitation. You can use Show Inputs to see all of the inputs for a given row in the outputs table, or you can copy and paste data from the inputs and outputs table to a spreadsheet or text file.</span></p>
<p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To use Show Inputs to display all inputs for a row in the outputs table:</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_ProcedureStep">Click </span><span class="f_CHInterfaceElement">Run simulations</span><span class="f_ProcedureStep"> to generate a table of outputs.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_ProcedureStep">Right-click the row heading for the row whose inputs you want to see, and click </span><span class="f_CHInterfaceElement">Show inputs</span><span class="f_ProcedureStep">. For example, here we right-clicked the row heading &quot;4&quot; to show inputs corresponding to the results in Row 4:</span></p><p class="p_ProcedureStepNoNumber"><img alt="SS_Stochastic-ShowInputs" width="241" height="176" style="margin:0;width:241px;height:176px;border:none" src="ss_stochastic-showinputs.png"/><br />
<span class="f_ProcedureStepNoNumber">&nbsp;</span></p>
<p class="p_ProcedureStepNoNumber"><span class="f_ProcedureStepNoNumber">This opens the inputs browser so you can see all of the inputs used to generate the results. You can use the Export functions of the inputs browser to export the data to a CSV file or Excel (Windows only).</span></p>
<p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To copy and paste data from the inputs and outputs table to a spreadsheet or text file:</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_ProcedureStep">Click </span><span class="f_CHInterfaceElement">Run simulations</span><span class="f_ProcedureStep"> to generate tables of stochastic inputs and outputs.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_ProcedureStep">Click the cell above the row headers and to the left of the column headers to select the entire table. (You can click a column or row header to select a single column or row instead of the entire table. (Selecting more than one column or row header only selects a single column or row in spite of the highlighted cells.)</span></p><p class="p_ProcedureStepNoNumber"><img alt="SS_Stochastic-SelectInputs" width="267" height="167" style="margin:0;width:267px;height:167px;border:none" src="ss_stochastic-selectinputs.png"/></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_ProcedureStep">Press Ctrl-C (Command-C on a Mac) to copy the selected table</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">4.</span><span class="f_ProcedureStep">In your spreadsheet or text file, press Ctrl-V (Command-V) to paste the table. SAM omits column headings, so you will have to type those by hand.</span></p><p class="p_ProcedureStepLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">5.</span><span class="f_ProcedureStepLast">Repeat this process with the stochastic results table to copy and paste the data.</span></p><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 6px 0 6px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:18px"><a id="distributions" class="hmanchor"></a><img id="TOGGLE0186A1_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="9" height="9" style="margin:0;width:9px;height:9px;border:none" src="hmtoggle_arrow1.gif"/></td><td style="border:none;padding:0"><span class="f_Heading4"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #000000; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A1','TOGGLE0186A1_ICON')">Distributions</a></span></td></tr></table></div><div id="TOGGLE0186A1" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The distributions available in SAM correspond to the distributions described in Section 4.2 of Wyss (1998).</span></p>
<p class="p_Text" style="text-align: center;"><img alt="SS_Stochastic-Distributions" width="424" height="190" style="margin:0 auto 0 auto;width:424px;height:190px;border:none" src="ss_stochastic-distributions.png"/></p>
<p class="p_Text"><span class="f_Text">To define the distribution for an input variable, either double-click the variable's name in the list of input variables, or click the name and then click </span><span class="f_CHInterfaceElement">Edit</span><span class="f_Text">. </span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> It is possible to define a distribution that results in invalid input values, so be careful to choose parameters that result in a valid range of values. For example, if the example shown in the graph below for the Normal distribution was for a cost input, the negative cost values would cause simulation errors.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Normal</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The normal distribution is defined by the mean (μ) and standard deviation (σ), where μ is any real number and σ &gt; 0. The distribution is not bounded or truncated.</span></p>
<p class="p_VariableDescription"><img alt="IMG_Stochastic-normal" width="332" height="238" style="margin:0;width:332px;height:238px;border:none" src="img_stochastic-normal.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Uniform</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">Uniform samples values uniformly between a minimum value A and maximum value B where A and B are real numbers and B &gt; A.</span></p>
<p class="p_VariableDescription"><img alt="IMG_Stochastic-uniform" width="332" height="238" style="margin:0;width:332px;height:238px;border:none" src="img_stochastic-uniform.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Lognormal</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The logarithm of the lognormal distribution is a normal distribution defined by an input mean and error factor, where input mean &gt; 0 and error factor &gt; 1. The mean (μ) and standard deviation (σ) of the underlying normal distribution are related to the parameters of the lognormal distribution as follows:</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">σ = ln( error factor ) / 1.65</span></p>
<p class="p_EquationExcel"><span class="f_EquationExcel">μ = ln( input mean ) - 0.5 σ²</span></p>
<p class="p_VariableDescription"><img alt="IMG_Stochastic-lognormal" width="320" height="228" style="margin:0;width:320px;height:228px;border:none" src="img_stochastic-lognormal.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Lognormal-N</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">A Lognormal-N option results in the same distribution as the Lognormal option, but instead of specifying the input mean and error factor, you provide the mean (μ) and standard deviation (σ) of the underlying normal distribution, where μ is any real number and σ &gt; 0.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Triangular</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The triangular distribution has a probability density function in the shape of a triangle with a distribution minimum at A, maximum at C, and the most likely value at the apex B, where A, B, and C are real numbers, and A ≤ B and B ≤ C.</span></p>
<p class="p_VariableDescription"><img alt="IMG_Stochastic-triangular" width="320" height="228" style="margin:0;width:320px;height:228px;border:none" src="img_stochastic-triangular.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Gamma</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription"> The gamma distribution is defined by the parameter α and the scaling factor β with a resulting mean of α/β, where both parameters are real numbers.</span></p>
<p class="p_VariableDescription"><img alt="IMG_Stochastic-gamma" width="320" height="228" style="margin:0;width:320px;height:228px;border:none" src="img_stochastic-gamma.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Poisson</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The Poisson distribution is a discrete distribution of integer values defined by the frequency Lambda λ, a positive real number.</span></p>
<p class="p_VariableDescription"><img alt="IMG_Stochastic-poisson" width="320" height="228" style="margin:0;width:320px;height:228px;border:none" src="img_stochastic-poisson.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Binomial</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The binomial distribution is a discrete distribution defined by the failure probability P, where 0 &lt; P &lt; 1, and the number of tests N, where N &gt; 1.</span></p>
<p class="p_VariableDescription"><img alt="IMG_Stochastic-binomial" width="320" height="228" style="margin:0;width:320px;height:228px;border:none" src="img_stochastic-binomial.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Exponential</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The exponential distribution is a discrete distribution defined by the parameter Lambda (λ), where λ &gt; 0.</span></p>
<p class="p_VariableDescription"><img alt="IMG_Stochastic-exponential" width="320" height="229" style="margin:0;width:320px;height:229px;border:none" src="img_stochastic-exponential.png"/></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">Weibull</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The Weibull distribution is defined by the shape parameter α and scale parameter β, where both parameters are greater than zero.</span></p>
<p class="p_VariableName" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_VariableName">UserCDF</span></p>
<p class="p_VariableDescription"><span class="f_VariableDescription">The UserCDF option is for input variables that cannot be represented as one of the above distributions. For example, variables that are a choice such as photovoltaic array tracking, or variables that are arraysdoes not work.</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 6px 0 6px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:18px"><img id="TOGGLE0186A2_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="9" height="9" style="margin:0;width:9px;height:9px;border:none" src="hmtoggle_arrow1.gif"/></td><td style="border:none;padding:0"><span class="f_Heading4"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #000000; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A2','TOGGLE0186A2_ICON')">Distributions for Solar Resource Data</a></span></td></tr></table></div><div id="TOGGLE0186A2" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">The solar resource data in a weather file consists of hourly or subhourly values for several different parameters. For example, an hourly weather file has 8,760 values for DHI (diffuse horizontal irradiance), DNI (direct normal irradiance), ambient temperature and ambient wind speed data. Because the data in the weather file is not represented as a single number, it is not possible to define distributions for weather data using the <a href="stochastic.htm#distributions" class="topiclink">distributions</a> described below.</span></p>
<p class="p_Text"><span class="f_Text">If you have a set of weather files spanning multiple years, you can use the </span><span class="f_CHInterfaceElement">Include normal distribution of weather files</span><span class="f_Text"> option to have SAM select files from different years using a normal distribution based on the sum of average annual DNI or DHI for each file divided by the number of weather files. These weather files should be single-year weather files rather than typical-year files that combine data from different years: Each file should contain data for a specific year.</span></p>
<p class="p_Note"><span class="f_CHNote">Note.</span><span class="f_Note"> The weather file distribution option is only available for the solar performance models. It does not work for the wind power or other performance models.</span></p>
<p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To include weather files in stochastic simulations:</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_ProcedureStep">Set up distributions and correlations for the input variables you want to include in the stochastic simulations, if any.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_ProcedureStep">If you do not have a set of weather files, use the </span><span class="f_CHInterfaceElement">Choose year</span><span class="f_ProcedureStep"> option on the Location and Resource page to download weather files.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_ProcedureStep">Click </span><span class="f_CHInterfaceElement">Choose folder</span><span class="f_ProcedureStep"> to choose the folder that contains the weather files. The folder must contain only valid weather files.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">4.</span><span class="f_ProcedureStep">Check </span><span class="f_CHInterfaceElement">Include weather file normal distribution based on DNI or DHI</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">5.</span><span class="f_ProcedureStep">Click </span><span class="f_CHInterfaceElement">Show CDF</span><span class="f_ProcedureStep"> to see the cumulative distribution function (CDF) of annual average DNI. Click the top left corner of the table to select the data to copy and paste into a spreadsheet or text file.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">6.</span><span class="f_ProcedureStep">Choose </span><span class="f_CHInterfaceElement">DNI</span><span class="f_ProcedureStep"> or </span><span class="f_CHInterfaceElement">DHI</span><span class="f_ProcedureStep"> to determine whether the distribution is based on the annual avearage direct normal irradiance (DNI) or diffuse horizontal irradiance (DHI) in each weather file. The DNI option is appropriate for most solar analysis.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">7.</span><span class="f_ProcedureStep">Click </span><span class="f_CHInterfaceElement">Compute samples</span><span class="f_ProcedureStep"> to show a list of inputs for the stochastic simulations. The Stochastic Inputs table shows the weather files that will be used for each simulation along with either the average annual DHI or DNI for each file.</span></p><p class="p_ProcedureStepLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">8.</span><span class="f_ProcedureStepLast">Click </span><span class="f_CHInterfaceElement">Run simulations</span><span class="f_ProcedureStepLast"> to generate a table of results. Remember not to compute samples after running simulations if you want the input and output tables to match.</span></p></td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 6px 0 6px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:18px"><a id="correlations" class="hmanchor"></a><img id="TOGGLE0186A3_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="9" height="9" style="margin:0;width:9px;height:9px;border:none" src="hmtoggle_arrow1.gif"/></td><td style="border:none;padding:0"><span class="f_Heading4"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #000000; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A3','TOGGLE0186A3_ICON')">Correlations</a></span></td></tr></table></div><div id="TOGGLE0186A3" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">When you choose more than one input variable for stochastic simulations, SAM assumes by default that the variables are not related and assigns values to each variable independently. If you want to create a relationship between a pair of inputs, you can define a correlation.</span></p>
<p class="p_Text"><span class="f_Text">The LHS correlation function SAM uses is described in Chapter 2 and Section 4.4.3 of Wys (1998).</span></p>
<p class="p_Text"><span class="f_Text">A correlation can only be defined between one pair of variables at a time. To correlate more than two variables, define a correlation between all of the variables in pairs. For example, to define a correlation between three variables A, B, and C, you could first define a correlation between A and B, and then a separate correlation between B and C.</span></p>
<p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To define a correlation between two variables:</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_ProcedureStep">Under </span><span class="f_CHInterfaceElement">Correlations</span><span class="f_ProcedureStep">, click </span><span class="f_CHInterfaceElement">Add</span><span class="f_ProcedureStep"> to display a list of stochastic input variables.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_ProcedureStep">Check the two variables in the list that you want to correlate and click </span><span class="f_CHInterfaceElement">OK</span><span class="f_ProcedureStep">.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_ProcedureStep">Type the correlation between -1 and 1 and click </span><span class="f_CHInterfaceElement">OK</span><span class="f_ProcedureStep">:</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">4.</span><span class="f_ProcedureStep">Values near the absolute value of one result in closer correlation than values near zero.</span></p><p class="p_ProcedureStepNoNumber"><span class="f_ProcedureStepNoNumber">Zero is equivalent to no correlation between the values in the two variables.</span></p>
<p class="p_ProcedureStepNoNumber"><span class="f_ProcedureStepNoNumber">Negative correlation values cause small values of one variable to be paired with large values of the other variable.</span></p>
<p class="p_ProcedureStepNoNumber"><span class="f_ProcedureStepNoNumber">Positive correlation causes larger values of both variables to be paired, and smaller values of both variables to be paired.</span></p>
<p class="p_Text"><span class="f_Text">The following graphs are of samples generated by SAM for two inputs with normal distributions to show how correlations work. The example correlations are -0.999 (very close negative correlation), 0 (no correlation), and 0.999 (very close positive correlation) </span></p>
<p class="p_Text" style="text-align: center;"><img alt="IMG_Stochastic-correlation" width="900" height="181" style="margin:0 auto 0 auto;width:900px;height:181px;border:none" src="img_stochastic-correlation.png"/></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 6px 0 6px 0;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:18px"><img id="TOGGLE0186A4_ICON" class="dropdown-toggle-icon" alt="Click to expand or collapse" title="Click to expand or collapse" width="9" height="9" style="margin:0;width:9px;height:9px;border:none" src="hmtoggle_arrow1.gif"/></td><td style="border:none;padding:0"><span class="f_Heading4"><a class="dropdown-toggle" style="font-style: normal; font-weight: bold; color: #000000; background-color: transparent; text-decoration: none;" title="Click to expand or collapse" href="javascript:HMToggle('toggle','TOGGLE0186A4','TOGGLE0186A4_ICON')">Create a Tornado Chart Macro</a></span></td></tr></table></div><div id="TOGGLE0186A4" class="dropdown-toggle-body" style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 6px 0;"><table class="ToggleContentTable" >
<tr class="ToggleContentTable">
<td class="ToggleContentTable"><p class="p_Text"><span class="f_Text">SAM's Create Tornado Chart macro in an LK script that you can use to generate a tornado graph given a set of statistical distributions and input variables. See the <a href="https://sam.nrel.gov/simulation-options.html" target="_blank" class="weblink" title="https://sam.nrel.gov/simulation-options.html">Parametric and Statistical Analysis videos</a> for a video demonstration.</span></p>
<p class="p_TitleProcedure" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_TitleProcedure">To run the Create Tornado Chart Macro:</span></p>
<p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">1.</span><span class="f_ProcedureStep">Start SAM and open a project file or create a new case.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">2.</span><span class="f_ProcedureStep">Click </span><span class="f_CHInterfaceElement">Macros</span><span class="f_ProcedureStep"> in the lower left corner of the Main window.</span></p><p class="p_ProcedureStep" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">3.</span><span class="f_ProcedureStep">Click </span><span class="f_CHInterfaceElement">Create Tornado Chart</span><span class="f_ProcedureStep"> in the list of Macros available for the case.</span></p><p class="p_ProcedureStepLast" style="text-indent: 0; padding-left: 24px; margin-left: 24px;"><span class="f_ProcedureStep" style="display:inline-block;width:24px;margin-left:-24px">4.</span><span class="f_ProcedureStepLast">Follow the instructions to create the chart.</span></p></td>
</tr>
</table>
</div>

</td></tr></table>

<script type="text/javascript">
HMInitToggle('TOGGLE0186A1_ICON','hm.type','dropdown','hm.state','0','hm.src0','hmtoggle_arrow0.gif','hm.src1','hmtoggle_arrow1.gif','onclick','HMToggle(\'toggle\',\'TOGGLE0186A1\',\'TOGGLE0186A1_ICON\')');
HMInitToggle('TOGGLE0186A1','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A2_ICON','hm.type','dropdown','hm.state','0','hm.src0','hmtoggle_arrow0.gif','hm.src1','hmtoggle_arrow1.gif','onclick','HMToggle(\'toggle\',\'TOGGLE0186A2\',\'TOGGLE0186A2_ICON\')');
HMInitToggle('TOGGLE0186A2','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A3_ICON','hm.type','dropdown','hm.state','0','hm.src0','hmtoggle_arrow0.gif','hm.src1','hmtoggle_arrow1.gif','onclick','HMToggle(\'toggle\',\'TOGGLE0186A3\',\'TOGGLE0186A3_ICON\')');
HMInitToggle('TOGGLE0186A3','hm.type','dropdown','hm.state','0');
HMInitToggle('TOGGLE0186A4_ICON','hm.type','dropdown','hm.state','0','hm.src0','hmtoggle_arrow0.gif','hm.src1','hmtoggle_arrow1.gif','onclick','HMToggle(\'toggle\',\'TOGGLE0186A4\',\'TOGGLE0186A4_ICON\')');
HMInitToggle('TOGGLE0186A4','hm.type','dropdown','hm.state','0');
</script>
</body>
</html>
