{
    "Name": "Marine Tidal Turbine Design",
    "Width": 937.0,
    "Height": 470.0,
    "FormObjects": {
        "GroupBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "GroupBox1"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 6.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 920.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 449.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Tidal Turbine Design"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "tidal_turbine_cut_out"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 198.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 294.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 118.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 25.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 9.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "tidal_turbine_cutin"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 198.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 264.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 118.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 4.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 8.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "tidal_turbine_kw_rating"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 198.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 54.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 118.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 1500.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 3.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "tidal_turbine_kw_rating_rotor"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 198.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 84.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 118.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 1500.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 3.0
                }
            }
        },
        "SchedNumeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "tidal_turbine_max_cp"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 198.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 237.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 118.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Label": {
                    "Type": 5.0,
                    "String": "Maximum CP"
                },
                "UseSchedule": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ScheduleOnly": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FixedLength": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "Description": {
                    "Type": 5.0,
                    "String": "Enter Maximum CP values for each tidal surface velocity bin"
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 1.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "tidal_turbine_number_rotors"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 198.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 174.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 118.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 2.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 14.0
                }
            }
        },
        "Plot": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "tidal_turbine_power_curve_plot"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 366.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 27.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 540.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 414.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                }
            }
        },
        "SchedNumeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "tidal_turbine_pto_eff"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 198.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 207.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 118.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Label": {
                    "Type": 5.0,
                    "String": "PTO efficiency (%)"
                },
                "UseSchedule": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ScheduleOnly": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FixedLength": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "Description": {
                    "Type": 5.0,
                    "String": "Enter a PTO efficiency value for each current velocity bin"
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 1.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "tidal_turbine_rotor_diameter_input"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 198.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 144.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 118.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 75.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 4.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "tidal_turbine_target_cf"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 198.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 114.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 118.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        }
    },
    "VarDatabase": {
        "tidal.turbine.elevation": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Turbine hub height",
            "Units": "",
            "Group": "",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal.turbine.max_tip_speed": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "",
            "Units": "",
            "Group": "",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal.turbine.max_tspeed_ratio": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "",
            "Units": "",
            "Group": "",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_resource_shear": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "",
            "Units": "",
            "Group": "",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_cut_out": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Cut-out tidal surface velocity",
            "Units": "m/s",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_cutin": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Cut-in tidal surface velocity",
            "Units": "m/s",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_hub_ht": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Tidal turbine hub height",
            "Units": "m",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_kw_rating": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Rated power output",
            "Units": "kW",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_kw_rating_rotor": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Rated power per rotor",
            "Units": "kW",
            "Group": "ME Tidal Turbine",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_max_cp": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "Maximum Cp",
            "Units": "",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "SchedNumeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_number_rotors": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Number of rotors",
            "Units": "",
            "Group": "ME Tidal Converters",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": 2.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_powercurve_powerout": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "Tidal turbine power curve",
            "Units": "kW",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_powercurve_tidalspeeds": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "Tidal turbine tide speeds",
            "Units": "m/s",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": [
                0.0,
                0.0,
                0.0,
                0.0,
                0.0,
                0.0,
                0.0
            ],
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_pto_eff": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "PTO efficiency",
            "Units": "%",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "SchedNumeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_rotor_diameter": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Tidal turbine rotor diameter",
            "Units": "m",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_rotor_diameter_input": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "User-defined rotor diameter",
            "Units": "m",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_site_depth": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Site depth",
            "Units": "m",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_turbine_target_cf": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Target capacity factor",
            "Units": "%",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tidal_velocity_power_law_fit": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Velocity power law fit",
            "Units": "1/x",
            "Group": "ME Tidal Converter",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        }
    },
    "Equations": [
        "equations{'tidal_turbine_site_depth'} = define() {\r",
        "\treturn ${water_depth};\r",
        "};\r",
        "\r",
        "equations{ '$MIMO$ tidalturbinemod' } = define() {\r",
        "\t// reset the error message\r",
        "\r",
        "\t// if we don't need to calculate the curve, get it from library and get out\r",
        "\t\r",
        "\t// make sure error msg starts empty\r",
        "\t//errmsg = \"\";\r",
        "\r",
        "\t// If user defined turbine, get user inputs, otherwise get values for kW rating and rotor diameter from the library for the (non-generic) turbine chosen in the drop-down\r",
        "\tdata.tidal_turbine_rotor_diameter = ${tidal_turbine_rotor_diameter_input};\r",
        "\tdata.number_rotors = ${tidal_turbine_number_rotors};\r",
        "\tdata.tidal_turbine_max_cp = ${tidal_turbine_max_cp};\r",
        "\tdata.cut_in = ${tidal_turbine_cutin};\r",
        "\tdata.cut_out = ${tidal_turbine_cut_out};\r",
        "\tdata.tidal_resource = ${tidal_resource};\r",
        "\t//data.generator_rated_capacity = ${tidal_turbine_kw_rating_input};\r",
        "\tdata.pto_efficiency = ${tidal_turbine_pto_eff};\r",
        "\tdata.target_cf = ${tidal_turbine_target_cf};\r",
        "\tdata.tidal_resource_model_choice = ${ui_tidal_resource_model_choice};\r",
        "\tdata.tidal_vel_freq = ${tidal_vel_freq};\r",
        "\t\r",
        "\tsuccess = ssc_eqn(\"tidal_turbine_calculate_powercurve\", data);\r",
        "\t/*\r",
        "\tif (!success){\r",
        "\t\tmsgbox(data.error);\r",
        "\t\treturn 0;\r",
        "\t}*/\r",
        "\t/*\r",
        "\tif (strlen(data.error) >4) {\r",
        "\t\t${tidal_turbine_powercurve_err_msg} = data.error;\r",
        "\t\t${tidal_turbine_powercurve_tidalspeeds} = [0]; //Show that equation failed so no plot\r",
        "\t\t${tidal_turbine_powercurve_powerout} = [0]; //Show that equation failed so no plot\r",
        "\t\t${tidal_turbine_powercurve_hub_efficiency} = [0]; //Show that equation failed so no plot\r",
        "\t\tmsgbox(data.error);\r",
        "\t\treturn 0;\r",
        "\t}*/\r",
        "\t\r",
        "\tts = data.tidal_turbine_powercurve_tidespeeds;\r",
        "\tpower = data.tidal_turbine_powercurve_powerout;\r",
        "\tpower_rated = data.tidal_turbine_powercurve_powerout_rated;\r",
        "\trated_power = data.tidal_turbine_rated_power;\r",
        "\trated_power_rotor = data.tidal_turbine_rated_power_rotor;\r",
        "\t${tidal_turbine_powercurve_tidalspeeds} = ts;\r",
        "\t${tidal_turbine_powercurve_powerout} = power_rated;\r",
        "\t//${tidal_turbine_powercurve_powerout_electric} = power;\r",
        "\t${tidal_turbine_kw_rating} = rated_power;\r",
        "\t${tidal_turbine_kw_rating_rotor} = rated_power_rotor; //todo rename variables\r",
        "\t\r",
        "\t\r",
        "\t// other outputs\r",
        "\treturn 0;\r",
        "};\r",
        "/*\r",
        "equations{'tidal_turbine_kw_rating_input'} = define() {\r",
        "\trotor_area = pow(${tidal_turbine_rotor_diameter_input}/2,2) * 3.1415 * ${tidal_turbine_number_rotors};\r",
        "\treturn 0.5 * 1025 * max(${tidal_turbine_max_cp}) * rotor_area / 1e6 * 1000; //kW\r",
        "};*/\r",
        ""
    ],
    "Callbacks": [
        "function plot_turbine_curve()\r",
        "{\r",
        "\tsetplot('tidal_turbine_power_curve_plot');\r",
        "\tclearplot('tidal_turbine_power_curve_plot');\r",
        "\tplotopt( {'title'='Turbine power curve','backcolor'=[255,255,255], 'popup'=true, 'legend'=false, 'legendpos'='northwest'}  );\r",
        "\t\r",
        "\tws = ${tidal_turbine_powercurve_tidalspeeds};\r",
        "\tpc = ${tidal_turbine_powercurve_powerout};\r",
        "\t//pce = ${tidal_turbine_powercurve_powerout_electric};\r",
        "\tplot( ws, pc, {'thick'=3, 'scale'=true, 'color'=[100,200,100], 'series'='Turbine Output'});\r",
        "\t//plot( ws, pce, {'thick'=5, 'scale'=true, 'color'=[200,100,100], 'series'='Electric Output'});\r",
        "\thigh = max( ws );\r",
        "\tlow = min( ws );\r",
        "\tpad = (high - low) * 0.05;\r",
        "\taxis( 'x1', {'label'='Velocity (m/s)', 'min'=floor(low-pad), 'max'=ceil(high+pad) });\r",
        "\t\r",
        "\thigh = max( pc );\r",
        "\tlow = min( pc );\r",
        "\tpad = (high - low) * 0.05;\r",
        "\taxis( 'y1', {'label'='Turbine Power (kW)', 'min'=floor(low-pad), 'max'=ceil(high+pad) });\r",
        "\trefresh();\r",
        "\t// show any error messages\r",
        "\t//set_error_msg();\r",
        "}\r",
        "\r",
        "on_load{'Marine Tidal Turbine Design'} = define() {\r",
        "\tset_turbine_sched();\r",
        "\tplot_turbine_curve();\r",
        "\t//set_error_msg();\r",
        "};\r",
        "\r",
        "function set_turbine_sched() {\r",
        "\tlength = #${tidal_resource};\r",
        "\tproperty('tidal_turbine_pto_eff','FixedLength', length);\r",
        "\tproperty('tidal_turbine_max_cp','FixedLength', length);\r",
        "\trefresh();\r",
        "}\r",
        "\r",
        "on_change{'tidal_turbine_kW_rating'} = define() { plot_turbine_curve();};\r",
        "on_change{'tidal_turbine_rotor_diameter_input'} = define() { plot_turbine_curve();};\r",
        "on_change{'tidal_turbine_max_cp'} = define() { set_turbine_sched();plot_turbine_curve();};\r",
        "on_change{'tidal_turbine_pto_eff'} = define() { set_turbine_sched();plot_turbine_curve();};\r",
        "on_change{'tidal_turbine_cutin'} = define() { plot_turbine_curve();};\r",
        "on_change{'tidal_turbine_cut_out'} = define() { plot_turbine_curve();};\r",
        "on_change{'tidal_turbine_number_rotors'} = define() { plot_turbine_curve();};\r",
        "on_change{'tidal_turbine_target_cf'} = define() {plot_turbine_curve();};"
    ]
}