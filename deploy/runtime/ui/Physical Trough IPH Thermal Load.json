{
    "Name": "Physical Trough IPH Thermal Load",
    "Width": 852.0,
    "Height": 155.0,
    "FormObjects": {
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "COPY_q_pb_design"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 573.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 33.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "RadioChoice": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "DISP_load_input_option"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 45.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 36.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 192.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 50.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Selection": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Items": {
                    "Type": 6.0,
                    "StringList": "Normalized thermal load data|Absolute thermal load data"
                },
                "ShowCaptions": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Horizontal": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "GroupBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "GroupBox2"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 6.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 830.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 137.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Thermal Load"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "DataArray": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "timestep_load_abs"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 252.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 60.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Label": {
                    "Type": 5.0,
                    "String": "Load data (kWt)"
                },
                "Description": {
                    "Type": 5.0,
                    "String": ""
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "timestep_load_abs_factor"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 252.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "DataArray": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "timestep_load_fractions"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 252.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 33.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Label": {
                    "Type": 5.0,
                    "String": "Normalized load data"
                },
                "Description": {
                    "Type": 5.0,
                    "String": ""
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "Button": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "visualize_load_data"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 453.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 81.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 216.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 30.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "View load data..."
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        }
    },
    "VarDatabase": {
        "CALC_timestep_load_abs": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "Thermal load",
            "Units": "kWt",
            "Group": "Thermal Load",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "CALC_timestep_load_fractions": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "Normalized thermal load",
            "Units": "",
            "Group": "Thermal Load",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "COPY_q_pb_design": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Heat sink thermal power",
            "Units": "kWt",
            "Group": "Thermal Load",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "DISP_load_input_option": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Thermal load input",
            "Units": "",
            "Group": "Thermal Load",
            "IndexLabels": "Normalized thermal load data|Absolute thermal load data",
            "Flags": 1.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "is_timestep_load_fractions": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "0: Block schedule, 1: Load fraction, 2: Absolute load",
            "Units": "",
            "Group": "Thermal Load",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "is_tod_pc_target_also_pc_max": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Use output fraction as maximum heat sink output",
            "Units": "",
            "Group": "Thermal load",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "timestep_load_abs": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "",
            "Units": "kWt",
            "Group": "Thermal Load",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "timestep_load_abs_factor": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Scale factor",
            "Units": "",
            "Group": "Thermal Load",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": 1.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "timestep_load_fractions": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "",
            "Units": "",
            "Group": "Thermal Load",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        }
    },
    "Equations": [
        "//\r",
        "//  ONLY ADD UI INDICATOR, COMBO CONVERTERS, AND\r",
        "//  INPUT AGGREGATOR EQUATIONS BELOW!\r",
        "//\r",
        "//   If the equations change an input value\r",
        "//   modify the below main MIMO or add one,\r",
        "//   referencing in ssc_equations.h\r",
        "//\r",
        "\r",
        "equations{ 'is_timestep_load_fractions' } = define() {\r",
        "\treturn ${DISP_load_input_option} + 1; };\r",
        "\r",
        "equations{ 'COPY_q_pb_design' } = define() {\r",
        "\treturn ${q_pb_design} * 1000.0; };\r",
        "\t\r",
        "equations{ 'is_tod_pc_target_also_pc_max' } = define() {\r",
        "\treturn 1; };"
    ],
    "Callbacks": [
        "on_load{'Physical Trough IPH Thermal Load'} = define() {\r",
        "\tenable_load_data_input();\r",
        "};\r",
        "\r",
        "on_change{'DISP_load_input_option'} = define() \r",
        "{\r",
        "\tenable_load_data_input();\r",
        "};\r",
        "\r",
        "function enable_load_data_input()\r",
        "{\r",
        "\tenable('timestep_load_fractions', ${DISP_load_input_option}==0);\r",
        "\tenable('timestep_load_abs', ${DISP_load_input_option}==1);\r",
        "\tenable('timestep_load_abs_factor', ${DISP_load_input_option}==1);\r",
        "}\r",
        "\r",
        "on_change{'visualize_load_data'} = define() {\r",
        "\tts_length = 8760; // number of timesteps\r",
        "\tts = ts_length / 8760;\t// timestep in hours\r",
        "\t\r",
        "\tq_pb_design_array = [];\r",
        "\tq_pb_design_kW = ${COPY_q_pb_design}; // [kWt]\r",
        "\tfor(i=0; i < ts_length; i++)\r",
        "\t\tq_pb_design_array[i] = q_pb_design_kW;\r",
        "\t\r",
        "\tdview(3, ts, \"Thermal Load\", \r",
        "\t\t\"Thermal load power\", \"kWt\", 1.0, ${CALC_timestep_load_abs},\r",
        "\t\t\"Normalized thermal load power\", \"-\", 0.0, ${CALC_timestep_load_fractions},\r",
        "\t\t\"Design thermal power\", \"kWt\", 1.0, q_pb_design_array);\r",
        "};\r",
        ""
    ]
}