Battery Dispatch Behind the Meter
1053
322
16
Label

1
13
Name
5
20
BatteryChargeOptions
X
3
12
Y
3
189
Width
3
285
Height
3
39
Tool Tip
5
0
Caption
5
73
For manual dispatch, charge options are defined below by dispatch period.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
GroupBox

1
8
Name
5
21
DispatchTimingControl
X
3
6
Y
3
6
Width
3
1042
Height
3
310
Tool Tip
5
0
Caption
5
27
Storage Dispatch Controller
Bold
2
1
GroupBox

1
8
Name
5
18
GridPowerTargetBox
X
3
324
Y
3
33
Width
3
718
Height
3
106
Tool Tip
5
0
Caption
5
58
Monthly or Time Series Inputs for Grid Power Target Option
Bold
2
1
GroupBox

1
8
Name
5
16
InputDispatchBox
X
3
324
Y
3
153
Width
3
718
Height
3
106
Tool Tip
5
0
Caption
5
46
Time Series Inputs for Battery Dispatch Option
Bold
2
1
DataArray

1
10
Name
5
20
batt_custom_dispatch
X
3
552
Y
3
171
Width
3
90
Height
3
24
Tool Tip
5
0
Mode
3
1
Label
5
23
Battery Dispatch (kWdc)
Description
5
123
For each simulation time step enter a rate in kW: less than zero to charge the battery, and greater than zero to discharge.
TabOrder
3
5
CheckBox

1
9
Name
5
29
batt_dispatch_auto_can_charge
X
3
33
Y
3
258
Width
3
258
Height
3
24
Tool Tip
5
0
Caption
5
30
Battery can charge from system
State
2
1
TabOrder
3
7
CheckBox

1
9
Name
5
37
batt_dispatch_auto_can_fuelcellcharge
X
3
33
Y
3
285
Width
3
258
Height
3
24
Tool Tip
5
0
Caption
5
33
Battery can charge from fuel cell
State
2
1
TabOrder
3
8
CheckBox

1
9
Name
5
33
batt_dispatch_auto_can_gridcharge
X
3
33
Y
3
231
Width
3
258
Height
3
24
Tool Tip
5
0
Caption
5
28
Battery can charge from grid
State
2
1
TabOrder
3
6
RadioChoice

1
11
Name
5
20
batt_dispatch_choice
X
3
33
Y
3
48
Width
3
246
Height
3
111
Tool Tip
5
0
Selection
3
0
Items
6
5
Peak shaving one-day look ahead
Peak shaving one-day look behind
Input grid power target
Input battery dispatch
Manual dispatch
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
1
Label

1
13
Name
5
19
batt_dispatch_label
X
3
705
Y
3
165
Width
3
330
Height
3
81
Tool Tip
5
0
Caption
5
161
Input a custom battery power dispatch (<0 for charging, >0 for discharging).  SAM will follow the dispatch within the operational limits of the system specified.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Divider

1
10
Name
5
17
batt_grid_options
X
3
12
Y
3
168
Width
3
291
Height
3
25
Tool Tip
5
0
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
14
Charge Options
Bold
2
1
Choice

1
9
Name
5
18
batt_target_choice
X
3
333
Y
3
51
Width
3
354
Height
3
24
Tool Tip
5
0
Items
6
2
Monthly power targets
Time series power targets
Selection
3
4294967295
TabOrder
3
2
Label

1
13
Name
5
17
batt_target_label
X
3
702
Y
3
48
Width
3
333
Height
3
81
Tool Tip
5
0
Caption
5
178
Input the maximum grid power desired.  SAM will charge the battery if the electric load is less than the target, and discharge the battery if the load is greater than the target.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
DataArray

1
10
Name
5
17
batt_target_power
X
3
525
Y
3
108
Width
3
117
Height
3
24
Tool Tip
5
0
Mode
3
1
Label
5
24
Grid Target Power (kWac)
Description
5
130
The grid target power is the maximum desired power drawn from the grid over each timestep after contributions from PV and battery.
TabOrder
3
4
MonthlyFactor

1
8
Name
5
25
batt_target_power_monthly
X
3
525
Y
3
81
Width
3
117
Height
3
24
Tool Tip
5
0
Description
5
26
Monthly grid power targets
TabOrder
3
3
Divider

1
10
Name
5
9
object 21
X
3
12
Y
3
27
Width
3
291
Height
3
16
Tool Tip
5
0
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
16
Dispatch Options
Bold
2
1

8
batt_custom_dispatch
3
2
Time series battery dispatch
kWdc
BatteryDispatch
25
Battery Dispatch (kWdc)|1
2
1
2
1
1
0
DataArray
batt_dispatch_auto_can_charge
3
1
Battery can charge from system
 
BatteryDispatch
0
3
1
1
1
1
1
CheckBox
batt_dispatch_auto_can_fuelcellcharge
3
1
Battery can charge from fuel cell
 
BatteryDispatch
0
3
1
1
1
1
0
CheckBox
batt_dispatch_auto_can_gridcharge
3
1
Battery can charge from grid
 
BatteryDispatch
0
3
1
1
1
1
1
CheckBox
batt_dispatch_choice
3
1
Battery dispatch options
 
BatteryDispatch
132
Peak shaving one-day look ahead|Peak shaving one-day look behind|Automated grid power target| Input battery dispatch|Manual dispatch
3
1
1
1
1
3
RadioChoice
batt_target_choice
3
1
Grid power target options
 
BatteryDispatch
47
Monthly power targets|Time series power targets
1
1
1
1
1
0
Choice
batt_target_power
3
2
Time series grid power targets
kWac
BatteryDispatch
26
Grid Target Power (kWac)|1
0
1
2
1
1
15
DataArray
batt_target_power_monthly
3
2
Monthly grid power targets
kWac
BatteryDispatch
0
0
1
2
1
1
0
MonthlyFactor

0
1172
on_load{'Battery Dispatch Behind the Meter'}=define()
{	
	toggle_dispatch();
		
	on_change{'batt_dispatch_choice'};
	on_change{'batt_target_choice'};
	
	show('batt_dispatch_auto_can_fuelcellcharge', technology()=='Fuel Cell');
	
};

on_change{'batt_dispatch_choice'}=define(){toggle_dispatch();};
on_change{'batt_target_choice'} = define(){toggle_dispatch_target();};

function toggle_dispatch_target()
{
	mode = ${batt_dispatch_choice};
	if (mode != 2)
		enable_target_inputs(false);
	else
		enable_target_inputs(true);
}

function toggle_custom_dispatch()
{
	mode = ${batt_dispatch_choice};
	if (mode != 3)
		enable('batt_custom_dispatch', false);
	else
		enable('batt_custom_dispatch', true);
}
function enable_target_inputs(on_off)
{
	if (!on_off)
	{
		enable('batt_target_choice',on_off);
		enable('batt_target_power',on_off);
		enable('batt_target_power_monthly',on_off);
	}
	else 
	{
		enable('batt_target_choice',true);
		mode = ${batt_target_choice};
		if (mode == 0)
		{
			enable('batt_target_power',false);
			enable('batt_target_power_monthly',true);
		}
		else
		{
			enable('batt_target_power',true);
			enable('batt_target_power_monthly',false);
		}
	}
}

