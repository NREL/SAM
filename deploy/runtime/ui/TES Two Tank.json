{
    "Name": "TES Two Tank",
    "Width": 906.0,
    "Height": 180.0,
    "FormObjects": {
        "Choice": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "combo_tes_htf_type"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 219.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 27.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 124.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Items": {
                    "Type": 6.0,
                    "StringList": "Solar Salt|Caloria|Hitec XL|VP-1|Hitec|Dowtherm Q|Dowtherm RP|Therminol 59|Therminol 66|Pressurized Water|User-defined..."
                },
                "Selection": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 21.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "csp.dtr.tes.htf_max_opt_temp"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 663.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 75.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 100.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 16.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "csp.dtr.tes.htf_min_opt_temp"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 663.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 51.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 100.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 16.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "csp.pt.tes.htf_density"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 663.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 27.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 100.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 24.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "dt_cold"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 663.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 123.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 100.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 18.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "dt_hot"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 663.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 99.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 100.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 17.0
                }
            }
        },
        "GroupBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 4"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 891.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 162.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Two Tank Parameters"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "MaterialProperties": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "store_fl_props"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 351.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 59.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 27.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 22.0
                }
            }
        },
        "CheckBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "tanks_in_parallel"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 366.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 99.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 20.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": ""
                },
                "State": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "tes_bypass_msg"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 114.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 69.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 267.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 33.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": ""
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        }
    },
    "VarDatabase": {
        "combo_tes_htf_type": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Storage HTF fluid",
            "Units": "",
            "Group": "Thermal Storage",
            "IndexLabels": "Hitec Solar Salt|Caloria HT 43|Hitec XL|Therminol VP-1|Hitec|Dowtherm Q|Dowtherm RP|Therminol 59|Therminol 66|Pressurized Water|User-defined...",
            "Flags": 2.0,
            "DefaultValue": 3.0,
            "UIObject": "Choice",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "csp.dtr.tes.htf_max_opt_temp": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Storage HTF max operating temp",
            "Units": "°C",
            "Group": "TES",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "csp.dtr.tes.htf_min_opt_temp": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Storage HTF min operating temp",
            "Units": "°C",
            "Group": "TES",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "csp.pt.tes.htf_density": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "HTF density",
            "Units": "kg/m³",
            "Group": "TES",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "dt_cold": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Cold side HX approach temp",
            "Units": "°C",
            "Group": "TES",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 7.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "dt_hot": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Hot side HX approach temp",
            "Units": "°C",
            "Group": "TES",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": 5.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "is_hx": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Heat exchanger no/yes flag",
            "Units": "0/1",
            "Group": "TES",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "store_fl_props": {
            "Version": 4.0,
            "Type": 3.0,
            "Label": "User-defined HTF fluid",
            "Units": "",
            "Group": "TES",
            "IndexLabels": "",
            "Flags": 1.0,
            "DefaultValue": [
                [
                    1.0
                ]
            ],
            "UIObject": "MaterialProperties",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tanks_in_parallel": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Field HTF can bypass TES to cycle",
            "Units": "-",
            "Group": "TES",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": 1.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        }
    },
    "Equations": [
        "// Just combo converter\r",
        "equations{ 'store_fluid' } = define() {\r",
        "\treturn ?${combo_tes_htf_type}\r",
        "\t[\r",
        "\t\t18, //    18.) Nitrate Salt**\r",
        "\t\t19, //    19.) Caloria HT 43**\r",
        "\t\t20, //    20.) Hitec XL**\r",
        "\t\t21, //    21.) Therminol VP-1**\r",
        "\t\t22, //    22.) Hitec**\r",
        "\t\t23, //    23.) Dowtherm Q**\r",
        "\t\t24, //    24.) Dowtherm RP**\r",
        "\t\t30, //    30.) Therminol 59\r",
        "\t\t29, //    29.) Therminol 66\r",
        "\t\t31, //    31.) Pressurized Water    \r",
        "\t\t50  //    user defined HTF\r",
        "\t];\r",
        "};\r",
        "\r",
        "// Just UI indicator\r",
        "equations{ 'dt_cold' } = define() {\r",
        "\treturn ${dt_hot}; };"
    ],
    "Callbacks": [
        "on_load{'TES Two Tank'} = define() {\r",
        "\ton_change{\"is_hx\"}();\r",
        "\ton_change{\"combo_tes_htf_type\"}();\r",
        "};\r",
        "\r",
        "function set_tes_bypass_msg ( v ) {\r",
        "\tmsg = '';\r",
        "\tif ( v ) {\r",
        "\t\tmsg = \"If the storage fluid is different than the field HTF, then the field and TES must operate in parallel.\";\r",
        "\t}\r",
        "\tproperty('tes_bypass_msg','Caption',msg);\r",
        "}\r",
        "\r",
        "on_change{\"combo_tes_htf_type\"}=define(){\r",
        "\r",
        "\ton_change{\"is_hx\"}();\r",
        "\t\r",
        "    bUserDefined = (${combo_tes_htf_type} == 10);\r",
        "    enable(\"store_fl_props\", bUserDefined);\r",
        "    enable(\"csp.dtr.tes.htf_min_opt_temp\",!bUserDefined);\r",
        "    enable(\"csp.dtr.tes.htf_max_opt_temp\",!bUserDefined);\r",
        "};\r",
        "\r",
        "on_change{\"store_fl_props\"}=define(){\r",
        "\ton_change{\"is_hx\"}();\r",
        "};\r",
        "\r",
        "on_change{\"is_hx\"} = define(){\r",
        "\t\r",
        "\tis_hx = ${is_hx};\r",
        "\r",
        "\tenable('dt_hot', is_hx );\r",
        "\tenable('dt_cold', is_hx );\r",
        "\tenable('tanks_in_parallel', !is_hx);\r",
        "\tset_tes_bypass_msg(is_hx);\r",
        "};"
    ]
}