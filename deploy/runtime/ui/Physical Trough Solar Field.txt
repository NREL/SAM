Physical Trough Solar Field
866
1231
64
Numeric

1
17
Name
5
24
FIELD_COPY_T_loop_in_des
X
3
654
Y
3
120
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
16
Numeric

1
17
Name
5
21
FIELD_COPY_T_loop_out
X
3
654
Y
3
144
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
17
Numeric

1
17
Name
5
17
FIELD_COPY_nLoops
X
3
654
Y
3
24
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
32
Numeric

1
17
Name
5
21
FIELD_COPY_solar_mult
X
3
654
Y
3
72
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
34
GroupBox

1
8
Name
5
9
GroupBox1
X
3
9
Y
3
180
Width
3
404
Height
3
287
Tool Tip
5
0
Caption
5
22
Solar Field Parameters
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox2
X
3
423
Y
3
180
Width
3
437
Height
3
287
Tool Tip
5
0
Caption
5
19
Heat Transfer Fluid
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox3
X
3
9
Y
3
6
Width
3
850
Height
3
170
Tool Tip
5
0
Caption
5
24
Solar Field Design Point
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox4
X
3
9
Y
3
723
Width
3
850
Height
3
500
Tool Tip
5
0
Caption
5
25
Single Loop Configuration
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox5
X
3
9
Y
3
546
Width
3
374
Height
3
110
Tool Tip
5
0
Caption
5
14
Mirror Washing
Bold
2
1
GroupBox

1
8
Name
5
10
GroupBox51
X
3
9
Y
3
471
Width
3
850
Height
3
71
Tool Tip
5
0
Caption
5
21
Collector Orientation
Bold
2
1
GroupBox

1
8
Name
5
11
GroupBox511
X
3
9
Y
3
663
Width
3
850
Height
3
53
Tool Tip
5
0
Caption
5
9
Land Area
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox6
X
3
390
Y
3
546
Width
3
470
Height
3
110
Tool Tip
5
0
Caption
5
19
Plant Heat Capacity
Bold
2
1
Numeric

1
17
Name
5
9
HDR_rough
X
3
246
Y
3
219
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
8
Label

1
13
Name
5
6
Label1
X
3
24
Y
3
765
Width
3
815
Height
3
45
Tool Tip
5
0
Caption
5
217
Usage tip:  To configure the loop, choose whether to edit SCAs, HCEs or defocus order.  Select assemblies by clicking one or dragging the mouse over multiple items. Assign types to selected items by pressing keys 1-4.
TextColour
4
255
128
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Label

1
13
Name
5
6
Label2
X
3
24
Y
3
744
Width
3
803
Height
3
21
Tool Tip
5
0
Caption
5
64
The specification below is only for one loop in the solar field.
TextColour
4
255
128
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
6
Label3
X
3
375
Y
3
513
Width
3
194
Height
3
21
Tool Tip
5
0
Caption
5
27
Azimuth: equator=0, west=90
TextColour
4
255
128
64
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
7
Label31
X
3
375
Y
3
489
Width
3
197
Height
3
21
Tool Tip
5
0
Caption
5
31
Tilt: horizontal=0, vertical=90
TextColour
4
255
128
64
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
21
Label_cold_hdr_sizing
X
3
654
Y
3
390
Width
3
73
Height
3
24
Tool Tip
5
0
Caption
5
12
Cold Headers
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
20
Label_hot_hdr_sizing
X
3
750
Y
3
390
Width
3
73
Height
3
24
Tool Tip
5
0
Caption
5
11
Hot Headers
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Numeric

1
17
Name
5
12
Pipe_hl_coef
X
3
246
Y
3
267
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
1
Numeric

1
17
Name
5
12
Row_Distance
X
3
246
Y
3
195
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4
Numeric

1
17
Name
5
15
SCA_drives_elec
X
3
246
Y
3
387
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
2
Numeric

1
17
Name
5
4
T_fp
X
3
654
Y
3
267
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
10
Numeric

1
17
Name
5
14
V_hdr_cold_max
X
3
654
Y
3
435
Width
3
65
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
25
Numeric

1
17
Name
5
14
V_hdr_cold_min
X
3
654
Y
3
411
Width
3
65
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
23
Numeric

1
17
Name
5
13
V_hdr_hot_max
X
3
750
Y
3
435
Width
3
65
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
26
Numeric

1
17
Name
5
13
V_hdr_hot_min
X
3
750
Y
3
411
Width
3
65
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
24
Numeric

1
17
Name
5
7
azimuth
X
3
243
Y
3
513
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
37
Choice

1
9
Name
5
17
combo_FieldConfig
X
3
246
Y
3
411
Width
3
100
Height
3
21
Tool Tip
5
0
Items
6
7
1
2
4
6
8
10
12
Selection
3
4294967295
TabOrder
3
7
Choice

1
9
Name
5
13
combo_feather
X
3
246
Y
3
435
Width
3
100
Height
3
21
Tool Tip
5
0
Items
6
2
Sequenced
Simultaneous
Selection
3
0
TabOrder
3
13
Choice

1
9
Name
5
14
combo_htf_type
X
3
654
Y
3
195
Width
3
124
Height
3
21
Tool Tip
5
0
Items
6
11
Solar Salt
Caloria
Hitec XL
VP-1
Hitec
Dowtherm Q
Dowtherm RP
Therminol 59
Therminol 66
Pressurized Water
User-defined...
Selection
3
4294967295
TabOrder
3
14
Numeric

1
17
Name
5
8
eta_pump
X
3
246
Y
3
243
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
9
MaterialProperties

1
7
Name
5
14
field_fl_props
X
3
786
Y
3
192
Width
3
59
Height
3
27
Tool Tip
5
0
TabOrder
3
15
Numeric

1
17
Name
5
28
field_htf_max_operating_temp
X
3
654
Y
3
243
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
16
Numeric

1
17
Name
5
28
field_htf_min_operating_temp
X
3
654
Y
3
219
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
16
Numeric

1
17
Name
5
20
field_thermal_output
X
3
654
Y
3
96
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
35
Numeric

1
17
Name
5
15
fixed_land_area
X
3
120
Y
3
684
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
46
CheckBox

1
9
Name
5
6
fthrok
X
3
354
Y
3
435
Width
3
23
Height
3
21
Tool Tip
5
0
Caption
5
0
State
2
0
TabOrder
3
12
Numeric

1
17
Name
5
23
loop_optical_efficiency
X
3
246
Y
3
48
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
28
Numeric

1
17
Name
5
12
m_dot_htfmax
X
3
654
Y
3
315
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
19
Numeric

1
17
Name
5
12
m_dot_htfmin
X
3
654
Y
3
291
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
18
Numeric

1
17
Name
5
23
max_field_flow_velocity
X
3
654
Y
3
363
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
21
Numeric

1
17
Name
5
11
mc_bal_cold
X
3
633
Y
3
594
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
44
Numeric

1
17
Name
5
10
mc_bal_hot
X
3
633
Y
3
570
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
43
Numeric

1
17
Name
5
10
mc_bal_sca
X
3
633
Y
3
618
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
45
Numeric

1
17
Name
5
23
min_field_flow_velocity
X
3
654
Y
3
339
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
20
Numeric

1
17
Name
5
36
non_solar_field_land_area_multiplier
X
3
501
Y
3
684
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
47
Numeric

1
17
Name
5
7
p_start
X
3
246
Y
3
363
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4
Numeric

1
17
Name
5
12
rec_qf_delay
X
3
246
Y
3
339
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4
Numeric

1
17
Name
5
12
rec_su_delay
X
3
246
Y
3
315
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4
Numeric

1
17
Name
5
32
required_number_of_loops_for_SM1
X
3
246
Y
3
120
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
31
Numeric

1
17
Name
5
21
single_loop_aperature
X
3
246
Y
3
24
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
27
Numeric

1
17
Name
5
9
theta_dep
X
3
654
Y
3
513
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
6
Numeric

1
17
Name
5
10
theta_stow
X
3
654
Y
3
489
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
5
Numeric

1
17
Name
5
4
tilt
X
3
243
Y
3
489
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
36
Numeric

1
17
Name
5
14
total_aperture
X
3
654
Y
3
48
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
33
Numeric

1
17
Name
5
15
total_land_area
X
3
714
Y
3
684
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
48
Numeric

1
17
Name
5
32
total_loop_conversion_efficiency
X
3
246
Y
3
72
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
29
Numeric

1
17
Name
5
31
total_required_aperture_for_SM1
X
3
246
Y
3
96
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
30
Numeric

1
17
Name
5
20
total_tracking_power
X
3
246
Y
3
144
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
2
TroughLoop

1
6
Name
5
19
trough_loop_control
X
3
24
Y
3
807
Width
3
815
Height
3
403
Tool Tip
5
0
Numeric

1
17
Name
5
17
washing_frequency
X
3
195
Y
3
606
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
42
Numeric

1
17
Name
5
20
water_usage_per_wash
X
3
195
Y
3
582
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
41
Numeric

1
17
Name
5
15
wind_stow_speed
X
3
246
Y
3
291
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
2

89
DISCARD_UNUSED_latitude
3
1
Site latitude
deg
Physical Trough Solar Field
0
8
1
1
1
1
0
Default
D_cpnt
3
3
Interconnect component diameters
m
Physical Trough Solar Field
0
8
1
3
1
1
0
Default
FIELD_COPY_I_bn_des
3
1
Design point DNI
W/m²
Physical Trough Solar Field
0
8
1
1
1
1
950
Numeric
FIELD_COPY_T_loop_in_des
3
1
Loop inlet HTF temperature
°C
Physical Trough Solar Field
0
8
1
1
1
1
293
Numeric
FIELD_COPY_T_loop_out
3
1
Loop outlet HTF temperature
°C
Physical Trough Solar Field
0
8
1
1
1
1
391
Numeric
FIELD_COPY_nLoops
3
1
Actual number of loops
 
Physical Trough Solar Field
0
8
1
1
1
1
8
Numeric
FIELD_COPY_solar_mult
3
1
Actual solar multiple
 
Physical Trough Solar Field
0
8
1
1
1
1
2
Numeric
FieldConfig
3
1
 
 
 
0
8
1
1
1
1
0
Default
Fluid
3
1
 
 
 
0
8
1
1
1
1
18
Default
HDR_rough
3
1
Header pipe roughness
m
Physical Trough Solar Field
0
2
1
1
1
1
4.6e-05
Numeric
K_cpnt
3
3
Interconnect component minor loss coefficients
-
Physical Trough Solar Field
0
8
1
3
1
1
0
Default
L_cpnt
3
3
Interconnect component lengths
m
Physical Trough Solar Field
0
8
1
3
1
1
0
Default
L_rnr_pb
3
1
Length of runner pipe in pb
m
Physical Trough Solar Field
0
2
1
1
1
1
25
Numeric
L_rnr_per_xpan
3
1
Threshold length of straight runner pipe without an expansion loop
m
Physical Trough Solar Field
0
2
1
1
1
1
70
Numeric
L_xpan_hdr
3
1
Combined perpendicular lengths of each header expansion loop
m
Physical Trough Solar Field
0
2
1
1
1
1
20
Numeric
L_xpan_rnr
3
1
Combined perpendicular lengths of each runner expansion loop
m
Physical Trough Solar Field
0
2
1
1
1
1
20
Numeric
Min_rnr_xpans
3
1
Minimum number of expansion loops per single-diameter runner section
-
Physical Trough Solar Field
0
2
1
1
1
1
1
Numeric
N_hdr_per_xpan
3
1
Number of collector loops per expansion loop
-
Physical Trough Solar Field
0
2
1
1
1
1
2
Numeric
N_max_hdr_diams
3
1
Max header diameters
-
Physical Trough Solar Field
0
2
1
1
1
1
10
Numeric
Pipe_hl_coef
3
1
Piping thermal loss coefficient
W/m²-K
Physical Trough Solar Field
0
2
1
1
1
1
0.25
Numeric
Row_Distance
3
1
Row spacing
m
Physical Trough Solar Field
0
2
1
1
1
1
15
Numeric
SCA_drives_elec
3
1
Tracking power per SCA
W/sca
Physical Trough Solar Field
0
2
1
1
1
1
125
Numeric
SolarAz
3
1
Initial condition for solar azimuth angle
 
 
0
9
1
1
1
1
0
Default
T_fp
3
1
Freeze protection temp
°C
Physical Trough Solar Field
0
2
1
1
1
1
50
Numeric
Type_cpnt
3
3
Interconnect component type
-
Physical Trough Solar Field
0
8
1
3
1
1
0
Default
V_hdr_cold_max
3
1
Header design max flow velocity
m/s
Physical Trough Solar Field
0
2
1
1
1
1
3
Numeric
V_hdr_cold_min
3
1
Header design min flow velocity
m/s
Physical Trough Solar Field
0
2
1
1
1
1
2
Numeric
V_hdr_hot_max
3
1
 
m/s
Physical Trough Solar Field
0
2
1
1
1
1
3
Numeric
V_hdr_hot_min
3
1
 
m/s
Physical Trough Solar Field
0
2
1
1
1
1
2
Numeric
accept_init
3
1
In acceptance testing mode - require steady-state startup
 
 
0
8
1
1
1
1
0
Default
accept_loc
3
1
In acceptance testing mode - temperature sensor location (1=hx,2=loop)
 
 
0
8
1
1
1
1
1
Default
accept_mode
3
1
Acceptance testing mode? (1=yes, 0=no)
 
 
0
8
1
1
1
1
0
Default
azimuth
3
1
Collector azimuth
deg
Physical Trough Solar Field
0
2
1
1
1
1
0
Numeric
calc_design_pipe_vals
3
1
Calculate temps and pressures at design conditions for runners and headers
-
Physical Trough Solar Field
0
2
1
1
1
1
1
Default
combo_FieldConfig
3
1
Number of field subsections
 
Physical Trough Solar Field
15
1|2|4|6|8|10|12
2
1
1
1
1
0
Choice
combo_feather
3
1
Allow partial defocusing
 
Physical Trough Solar Field
22
Sequenced|Simultaneous
2
1
1
1
1
1
Choice
combo_htf_type
3
1
Field HTF fluid
 
Physical Trough Solar Field
143
Hitec Solar Salt|Caloria HT 43|Hitec XL|Therminol VP-1|Hitec|Dowtherm Q|Dowtherm RP|Therminol 59|Therminol 66|Pressurized Water|User-defined...
2
1
1
1
1
3
Choice
cspdtr_loop_hce_heat_loss
3
1
Loop receiver heat loss
 
 
0
9
1
1
1
1
1
Default
custom_sf_pipe_sizes
3
1
Use custom solar field pipe diams, wallthks, and lengths
-
Physical Trough Solar Field
0
2
1
1
1
1
0
Default
eta_pump
3
1
HTF pump efficiency
 
Physical Trough Solar Field
0
2
1
1
1
1
0.85
Numeric
field_fl_props
3
3
 
 
 
0
0
1
3
1
9
1 7 0 0 0 0 0 0 0 

Default
field_htf_cp_avg
3
1
field htf spec heat at avg T
kJ/kg-K
 
0
8
1
1
1
1
0
Default
field_htf_max_operating_temp
3
1
Field HTF max operating temp
°C
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
field_htf_min_operating_temp
3
1
Field HTF min operating temp
°C
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
field_thermal_output
3
1
Actual field thermal output
MWt
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
fixed_land_area
3
1
Solar field area
acres
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
fluid_dens_inlet_temp
3
1
 
 
Physical Trough Solar Field
0
8
1
1
1
1
0
Default
fluid_dens_outlet_temp
3
1
 
 
Physical Trough Solar Field
0
8
1
1
1
1
0
Default
fthrctrl
3
1
Defocusing strategy input
 
 
0
8
1
1
1
1
0
Default
fthrok
3
1
Allow partial defocusing
 
Physical Trough Solar Field
0
3
1
1
1
1
1
CheckBox
loop_optical_efficiency
3
1
Loop optical efficiency
 
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
m_dot_htfmax
3
1
Max single loop flow rate
kg/s
Physical Trough Solar Field
0
2
1
1
1
1
12
Numeric
m_dot_htfmin
3
1
Min single loop flow rate
kg/s
Physical Trough Solar Field
0
2
1
1
1
1
0.2
Numeric
max_field_flow_velocity
3
1
Max field flow velocity
m/s
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
mc_bal_cold
3
1
Cold piping thermal inertia
kWht/K-MWt
Physical Trough Solar Field
0
2
1
1
1
1
0.2
Numeric
mc_bal_hot
3
1
Hot piping thermal inertia
kWht/K-MWt
Physical Trough Solar Field
0
2
1
1
1
1
0.2
Numeric
mc_bal_sca
3
1
Field loop piping thermal inertia
Wht/K-m
Physical Trough Solar Field
0
2
1
1
1
1
4.5
Numeric
min_field_flow_velocity
3
1
Min field flow velocity
m/s
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
min_inner_diameter
3
1
Minimum absorber inner diameter in loop
 
 
0
9
1
1
1
1
0.066
Default
nSCA
3
1
Number of assemblies per loop
 
 
0
9
1
1
1
1
8
Default
non_solar_field_land_area_multiplier
3
1
Non-solar field land area multiplier
 
Physical Trough Solar Field
0
2
1
1
1
1
1.4
Numeric
northsouth_field_sep
3
1
North/south separation between subfields. 0 = SCAs are touching
m
Physical Trough Solar Field
0
2
1
1
1
1
20
Numeric
object 11
3
1
 
 
 
0
0
1
1
1
1
0
Numeric
offset_xpan_hdr
3
1
Location of first header expansion loop. 1 = after first collector loop
-
Physical Trough Solar Field
0
2
1
1
1
1
1
Numeric
p_start
3
1
Collector startup energy
kWhe/sca
Physical Trough Solar Field
0
2
1
1
1
1
0.021
Default
rec_qf_delay
3
1
Receiver startup delay energy fraction
-
Physical Trough Solar Field
0
2
1
1
1
1
0.25
Default
rec_su_delay
3
1
Receiver startup delay time
hr
Physical Trough Solar Field
0
2
1
1
1
1
0.2
Default
required_number_of_loops_for_SM1
3
1
Required number of loops, SM=1
 
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
sf_hdr_diams
3
3
Custom header diameters
m
Physical Trough Solar Field
0
2
1
3
1
1
-1
Default
sf_hdr_lengths
3
3
Custom header lengths
m
Physical Trough Solar Field
0
2
1
3
1
1
-1
Default
sf_hdr_wallthicks
3
3
Custom header wall thicknesses
m
Physical Trough Solar Field
0
2
1
3
1
1
-1
Default
sf_rnr_diams
3
3
Custom runner diameters
m
Physical Trough Solar Field
0
2
1
3
1
1
-1
Default
sf_rnr_lengths
3
3
Custom runner lengths
m
Physical Trough Solar Field
0
2
1
3
1
1
-1
Default
sf_rnr_wallthicks
3
3
Custom runner wall thicknesses
m
Physical Trough Solar Field
0
2
1
3
1
1
-1
Default
sf_type
3
1
Solar field type, 1 = trough, 2 = tower
1/2
 
0
9
1
1
1
1
1
Default
single_loop_aperature
3
1
Single loop aperture
m²
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
theta_dep
3
1
Deploy angle
deg
Physical Trough Solar Field
0
2
1
1
1
1
10
Numeric
theta_stow
3
1
Stow angle
deg
Physical Trough Solar Field
0
2
1
1
1
1
170
Numeric
tilt
3
1
Collector tilt
deg
Physical Trough Solar Field
0
2
1
1
1
1
0
Numeric
total_aperture
3
1
Total aperture reflective area
m²
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
total_land_area
3
1
Total land area
acres
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
total_loop_conversion_efficiency
3
1
Total loop conversion efficiency
 
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
total_required_aperture_for_SM1
3
1
Total required aperture, SM=1
m²
Physical Trough Solar Field
0
8
1
1
1
1
0
Numeric
total_tracking_power
3
1
Total tracking power
W
Physical Trough Solar Field
0
8
1
1
1
1
100
Default
track_mode
3
1
 
 
 
0
8
1
1
1
1
1
Default
trough_loop_control
3
2
Configuration of collector assemblies in loop array
 
Physical Trough Solar Field
0
9
1
2
1
25
8 1 1 8 1 1 7 1 1 6 1 1 5 1 1 4 1 1 3 1 1 2 1 1 1 

TroughLoop
washing_frequency
3
1
Washes per year
 
Physical Trough Solar Field
0
2
1
1
1
1
63
Numeric
water_usage_per_wash
3
1
Water usage per wash
L/m²,aper.
Physical Trough Solar Field
0
2
1
1
1
1
0.275
Numeric
wind_stow_speed
3
1
Wind stow speed
m/s
Physical Trough Solar Field
0
2
1
1
1
1
25
Default

9227
/*
Doesn't work to create functions in 'equations' section
cspdtr_solf_userhtf_dens = define(tempC) {
	return tempC *10;
};
*/
equations{ 'FIELD_COPY_solar_mult' } = define() {
	return ${solar_mult}; };
	
equations{ 'FIELD_COPY_I_bn_des' } = define() {
	return ${I_bn_des}; };
	
equations{ 'FIELD_COPY_T_loop_in_des' } = define() {
	return ${T_loop_in_des}; };

equations{ 'FIELD_COPY_T_loop_out' } = define() {
	return ${T_loop_out}; };

equations{ 'FIELD_COPY_nLoops' } = define() {
	return ${nLoops}; };

equations{ 'defocus' } = define() {
	// setting the default and setting this value in the 'on_load' event don't
	// work for some reason.  this has to be set here, on it's own.
	return 1;
};

equations{ 'max_field_flow_velocity' } = define() {
	return ${m_dot_htfmax}*4/(${fluid_dens_outlet_temp} * pi() * 
				pow( ${min_inner_diameter},2) );
};

equations{ 'min_field_flow_velocity' } = define() {
	return ${m_dot_htfmin}*4/(${fluid_dens_inlet_temp} * pi() * 
				pow(${min_inner_diameter},2) );
};

equations{ 'fthrctrl' } = define() {
	return ${combo_feather}+1;
};

equations{ 'field_htf_cp_avg' } = define() {
	if (${combo_htf_type} < 10 )
		return substance_specific_heat( ${Fluid}, 0.5*(${T_loop_in_des}+${T_loop_out}) );
	else
		return substance_userhtf(${field_fl_props},0.5*(${T_loop_in_des}+${T_loop_out}),"specific heat"); 
		//return cspdtr_tes_userhtf( 1, 0.5*(${T_loop_in_des}+${T_loop_out}) );
};

equations{ 'FieldConfig' } = define() {
	if( ${combo_FieldConfig} == 0 )
	{
		return 1;
	}
	else
	{
		return 2 * ${combo_FieldConfig};
	}
};

equations{ 'Fluid' } = define() {
	return ?${combo_htf_type}
	[
		18, //    18.) Nitrate Salt**
		19, //    19.) Caloria HT 43**
		20, //    20.) Hitec XL**
		21, //    21.) Therminol VP-1**
		22, //    22.) Hitec**
		23, //    23.) Dowtherm Q**
		24, //    24.) Dowtherm RP**
		30, //    30.) Therminol 59
		29, //    29.) Therminol 66    
		31, //    31.) Pressurized Water    
		50  //    user defined HTF
	];
};

equations{ 'min_inner_diameter' } = define() {
	aLoopCtl = ${trough_loop_control};
	
	diam_inputs[0] = ${csp_dtr_hce_diam_absorber_inner_1};
	diam_inputs[1] = ${csp_dtr_hce_diam_absorber_inner_2};
	diam_inputs[2] = ${csp_dtr_hce_diam_absorber_inner_3};
	diam_inputs[3] = ${csp_dtr_hce_diam_absorber_inner_4};

	minval = diam_inputs[0];

	for (i=0; i<aLoopCtl[0]; i++)
	{
		hce_t = min(max(aLoopCtl[i*3+2],1),4) - 1;
		if (diam_inputs[hce_t]<minval)
			minval = diam_inputs[hce_t];
	}
	
	return minval;
};

equations{ 'single_loop_aperature' } = define() {
	aLoop = ${trough_loop_control};
	nsca = aLoop[0];
	sca_ap[0] = ${csp_dtr_sca_aperture_1};
	sca_ap[1] = ${csp_dtr_sca_aperture_2};
	sca_ap[2] = ${csp_dtr_sca_aperture_3};
	sca_ap[3] = ${csp_dtr_sca_aperture_4};

	total_ap = 0;
	for (i=0;i<nsca;i++)
	{
		sca_t = min(max(aLoop[1+i*3],1),4) - 1;
		total_ap = total_ap + sca_ap[ sca_t ];
	}

	return total_ap;
};

// loop heat loss for total loop conversion efficiency
equations{ 'cspdtr_loop_hce_heat_loss' } = define() {
	aLoopCtl = ${trough_loop_control};
	ncol = aLoopCtl[0];
	
	total_len = 0;
	ibn = ${I_bn_des};

	hce_hl[0] = ${csp_dtr_hce_design_heat_loss_1};
	hce_hl[1] = ${csp_dtr_hce_design_heat_loss_2};
	hce_hl[2] = ${csp_dtr_hce_design_heat_loss_3};
	hce_hl[3] = ${csp_dtr_hce_design_heat_loss_4};

	sca_len[0] = ${csp_dtr_sca_length_1};
	sca_len[1] = ${csp_dtr_sca_length_2};
	sca_len[2] = ${csp_dtr_sca_length_3};
	sca_len[3] = ${csp_dtr_sca_length_4};

	sca_ap[0] = ${csp_dtr_sca_aperture_1};
	sca_ap[1] = ${csp_dtr_sca_aperture_2};
	sca_ap[2] = ${csp_dtr_sca_aperture_3};
	sca_ap[3] = ${csp_dtr_sca_aperture_4};

	derate = 0;
	for (i=0;i<ncol;i++)
	{
		sca_t = min(max(aLoopCtl[1+i*3],1),4) - 1;
		hce_t = min(max(aLoopCtl[2+i*3],1),4) - 1;
		total_len = total_len + sca_len[ sca_t ];
		derate = derate + sca_len[ sca_t ] * (1 - ( hce_hl[ hce_t ] / ( ibn * sca_ap[sca_t] / sca_len[sca_t] ) ));
	}

	if (total_len != 0.0)
		derate = derate/total_len;
	else
		derate = -777.7;

	return derate;
};

equations{ 'total_aperture' } = define() {
	return ${single_loop_aperature} * ${FIELD_COPY_nLoops}; };

equations{ 'required_number_of_loops_for_SM1' } = define() {
	return ceil(${total_required_aperture_for_SM1}/${single_loop_aperature}); };

equations{ 'total_loop_conversion_efficiency' } = define() {
	return ${loop_optical_efficiency}*${cspdtr_loop_hce_heat_loss}; 
};

equations{ 'loop_optical_efficiency' } = define() {
	aLoopCtl = ${trough_loop_control};
	if (#aLoopCtl != aLoopCtl[0]*3+1) return -888.8;
	ncol = aLoopCtl[0];

	// sca efficiency
	sca_eff[0] = ${csp_dtr_sca_calc_sca_eff_1};
	sca_eff[1] = ${csp_dtr_sca_calc_sca_eff_2};
	sca_eff[2] = ${csp_dtr_sca_calc_sca_eff_3};
	sca_eff[3] = ${csp_dtr_sca_calc_sca_eff_4};

	sca_len[0] = ${csp_dtr_sca_length_1};
	sca_len[1] = ${csp_dtr_sca_length_2};
	sca_len[2] = ${csp_dtr_sca_length_3};
	sca_len[3] = ${csp_dtr_sca_length_4};

	total_len = 0;
	weighted_sca_eff = 0.0;
	for (i=0;i<ncol;i++)
	{
		sca_t = min(max(aLoopCtl[1+i*3],1),4) - 1;
		total_len = total_len + sca_len[ sca_t ];
		weighted_sca_eff = weighted_sca_eff + sca_len[ sca_t ] * sca_eff[ sca_t ];
	}

	if (total_len != 0.0)
		weighted_sca_eff = weighted_sca_eff/total_len;
	else
		weighted_sca_eff = -777.7;

	// hce efficiency
	hce_eff[0] = ${csp_dtr_hce_optical_eff_1};
	hce_eff[1] = ${csp_dtr_hce_optical_eff_2};
	hce_eff[2] = ${csp_dtr_hce_optical_eff_3};
	hce_eff[3] = ${csp_dtr_hce_optical_eff_4};

	total_len = 0;
	weighted_hce_eff = 0.0;
	for (i=0;i<ncol;i++)
	{
		hce_t = min(max(aLoopCtl[2+i*3],1),4) - 1;
		sca_t = min(max(aLoopCtl[1+i*3],1),4) - 1;
		total_len = total_len + sca_len[ sca_t ];
		weighted_hce_eff = weighted_hce_eff + sca_len[ sca_t ] * hce_eff[ hce_t ];
	}

	if (total_len != 0.0)
		weighted_hce_eff = weighted_hce_eff/total_len;
	else
		weighted_hce_eff = -777.7;

	return weighted_hce_eff*weighted_sca_eff; 
};


equations{ 'field_thermal_output' } = define() {
	return ${I_bn_des}*${total_loop_conversion_efficiency}*${total_aperture}/1.E6;  // default now = 626.008
	//return ${solar_mult}*${P_ref}/${eta_ref};   // default = 623.596
};

equations{ 'total_required_aperture_for_SM1' } = define() {
	return ${q_pb_design}/( ${I_bn_des}*${total_loop_conversion_efficiency} )*1000000.0; 
};

equations{ 'total_land_area' } = define() {
	return ${fixed_land_area} * ${non_solar_field_land_area_multiplier};
};


//max_collector_width defined on Physical Trough Collector Header page
equations{ 'fixed_land_area' } = define() {
	return ${total_aperture} * ${Row_Distance} / ${max_collector_width} * 0.0002471;
};

equations{ 'SCAInfoArray' } = define() {
	a = ${trough_loop_control};
	assemblies = a[0];
	for (i=0; i<assemblies; i++)	{
		//8.4.2016 twn: Switched column numbers
		p1[i][1] = a[1+3*i];
		p1[i][0] = a[2+3*i];
	}

	return p1;
};

equations{ 'SCADefocusArray' } = define() {
	a = ${trough_loop_control};
	assemblies = a[0];
	for (i=0; i<assemblies; i++)	{
		p1[i] = a[3+3*i];
	}

	return p1;
};

equations{ 'total_tracking_power' } = define() {
	return ${nSCA}*${nLoops}*${SCA_drives_elec};
};

equations{ 'K_cpnt' } = define() {
	K_cpnt_0 = [0.9, 0, 0.19, 0, 0.9, -1, -1, -1, -1, -1, -1];
	K_cpnt_1 = [0, 0.6, 0.05, 0, 0.6, 0, 0.6, 0, 0.42, 0, 0.15];
	K_cpnt_i = [0.05, 0, 0.42, 0, 0.6, 0, 0.6, 0, 0.42, 0, 0.15];
	K_cpnt_x_2 = [0.05, 0, 0.42, 0, 0.6, 0, 0.6, 0, 0.15, 0.6, 0];
	K_cpnt_x_1 = [0.9, 0, 0.19, 0, 0.9, -1, -1, -1, -1, -1, -1];

	K = [];
	K[0] = K_cpnt_0;
	K[1] = K_cpnt_1;

	for( i=0; i<${nSCA} - 1; i++) {
		K[i + 2] = K_cpnt_i;
	}

	K[${nSCA} + 1] = K_cpnt_x_2;
	K[${nSCA} + 2] = K_cpnt_x_1;

	return K;
};

equations{ 'D_cpnt' } = define() {
	D_cpnt_0 = [0.085, 0.0635, 0.085, 0.0635, 0.085, -1, -1, -1, -1, -1, -1];
	D_cpnt_1 = [0.085, 0.085, 0.085, 0.0635, 0.0635, 0.0635, 0.0635, 0.0635, 0.0635, 0.0635, 0.085];
	D_cpnt_i = [0.085, 0.0635, 0.0635, 0.0635, 0.0635, 0.0635, 0.0635, 0.0635, 0.0635, 0.0635, 0.085];
	D_cpnt_x_2 = [0.085, 0.0635, 0.0635, 0.0635, 0.0635, 0.0635, 0.0635, 0.0635, 0.085, 0.085, 0.085];
	D_cpnt_x_1 = [0.085, 0.0635, 0.085, 0.0635, 0.085, -1, -1, -1, -1, -1, -1];

	D = [];
	D[0] = D_cpnt_0;
	D[1] = D_cpnt_1;

	for( i=0; i<${nSCA} - 1; i++) {
		D[i + 2] = D_cpnt_i;
	}

	D[${nSCA} + 1] = D_cpnt_x_2;
	D[${nSCA} + 2] = D_cpnt_x_1;

	return D;
};

equations{ 'L_cpnt' } = define() {
	L_cpnt_0 = [0, 0, 0, 0, 0, -1, -1, -1, -1, -1, -1];
	L_cpnt_1 = [0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0];
	L_cpnt_i = [0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0];
	L_cpnt_x_2 = [0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0];
	L_cpnt_x_1 = [0, 0, 0, 0, 0, -1, -1, -1, -1, -1, -1];

	L = [];
	L[0] = L_cpnt_0;
	L[1] = L_cpnt_1;

	for( i=0; i<${nSCA} - 1; i++) {
		L[i + 2] = L_cpnt_i;
	}

	L[${nSCA} + 1] = L_cpnt_x_2;
	L[${nSCA} + 2] = L_cpnt_x_1;

	return L;
};

equations{ 'Type_cpnt' } = define() {
	Type_cpnt_0 = [0, 1, 0, 1, 0, -1, -1, -1, -1, -1, -1];
	Type_cpnt_1 = [1, 0, 0, 2, 0, 1, 0, 2, 0, 2, 0];
	Type_cpnt_i = [0, 2, 0, 2, 0, 1, 0, 2, 0, 2, 0];
	Type_cpnt_x_2 = [0, 2, 0, 2, 0, 1, 0, 2, 0, 0, 1];
	Type_cpnt_x_1 = [0, 1, 0, 1, 0, -1, -1, -1, -1, -1, -1];

	T = [];
	T[0] = Type_cpnt_0;
	T[1] = Type_cpnt_1;

	for( i=0; i<${nSCA} - 1; i++) {
		T[i + 2] = Type_cpnt_i;
	}

	T[${nSCA} + 1] = Type_cpnt_x_2;
	T[${nSCA} + 2] = Type_cpnt_x_1;

	return T;
};

3556
on_load{'Physical Trough Solar Field'} = define() {
	on_change{'combo_htf_type'}();
	on_change{'trough_loop_control'}();
	on_change{'fthrok'}();

	//msgbox("value of 'assemblies_per_loop' is '" + ${assemblies_per_loop} + "'.");
	//msgbox("value of 'loop_optical_efficiency' is '" + ${loop_optical_efficiency} + "'.");
};

on_change{'fthrok'} = define() {
	bChecked = value('fthrok');
    enable("combo_feather", bChecked);
};

function cspdtr_solf_userhtf_dens(temperatureC) {
	// density is property 2
	return cspdtr_solf_userhtf(2, temperatureC);
}

function cspdtr_solf_userhtf(col, temperatureC) {
	aUserDefHTF = value("field_fl_props");
	
	rows = #aUserDefHTF;
	cols = #aUserDefHTF[0];

	if (cols != 7 || rows < 2 || col < 0 || col >= 7) return 1.0;
	for (i=1;i<rows;i++)
	{
		if (aUserDefHTF[i][0] >= temperatureC)
		{
			/* interp and return */
			xmin = aUserDefHTF[i-1][0];
			xmax = aUserDefHTF[i][0];
			ymin = aUserDefHTF[i-1][col];
			ymax = aUserDefHTF[i][col];
			if (xmax <= xmin) return 1.0;

			percent = (temperatureC-xmin)/(xmax-xmin);
			return ymin + percent*(ymax-ymin);
		}
	}

	return aUserDefHTF[rows-1][col];
}

on_change{'combo_htf_type'} = define() {

    bUserDefined = (value('combo_htf_type') == 10);
    enable("field_fl_props", bUserDefined);
    enable('field_htf_min_operating_temp',!bUserDefined);
    enable('field_htf_max_operating_temp',!bUserDefined);
    
	// outlet temp and max field flow velocity
	if (${combo_htf_type} < 10 )
		fluid_dens_outlet_temp = substance_density( ${Fluid}, ${T_loop_out} );
	else
		fluid_dens_outlet_temp = cspdtr_solf_userhtf_dens( ${T_loop_out} );

	value('fluid_dens_outlet_temp',fluid_dens_outlet_temp);
	//max_field_flow_velocity = ${m_dot_htfmax}*4/(fluid_dens_outlet_temp * pi() * pow( ${min_inner_diameter},2) );
	//value('max_field_flow_velocity',max_field_flow_velocity);

	// inlet temp and min field flow velocity
	if (${combo_htf_type} < 10 )
		fluid_dens_inlet_temp = substance_density( ${Fluid}, ${T_loop_in_des} );
	else
		fluid_dens_inlet_temp = cspdtr_solf_userhtf_dens( ${T_loop_in_des} );

	value('fluid_dens_inlet_temp',fluid_dens_inlet_temp);
	//min_field_flow_velocity = ${m_dot_htfmin}*4/(fluid_dens_inlet_temp * pi() * pow(${min_inner_diameter},2) );
	//value('min_field_flow_velocity',min_field_flow_velocity);
	
	// max operating temp
	field_htf_max_operating_temp = ?${combo_htf_type}
	[
		593,/* fluid num 18 */
		315,/* fluid num 19 */
		500,/* fluid num 20 */
		400,/* fluid num 21 */
		538,/* fluid num 22 */
		330,/* fluid num 23 */
		330,/* fluid num 24 */
		315,/* fluid num 30 */
		345,/* fluid num 29 */
		220,/* fluid num 31 */
		0   /* user fluid */
	];
	value('field_htf_max_operating_temp',field_htf_max_operating_temp);
	
	// min operating temp
	field_htf_min_operating_temp = ?${combo_htf_type}
	[
		238, /* fluid num 18 */
		-12, /* fluid num 19 */
		120, /* fluid num 20 */
		12,  /* fluid num 21 */
		142, /* fluid num 22 */
		-35, /* fluid num 23 */
		0,   /* fluid num 24 */
		-45, /* fluid num 30 */
		0,   /* fluid num 29 */
		10,  /* fluid num 31 */
		0    /* user fluid */
	];
	value('field_htf_min_operating_temp',field_htf_min_operating_temp);
	
	hx_derate_update_module();
};

on_change{"field_fl_props"} = define(){
	hx_derate_update_module();

};

on_change{'trough_loop_control'} = define() {
	//msgbox("assemblies_per_loop updated");

	aLoopCtl = ${trough_loop_control};
	if (#aLoopCtl != aLoopCtl[0]*3+1)
		msgbox('Array from loop control has inconsistent values. (#values != array[0]*3+1)');
	value('nSCA',aLoopCtl[0]);
};

