Molten Salt Tower Receiver
884
632
42
Numeric

1
17
Name
5
5
D_rec
X
3
258
Y
3
252
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
3
GroupBox

1
8
Name
5
9
GroupBox1
X
3
6
Y
3
123
Width
3
422
Height
3
182
Tool Tip
5
0
Caption
5
29
Tower and Receiver Dimensions
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox2
X
3
6
Y
3
309
Width
3
422
Height
3
146
Tool Tip
5
0
Caption
5
33
Receiver Heat Transfer Properties
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox3
X
3
438
Y
3
9
Width
3
438
Height
3
317
Tool Tip
5
0
Caption
5
18
Materials and Flow
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox4
X
3
6
Y
3
459
Width
3
422
Height
3
167
Tool Tip
5
0
Caption
5
20
Design and Operation
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox5
X
3
438
Y
3
483
Width
3
438
Height
3
143
Tool Tip
5
0
Caption
5
13
Piping Losses
Bold
2
1
Numeric

1
17
Name
5
5
H_rec
X
3
258
Y
3
228
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
2
Numeric

1
17
Name
5
8
N_panels
X
3
258
Y
3
276
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4
Label

1
13
Name
5
19
Optimization_Notice
X
3
12
Y
3
141
Width
3
408
Height
3
63
Tool Tip
5
0
Caption
5
141
Solar field geometry optimization on the Heliostat Field page calculates new values for tower height, receiver height, and receiver diameter.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Numeric

1
17
Name
5
18
REC_COPY_Q_rec_des
X
3
258
Y
3
48
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
23
REC_COPY_T_htf_cold_des
X
3
258
Y
3
96
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
22
REC_COPY_T_htf_hot_des
X
3
258
Y
3
72
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
REC_COPY_solarm
X
3
258
Y
3
24
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
3
THT
X
3
258
Y
3
204
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
33
Choice

1
9
Name
5
23
csp.pt.rec.flow_pattern
X
3
609
Y
3
117
Width
3
100
Height
3
21
Tool Tip
5
0
Items
6
8
1
2
3
4
5
6
7
8
Selection
3
0
TabOrder
3
26
Choice

1
9
Name
5
19
csp.pt.rec.htf_type
X
3
609
Y
3
27
Width
3
217
Height
3
24
Tool Tip
5
0
Items
6
3
Salt (60% NaNO3, 40% KNO3)
Salt (46.5% LiF, 11.5% NaF, 42% KF)
User-defined...
Selection
3
1
TabOrder
3
23
Choice

1
9
Name
5
24
csp.pt.rec.material_type
X
3
609
Y
3
93
Width
3
181
Height
3
21
Tool Tip
5
0
Items
6
1
Stainless AISI316
Selection
3
0
TabOrder
3
25
Numeric

1
17
Name
5
26
csp.pt.rec.max_flow_to_rec
X
3
258
Y
3
597
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
21
Numeric

1
17
Name
5
24
csp.pt.rec.max_oper_frac
X
3
258
Y
3
501
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
29
Numeric

1
17
Name
5
10
d_tube_out
X
3
258
Y
3
330
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
14
Numeric

1
17
Name
5
14
delta_flux_hrs
X
3
714
Y
3
450
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
0
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
7
epsilon
X
3
258
Y
3
378
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
5
Numeric

1
17
Name
5
8
eta_pump
X
3
258
Y
3
573
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
9
f_rec_min
X
3
258
Y
3
477
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
28
MaterialProperties

1
7
Name
5
14
field_fl_props
X
3
720
Y
3
57
Width
3
107
Height
3
28
Tool Tip
5
0
TabOrder
3
24
Numeric

1
17
Name
5
8
flux_max
X
3
714
Y
3
354
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
22
GroupBox

1
8
Name
5
11
groupbox123
X
3
438
Y
3
330
Width
3
438
Height
3
150
Tool Tip
5
0
Caption
5
33
Receiver Flux Modeling Parameters
Bold
2
1
Numeric

1
17
Name
5
8
hl_ffact
X
3
258
Y
3
426
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
20
Numeric

1
17
Name
5
11
n_flux_days
X
3
714
Y
3
426
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
0
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
8
n_flux_x
X
3
714
Y
3
402
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
22
GroupBox

1
8
Name
5
8
object 4
X
3
6
Y
3
9
Width
3
422
Height
3
114
Tool Tip
5
0
Caption
5
24
System Design Parameters
Bold
2
1
Image

1
8
Name
5
7
pctFlow
X
3
516
Y
3
150
Width
3
280
Height
3
163
Tool Tip
5
0
Image
7
Molten Salt Tower Receiver_pctFlow.png
Centered
2
1
Numeric

1
17
Name
5
13
piping_length
X
3
714
Y
3
573
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
19
piping_length_const
X
3
714
Y
3
525
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
18
piping_length_mult
X
3
714
Y
3
549
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
11
piping_loss
X
3
714
Y
3
501
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
piping_loss_tot
X
3
714
Y
3
597
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
rec_absorptance
X
3
258
Y
3
402
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
18
Numeric

1
17
Name
5
12
rec_hl_perm2
X
3
714
Y
3
378
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
12
rec_qf_delay
X
3
258
Y
3
549
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
32
Numeric

1
17
Name
5
12
rec_su_delay
X
3
258
Y
3
525
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
31
Numeric

1
17
Name
5
7
th_tube
X
3
258
Y
3
354
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
15

59
D_rec
3
1
Receiver diameter
m
Tower and Receiver
0
2
1
1
1
1
12.44
Default
Flow_type
3
1
Receiver flow pattern
 
Tower and Receiver
0
8
1
1
1
1
0
Default
H_rec
3
1
Receiver height
m
Tower and Receiver
0
2
1
1
1
1
15.49
Default
N_panels
3
1
Number of panels
 
Tower and Receiver
0
2
1
1
1
1
24
Default
REC_COPY_Q_rec_des
3
1
Receiver thermal power
MWt
Tower and Receiver
0
8
1
1
1
1
0
Default
REC_COPY_T_htf_cold_des
3
1
HTF cold temperature
°C
Tower and Receiver
0
8
1
1
1
1
0
Default
REC_COPY_T_htf_hot_des
3
1
HTF hot temperature
°C
Tower and Receiver
0
8
1
1
1
1
0
Default
REC_COPY_solarm
3
1
Solar multiple
 
Tower and Receiver
0
8
1
1
1
1
0
Default
THT
3
1
Tower height
m
Tower and Receiver
0
2
1
1
1
1
183.33
Default
conv_coupled
3
1
initialization conv_coupled
 
Tower and Receiver
0
8
1
1
1
1
2
Default
conv_forced
3
1
initialization conv_forced
 
Tower and Receiver
0
8
1
1
1
1
0
Default
conv_model
3
1
initialization 
 
Tower and Receiver
0
8
1
1
1
1
2
Default
conv_wind_dir
3
1
initialization 
 
Tower and Receiver
0
8
1
1
1
1
0
Default
csp.pt.rec.cav_ap_height
3
1
Aperture height
 
Tower and Receiver
0
8
1
1
1
1
0
Default
csp.pt.rec.cav_ap_hw_ratio
3
1
Aperture height to width ratio
 
Tower and Receiver
0
2
1
1
1
1
1.2
Default
csp.pt.rec.cav_lip_height_ratio
3
1
Lip to height ratio
m
Tower and Receiver
0
2
1
1
1
1
0.1
Default
csp.pt.rec.flow_pattern
3
1
Flow pattern
 
Tower and Receiver
15
1|2|3|4|5|6|7|8
2
1
1
1
1
0
Default
csp.pt.rec.htf_c_avg
3
1
cavg
 
Tower and Receiver
0
8
1
1
1
1
0
Default
csp.pt.rec.htf_t_avg
3
1
tavg
 
Tower and Receiver
0
8
1
1
1
1
0
Default
csp.pt.rec.htf_type
3
1
HTF type
 
Tower and Receiver
75
Salt (60% NaNO3 40% KNO3)|Salt (46.5% LiF 11.5% NaF 42% KF)|User-defined...
2
1
1
1
1
0
Default
csp.pt.rec.material_type
3
1
Material type
 
Tower and Receiver
17
Stainless AISI316
2
1
1
1
1
0
Default
csp.pt.rec.max_flow_to_rec
3
1
Maximum flow rate to receiver
kg/s
Tower and Receiver
0
8
1
1
1
1
0
Default
csp.pt.rec.max_oper_frac
3
1
Maximum receiver operation fraction
 
Tower and Receiver
0
2
1
1
1
1
1.2
Default
d_tube_out
3
1
Tube outer diameter
mm
Tower and Receiver
0
2
1
1
1
1
40
Default
delta_flux_hrs
3
1
Hourly frequency in flux map lookup
hours
Tower and Receiver
0
2
1
1
1
1
1
Default
eps_wavelength
3
3
 
 
Tower and Receiver
0
8
1
3
1
1
0
Default
epsilon
3
1
Coating emittance
 
Tower and Receiver
0
2
1
1
1
1
0.88
Default
eta_pump
3
1
Receiver HTF pump efficiency
 
Tower and Receiver
0
2
1
1
1
1
0.85
Default
f_rec_min
3
1
Minimum receiver turndown fraction
 
Tower and Receiver
0
2
1
1
1
1
0.25
Default
field_fl_props
3
3
Property table for user-defined HTF
 
Tower and Receiver
0
0
1
3
1
9
1 7 0 0 0 0 0 0 0 

MaterialProperties
flux_max
3
1
Maximum receiver flux
kWt/m²
Tower and Receiver
0
2
1
1
1
1
1200
Default
h_lip
3
1
Aperture lip height
m
Tower and Receiver
0
8
1
1
1
1
0
Default
h_rec_panel
3
1
Internal panel height
 
Tower and Receiver
0
8
1
1
1
1
0
Default
h_tower
3
1
h_tower
 
Tower and Receiver
0
8
1
1
1
1
0
Default
h_wind_meas
3
1
 
 
Tower and Receiver
0
8
1
1
1
1
10
Default
hl_ffact
3
1
Heat loss factor
 
Tower and Receiver
0
2
1
1
1
1
1
Default
is_iscc
3
1
is receiver page used with iscc
 
Tower and Receiver
0
8
1
1
1
1
0
Default
m_dot_htf_max
3
1
 
 
Tower and Receiver
0
8
1
1
1
1
0
Default
mat_tube
3
1
Reciever material type
 
Tower and Receiver
0
8
1
1
1
1
0
Default
n_flux_days
3
1
Number of days in flux map lookup
 
Tower and Receiver
0
2
1
1
1
1
8
Default
n_flux_x
3
1
Receiver flux map resolution
 
Tower and Receiver
0
10
1
1
1
1
12
Numeric
n_flux_y
3
1
Receiver flux map resolution - Y
 
Tower and Receiver
0
8
1
1
1
1
0
Default
piping_length
3
1
Piping length
m
Tower and Receiver
0
8
1
1
1
1
0
Default
piping_length_const
3
1
Piping length constant
m
Tower and Receiver
0
2
1
1
1
1
0
Default
piping_length_mult
3
1
Piping length multiplier
 
Tower and Receiver
0
2
1
1
1
1
1
Default
piping_loss
3
1
Piping heat loss coefficient
Wt/m
Tower and Receiver
0
2
1
1
1
1
35
Default
piping_loss_tot
3
1
Total piping loss
kWt
Tower and Receiver
0
8
1
1
1
1
0
Default
rec_absorptance
3
1
Coating absorptance
 
Tower and Receiver
0
2
1
1
1
1
0.94
Default
rec_angle
3
1
initialization rec_angle
 
Tower and Receiver
0
8
1
1
1
1
180
Default
rec_aspect
3
1
 
 
Tower and Receiver
0
8
1
1
1
1
0
Default
rec_d_spec
3
1
Aperture width
m
Tower and Receiver
0
2
1
1
1
1
15
Default
rec_hl_perm2
3
1
Estimated receiver heat loss
kWt/m²
Tower and Receiver
0
2
1
1
1
1
30
Default
rec_htf
3
1
Receiver HTF type
 
Tower and Receiver
0
8
1
1
1
1
0
Default
rec_qf_delay
3
1
Receiver startup delay energy fraction
 
Tower and Receiver
0
2
1
1
1
1
0.25
Default
rec_su_delay
3
1
Receiver startup delay time
hr
Tower and Receiver
0
2
1
1
1
1
0.2
Default
receiver_type
3
1
Receiver type
 
Tower and Receiver
33
External receiver|Cavity receiver
1
1
1
1
1
0
Default
th_tube
3
1
Tube wall thickness
mm
Tower and Receiver
0
2
1
1
1
1
1.25
Default
tower_technology
3
1
Tower technology type (0=MSPT,1=DSG)
 
Tower and Receiver
0
0
1
1
1
1
0
Default
user_fluid
3
3
User fluid
 
Tower and Receiver
0
8
1
3
1
1
0
Default

3647
/*
function csppt_tes_userhtf(col, temperatureC) {
	// specific heat is property 1
	// density is property 2
	aUserDefHTF = ${field_fl_props};
	
	rows = #aUserDefHTF;
	cols = #aUserDefHTF[0];

	if (cols != 7 || rows < 2 || col < 0 || col >= 7) return 1.0;
	for (i=1;i<rows;i++)
	{
		if (aUserDefHTF[i][0] >= temperatureC)
		{
			xmin = aUserDefHTF[i-1][0];
			xmax = aUserDefHTF[i][0];
			ymin = aUserDefHTF[i-1][col];
			ymax = aUserDefHTF[i][col];
			if (xmax <= xmin) return 1.0;

			percent = (temperatureC-xmin)/(xmax-xmin);
			return ymin + percent*(ymax-ymin);
		}
	}

	return aUserDefHTF[rows-1][col];
}
*/

equations{ 'm_dot_htf_max' } = define() {
	return ${csp.pt.rec.max_flow_to_rec} * 60 * 60;
};

equations{ 'rec_htf' } = define() {
	return ?${csp.pt.rec.htf_type}
	[
		17, // 17.) Salt (60% NaNO3, 40% KNO3)
		10, // 1.) Air
		50 // 36+) User specified (lookup tables)
   	];
};

equations{ 'mat_tube' } = define() {
	return ?${csp.pt.rec.material_type}
	[
		2 // Stainless AISI316
   	];
};

equations{ 'Flow_type' } = define() {
	return ${csp.pt.rec.flow_pattern} + 1;
};


equations{ 'csp.pt.rec.cav_lip_height' } = define() {
	return ${h_rec_panel}*${csp.pt.rec.cav_lip_height_ratio}; };

equations{ 'csp.pt.rec.cav_panel_height' } = define() {
	return ${csp.pt.rec.cav_ap_height}*1.1; };

equations{ 'csp.pt.rec.max_flow_to_rec' } = define() {
	return (${csp.pt.rec.max_oper_frac}*${Q_rec_des}*1e6)
 / (${csp.pt.rec.htf_c_avg}*1e3*(${T_htf_hot_des}-${T_htf_cold_des})); };

equations{ 'csp.pt.rec.htf_t_avg' } = define() {
	return (${T_htf_cold_des}+${T_htf_hot_des})/2; };

equations{ 'csp.pt.rec.cav_ap_height' } = define() {
	return ${rec_d_spec}*${csp.pt.rec.cav_ap_hw_ratio}; };


//equations{ 'csp.pt.rec.htf_c_avg' } = define() {
//	return  1; };


equations{ 'csp.pt.rec.htf_c_avg' } = define() {
	return  ?${csp.pt.rec.htf_type}
[
  /* htf type 0 - TRNSYS fluid number 17
     Salt (60% NaNO3, 40% KNO3) */
	substance_specific_heat(17, ${csp.pt.rec.htf_t_avg}), 
	/* htf type 1 - TRNSYS fluid number 10 
     Salt (46.5% LiF, 11.5%NaF, 42%KF)  */
	substance_specific_heat(10, ${csp.pt.rec.htf_t_avg}) , 
	/* htf type 2 - TRNSYS fluid number 36 
     user defined   */
	substance_userhtf(${field_fl_props},${csp.pt.rec.htf_t_avg},"specific heat") 
]; };


equations{ 'conv_coupled' } = define() {
	return 2;
};
equations{ 'conv_forced' } = define() {
	return 0;
};
equations{ 'conv_model' } = define() {
	return 2;
};
equations{ 'conv_wind_dir' } = define() {
	return 0;
};
equations{ 'rec_angle' } = define() {
	return 180;
};
equations{ 'user_fluid' } = define() {
	return ${field_fl_props};
};
equations{ 'eps_wavelength' } = define() {
	return [[4,1,1],[100,1,1]];
};
equations{ 'h_wind_meas' } = define() {
	return 10;
};

equations{ 'n_flux_y' } = define() {
	return 1;
};

equations{ 'rec_aspect' } = define() {
	aspect = 1;
	if (${D_rec} != 0) 
		aspect = ${H_rec} / ${D_rec};
	return aspect;
};

equations{ 'tower_technology' } = define() {
	return 0;	//MSPT
};

equations{ 'h_tower' } = define() {
	return ${THT};
};

equations{ 'n_flux_x' } = define() {
	return max(12, ${N_panels});
};

equations{ 'piping_length' } = define() {
     return ${THT}*${piping_length_mult}+${piping_length_const}; };

equations{ 'piping_loss_tot' } = define() {
     return ${piping_length} * ${piping_loss} / 1000.;
};


equations{ 'REC_COPY_solarm' } = define() {
	return ${solarm}; };
	
equations{ 'REC_COPY_Q_rec_des' } = define() {
	return ${Q_rec_des}; };
	
equations{ 'REC_COPY_T_htf_hot_des' } = define() {
	return ${T_htf_hot_des}; };
	
equations{ 'REC_COPY_T_htf_cold_des' } = define() {
	return ${T_htf_cold_des}; };
1630
// UI FORM NOT USED IN ANY CONFIGURATIONS SEE STARTUP SCRIPT
// SEE MSPT Receiver THAT SUPPORTS CAVITY AND EXTERNAL RECEIVER


on_load{'Molten Salt Tower Receiver'} = define() {
	on_change{"csp.pt.rec.htf_type"}();
};



//on_load{"ISCC Receiver and Powerblock"} = define() {
//	value("is_iscc", 1);
//	show("T_field_out_des_steam",false);
//};

on_change{"csp.pt.rec.htf_type"}=define(){
	
    bUserDefined = (value("csp.pt.rec.htf_type") == 2);
    enable("field_fl_props", bUserDefined);

/*
	// density
	if (${csp.pt.rec.htf_type} < 2 )
		fluid_dens_temp = substance_density( ${rec_htf}, ${csp.pt.rec.htf_t_avg} );
	else
		fluid_dens_temp = csppt_tes_userhtf( 2, ${csp.pt.rec.htf_t_avg} );
	value('csp.dtr.tes.fluid_dens',fluid_dens_temp);


	// specific heat
	if (${csp.pt.rec.htf_type} < 2 )
		fluid_sph_temp = substance_specific_heat( ${rec_htf}, ${csp.pt.rec.htf_t_avg} );
	else
		fluid_sph_temp = csppt_tes_userhtf( 1, ${csp.pt.rec.htf_t_avg} );
	value('csp.dtr.tes.fluid_sph',fluid_sph_temp);
*/
};

/*
function csppt_tes_userhtf(col, temperatureC) {
	// specific heat is property 1
	// density is property 2
	aUserDefHTF = value("field_fl_props");
	
	rows = #aUserDefHTF;
	cols = #aUserDefHTF[0];

	if (cols != 7 || rows < 2 || col < 0 || col >= 7) return 1.0;
	for (i=1;i<rows;i++)
	{
		if (aUserDefHTF[i][0] >= temperatureC)
		{
			xmin = aUserDefHTF[i-1][0];
			xmax = aUserDefHTF[i][0];
			ymin = aUserDefHTF[i-1][col];
			ymax = aUserDefHTF[i][col];
			if (xmax <= xmin) return 1.0;

			percent = (temperatureC-xmin)/(xmax-xmin);
			return ymin + percent*(ymax-ymin);
		}
	}

	return aUserDefHTF[rows-1][col];
}
*/