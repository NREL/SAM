Geothermal Plant and Equipment
846
746
48
CheckBox

1
9
Name
5
0
X
3
0
Y
3
0
Width
3
0
Height
3
0
Tool Tip
5
0
Caption
5
0
State
2
0
TabOrder
3
0
GroupBox

1
8
Name
5
9
GroupBox1
X
3
9
Y
3
9
Width
3
803
Height
3
245
Tool Tip
5
0
Caption
5
19
Plant Configuration
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox2
X
3
9
Y
3
258
Width
3
803
Height
3
101
Tool Tip
5
0
Caption
5
19
System Availability
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox3
X
3
9
Y
3
363
Width
3
473
Height
3
113
Tool Tip
5
0
Caption
5
19
Temperature Decline
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox4
X
3
489
Y
3
363
Width
3
323
Height
3
113
Tool Tip
5
0
Caption
5
16
Flash Technology
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox5
X
3
9
Y
3
477
Width
3
803
Height
3
227
Tool Tip
5
0
Caption
5
18
Pumping Parameters
Bold
2
1
Label

1
13
Name
5
6
Label1
X
3
399
Y
3
33
Width
3
47
Height
3
21
Tool Tip
5
0
Caption
5
2
kW
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
7
Label11
X
3
21
Y
3
87
Width
3
185
Height
3
21
Tool Tip
5
0
Caption
5
21
Conversion Plant Type
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
LossAdjustment

1
7
Name
5
6
adjust
X
3
486
Y
3
276
Width
3
294
Height
3
63
Tool Tip
5
0
TabOrder
3
24
Numeric

1
17
Name
5
16
ambient_pressure
X
3
651
Y
3
423
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
11
RadioChoice

1
11
Name
5
13
analysis_type
X
3
21
Y
3
33
Width
3
275
Height
3
44
Tool Tip
5
0
Selection
3
0
Items
6
2
Specify plant output:
Use exact number of wells:
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
4294967295
Numeric

1
17
Name
5
11
casing_size
X
3
342
Y
3
618
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
17
Choice

1
9
Name
5
18
conversion_subtype
X
3
297
Y
3
135
Width
3
208
Height
3
21
Tool Tip
5
0
Items
6
4
Unconstrained Single Flash
Constrained Single Flash
Unconstrained Dual Flash
Constrained Dual Flash
Selection
3
4294967295
TabOrder
3
4
RadioChoice

1
11
Name
5
15
conversion_type
X
3
21
Y
3
111
Width
3
119
Height
3
44
Tool Tip
5
0
Selection
3
0
Items
6
2
Binary
Flash
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
4294967295
RadioChoice

1
11
Name
5
12
decline_type
X
3
21
Y
3
387
Width
3
311
Height
3
47
Tool Tip
5
0
Selection
3
0
Items
6
2
Specify temp decline rate:
Calculate temp decline rate (EGS only)
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
4294967295
Numeric

1
17
Name
5
20
delta_pressure_equip
X
3
342
Y
3
546
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
14
Numeric

1
17
Name
5
11
design_temp
X
3
651
Y
3
156
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
7
Numeric

1
17
Name
5
12
dt_prod_well
X
3
651
Y
3
183
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
20
excess_pressure_pump
X
3
342
Y
3
570
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
15
CheckBox

1
9
Name
5
35
geotherm.egs_design_temp_autoselect
X
3
543
Y
3
129
Width
3
257
Height
3
21
Tool Tip
5
0
Caption
5
34
Automatically set to resource temp
State
2
1
TabOrder
3
5
Numeric

1
17
Name
5
30
geotherm.egs_design_temp_input
X
3
297
Y
3
186
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
6
TextEntry

1
11
Name
5
16
geotherm.errors1
X
3
66
Y
3
708
Width
3
745
Height
3
21
Tool Tip
5
0
Text
5
0
Editable
2
0
ForeColour
4
255
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
19
geotherm.net_output
X
3
651
Y
3
105
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
30
geotherm.plant_efficiency_used
X
3
651
Y
3
57
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Label

1
13
Name
5
23
geotherm_binary_message
X
3
165
Y
3
87
Width
3
353
Height
3
24
Tool Tip
5
0
Caption
5
0
TextColour
4
0
0
255
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
22
geotherm_flash_message
X
3
252
Y
3
87
Width
3
267
Height
3
24
Tool Tip
5
0
Caption
5
0
TextColour
4
255
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Numeric

1
17
Name
5
12
gross_output
X
3
651
Y
3
81
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
inj_casing_size
X
3
342
Y
3
666
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
17
Numeric

1
17
Name
5
11
inj_pump_hp
X
3
678
Y
3
573
Width
3
73
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
13
inj_well_diam
X
3
342
Y
3
642
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
18
Numeric

1
17
Name
5
9
nameplate
X
3
297
Y
3
33
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
1
Numeric

1
17
Name
5
9
num_wells
X
3
297
Y
3
57
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
2
Numeric

1
17
Name
5
15
num_wells_getem
X
3
651
Y
3
33
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Label

1
13
Name
5
8
object 7
X
3
27
Y
3
276
Width
3
423
Height
3
63
Tool Tip
5
0
Caption
5
96
System availability losses reduce the system output to represent system outages or other events.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Label

1
13
Name
5
9
object 77
X
3
444
Y
3
387
Width
3
36
Height
3
24
Tool Tip
5
0
Caption
5
4
%/yr
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Numeric

1
17
Name
5
22
plant_efficiency_input
X
3
297
Y
3
111
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
3
CheckBox

1
9
Name
5
16
prod_well_choice
X
3
483
Y
3
213
Width
3
309
Height
3
24
Tool Tip
5
0
Caption
5
45
Calculate temperature loss in production well
State
2
1
TabOrder
3
4294967295
Numeric

1
17
Name
5
10
pump_depth
X
3
678
Y
3
501
Width
3
73
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
pump_efficiency
X
3
342
Y
3
522
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
13
Numeric

1
17
Name
5
12
pump_size_hp
X
3
678
Y
3
549
Width
3
73
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
9
pump_work
X
3
678
Y
3
525
Width
3
73
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
26
specified_pump_work_amount
X
3
678
Y
3
630
Width
3
73
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
CheckBox

1
9
Name
5
17
specify_pump_work
X
3
585
Y
3
603
Width
3
167
Height
3
21
Tool Tip
5
0
Caption
5
17
Specify Pump Work
State
2
0
TabOrder
3
5
Numeric

1
17
Name
5
16
temp_decline_max
X
3
342
Y
3
441
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
9
Numeric

1
17
Name
5
17
temp_decline_rate
X
3
342
Y
3
387
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
8
Numeric

1
17
Name
5
13
well_diameter
X
3
342
Y
3
594
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
16
Numeric

1
17
Name
5
14
well_flow_rate
X
3
342
Y
3
498
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
12
Numeric

1
17
Name
5
13
wet_bulb_temp
X
3
651
Y
3
399
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
10

45
adjust
3
5
Performance adjustment
 
Geothermal Plant and Equipment
0
1
1
5
1
0
LossAdjustment
ambient_pressure
3
1
Ambient Pressure
psi
Geothermal Plant and Equipment
0
0
1
1
1
1
14.7
Numeric
analysis_type
3
1
 
 
Geothermal Plant and Equipment
0
0
1
1
1
1
0
RadioChoice
casing_size
3
1
Production Pump Casing Size
inches
Geothermal Plant and Equipment
0
2
1
1
1
1
9.625
Numeric
conversion_subtype
3
1
Subtype
 
Geothermal Plant and Equipment
99
Unconstrained Single Flash|Constrained Single Flash|Unconstrained Dual Flash|Constrained Dual Flash
0
1
1
1
1
0
Choice
conversion_type
3
1
Conversion Type
 
Geothermal Plant and Equipment
12
Binary|Flash
1
1
1
1
1
0
RadioChoice
decline_type
3
1
 
 
Geothermal Plant and Equipment
0
0
1
1
1
1
0
RadioChoice
delta_pressure_equip
3
1
Pressure Difference Across Surface Equipment
psi
Geothermal Plant and Equipment
0
2
1
1
1
1
25
Numeric
design_temp
3
1
Plant Design Temperature
'C
Geothermal Plant and Equipment
0
8
1
1
1
1
0
Numeric
dt_prod_well
3
1
Temperature Loss in Prod. Well
'C
 
0
0
1
1
1
1
0
Default
excess_pressure_pump
3
1
Excess Pressure at Pump Suction
psi
Geothermal Plant and Equipment
0
0
1
1
1
1
50.76
Numeric
gen
3
2
System Generation Calculated
kW
Geothermal Plant and Equipment
0
1
1
2
1
1
0
Default
geotherm.conversion_type_name
3
4
Conversion Plant Type
 
Geothermal Plant and Equipment
0
8
1
4
1
0
Default
geotherm.egs_design_temp_autoselect
3
1
 
 
Geothermal Plant and Equipment
0
0
1
1
1
1
1
CheckBox
geotherm.egs_design_temp_input
3
1
Enter Plant Design Temperature (EGS only)
'C
Geothermal Plant and Equipment
0
0
1
1
1
1
200
Numeric
geotherm.errors1
3
4
Messages:
 
Geothermal Plant and Equipment
0
8
1
4
0
TextEntry
geotherm.net_output
3
1
Net Plant Output
MW
Geothermal Plant and Equipment
0
8
1
1
1
1
0
Numeric
geotherm.plant_efficiency_used
3
1
Actual Plant Efficiency
w-hr/lb
Geothermal Plant and Equipment
0
8
1
1
1
1
0
Numeric
geotherm.total_flow_gpm
3
1
Total Flow Rate
gpm
Geothermal Plant and Equipment
0
8
1
1
1
1
0
Default
geotherm.total_flow_kg_per_s
3
1
Total Flow Rate
kg/s
Geothermal Plant and Equipment
0
8
1
1
1
1
0
Default
gross_output
3
1
Gross Plant Output
MW
Geothermal Plant and Equipment
0
8
1
1
1
1
0
Numeric
inj_casing_size
3
1
Injection Pump Casing Size
inches
Geothermal Plant and Equipment
0
0
1
1
1
1
0
Default
inj_pump_hp
3
1
Injection Pump Size
hp
 
0
8
1
1
1
1
0
Default
inj_well_diam
3
1
Injection Well Diameter
inches
Geothermal Plant and Equipment
0
2
1
1
1
1
10
Numeric
nameplate
3
1
Plant nameplate
kW
Geothermal Plant and Equipment
0
3
1
1
1
1
30000
Numeric
num_wells
3
1
Exact number of wells
wells
Geothermal Plant and Equipment
0
3
1
1
1
1
3
Numeric
num_wells_getem
3
1
Number of Wells in Analysis
wells
Geothermal Plant and Equipment
0
8
1
1
1
1
0
Numeric
plant_efficiency_input
3
1
Plant Efficiency
%
Geothermal Plant and Equipment
0
2
1
1
1
1
95
Numeric
prod_well_choice
3
1
Produnction well temperature choice
0/1
Geothermal Plant and Equipment
0
1
1
1
1
1
0
Default
pump_depth
3
1
Pump Depth
ft
Geothermal Plant and Equipment
0
8
1
1
1
1
0
Numeric
pump_efficiency
3
1
Pump Efficiency
%
Geothermal Plant and Equipment
0
2
1
1
1
1
60
Numeric
pump_size_hp
3
1
Production Pump Size
hp
Geothermal Plant and Equipment
0
8
1
1
1
1
0
Numeric
pump_work
3
1
Pump Work
MW
Geothermal Plant and Equipment
0
8
1
1
1
1
0
Numeric
pump_work_watthr_lb
3
1
Pump Work
Wh/lb
 
0
8
1
1
1
1
0
Default
pumpwork_inj
3
1
Inj
Wh/lb
 
0
8
1
1
1
1
0
Default
pumpwork_prod
3
1
Prod
wh/lb
 
0
8
1
1
1
1
0
Default
specified_pump_work_amount
3
1
Specified Pump Work
MW
Geothermal Plant and Equipment
0
0
1
1
1
1
0
Numeric
specify_pump_work
3
1
 
 
Geothermal Plant and Equipment
0
0
1
1
1
1
0
CheckBox
system_capacity
3
1
Nameplate
kW
Geothermal Plant and Equipment
0
8
1
1
1
1
0
Default
temp_decline_max
3
1
Max. temp decline before reservoir replacement
'C
Geothermal Plant and Equipment
0
0
1
1
1
1
30
Numeric
temp_decline_rate
3
1
Temperature decline rate
%/yr
Geothermal Plant and Equipment
0
3
1
1
1
1
0.3
Numeric
ui_calculations_only
3
1
 
 
Geothermal Plant and Equipment
1
0
8
1
1
1
1
0
Default
well_diameter
3
1
Production Well Diameter
inches
Geothermal Plant and Equipment
0
2
1
1
1
1
10
Numeric
well_flow_rate
3
1
Production Well Flow Rate
kg/s per well
Geothermal Plant and Equipment
0
2
1
1
1
1
70
Numeric
wet_bulb_temp
3
1
Wet Bulb Temperature
'C
Geothermal Plant and Equipment
0
2
1
1
1
1
15
Numeric

6190

equations{ 'geotherm.total_flow_kg_per_s' } = define() {
	return ${well_flow_rate} * ${num_wells_getem};
};

equations{ 'geotherm.total_flow_gpm' } = define() {
	return ${geotherm.total_flow_kg_per_s} * 15.87;
};

equations{ 'geotherm.net_output' } = define() {
	return ${gross_output} - ${pump_work};
};

equations{ 'design_temp' } = define() {
	if (${geotherm.egs_design_temp_autoselect} == 1)
		return ${resource_temp};
	else
		return ${geotherm.egs_design_temp_input};
};

equations{ 'ui_calculations_only' } = define() {
	return 0; // for a normal model run, this should be zero
};

equations{ '$MIMO$ geothermal' } = define() {
    obj = ssc_create();
	ssc_var( obj, 'ui_calculations_only', 1 ); // set to 1 so model only does UI calculations (much faster)
	ssc_var( obj, 'system_capacity', ${nameplate} );
	ssc_var( obj, 'adjust:constant', 0.0 );

	ssc_var( obj, 'resource_type', ${resource_type} );   // INTEGER
	ssc_var( obj, 'resource_temp', ${resource_temp} );
	ssc_var( obj, 'resource_depth', ${resource_depth} );
	ssc_var( obj, 'geotherm.cost.inj_prod_well_ratio', ${geotherm.cost.inj_prod_well_ratio});
	ssc_var( obj, 'dt_prod_well', ${dt_prod_well} );
	ssc_var( obj, 'prod_well_choice', ${prod_well_choice} );										    
	// Other inputs							    
	ssc_var( obj, 'geothermal_analysis_period', ${geothermal_analysis_period} ); // INTEGER
	ssc_var( obj, 'model_choice', ${model_choice} );    // INTEGER

	// geothermal plant and equipment		    
	ssc_var( obj, 'nameplate', ${nameplate} );
	ssc_var( obj, 'analysis_type', ${analysis_type} );   //INTEGER
	ssc_var( obj, 'num_wells', ${num_wells} );
	ssc_var( obj, 'conversion_type', ${conversion_type} ); // INTEGER
	ssc_var( obj, 'plant_efficiency_input', ${plant_efficiency_input} );
	ssc_var( obj, 'conversion_subtype', ${conversion_subtype} ); // INTEGER
	if (${resource_type} == 0)
		ssc_var( obj, 'decline_type', 0 );       // INTEGER
	else if (${conversion_type} == 0) 
		ssc_var( obj, 'decline_type', ${decline_type});
	else 
		ssc_var( obj, 'decline_type', 0);
	ssc_var( obj, 'temp_decline_rate', ${temp_decline_rate} );
	ssc_var( obj, 'temp_decline_max', ${temp_decline_max} );
	ssc_var( obj, 'wet_bulb_temp', ${wet_bulb_temp} );
	ssc_var( obj, 'ambient_pressure', ${ambient_pressure} );
	ssc_var( obj, 'well_flow_rate', ${well_flow_rate} );
	ssc_var( obj, 'pump_efficiency', ${pump_efficiency} );
	ssc_var( obj, 'delta_pressure_equip', ${delta_pressure_equip} );
	ssc_var( obj, 'excess_pressure_pump', ${excess_pressure_pump} );
	ssc_var( obj, 'well_diameter', ${well_diameter} );
	ssc_var( obj, 'casing_size', ${casing_size} );
	ssc_var( obj, 'inj_casing_size', ${inj_casing_size} );
	ssc_var( obj, 'inj_well_diam', ${inj_well_diam} );
	ssc_var( obj, 'geotherm.cost.inj_cost_curve_welltype', ${geotherm.cost.inj_cost_curve_welltype} );
	ssc_var( obj, 'geotherm.cost.prod_cost_curve_welltype', ${geotherm.cost.prod_cost_curve_welltype} );

	ssc_var( obj, 'design_temp', ${design_temp} );
	ssc_var( obj, 'specify_pump_work', ${specify_pump_work} ); // INTEGER
	ssc_var( obj, 'specified_pump_work_amount', ${specified_pump_work_amount} );

	// detailed geothermal inputs
	ssc_var( obj, 'rock_thermal_conductivity', ${rock_thermal_conductivity} );
	ssc_var( obj, 'rock_specific_heat', ${rock_specific_heat} );
	ssc_var( obj, 'rock_density', ${rock_density} );
	if (${resource_type} != 1 && ${reservoir_pressure_change_type} == 1) {
		ssc_var( obj, 'reservoir_pressure_change_type', 0 ); // INTEGER
		msgbox('Fracture flow calculations can only be used with EGS resource. Please check the inputs on the Geothermal Resource page. The enter change in reservoir option is being used currently.');
	}
	else 
		ssc_var( obj, 'reservoir_pressure_change_type', ${reservoir_pressure_change_type} ); // INTEGER
	ssc_var( obj, 'reservoir_pressure_change', ${reservoir_pressure_change} );
	ssc_var( obj, 'reservoir_width', ${reservoir_width} );
	ssc_var( obj, 'reservoir_height', ${reservoir_height} );
	ssc_var( obj, 'reservoir_permeability', ${reservoir_permeability} );		
	ssc_var( obj, 'inj_prod_well_distance', ${inj_prod_well_distance} );		
	ssc_var( obj, 'subsurface_water_loss', ${subsurface_water_loss} ); 		
	ssc_var( obj, 'fracture_aperature', ${fracture_aperature} );
	ssc_var( obj, 'fracture_width', ${fracture_width} );
	ssc_var( obj, 'fracture_length', ${fracture_length} );
	ssc_var( obj, 'fracture_spacing', ${fracture_spacing} );
	ssc_var( obj, 'num_fractures', ${num_fractures} ); // INTEGER
	ssc_var( obj, 'fracture_angle', ${fracture_angle} );
	ssc_var( obj, 'reservoir_model_inputs', ${reservoir_model_inputs} );

	// temp input for testing
	ssc_var( obj, 'hr_pl_nlev', ${hr_pl_nlev} ); // INTEGER

    result = ssc_exec( obj, 'geothermal' );
    // use for diagnostics - if it doesn't seem to run, 'result' should have error
	if ( typeof(result) != 'number' && result != 0 )
	{
		msgbox('geothermal mimo error, result =' + result); 
	}
    
    ${num_wells_getem} = ssc_var( obj, 'num_wells_getem_output');
    ${num_wells_getem_inj} = ssc_var( obj, 'num_wells_getem_inj');
    ${geotherm.plant_efficiency_used} = ssc_var( obj, 'plant_brine_eff');
    ${pump_work_watthr_lb} = ssc_var( obj, 'pump_watthr_per_lb');
    ${pumpwork_prod} = ssc_var( obj, 'pumpwork_prod');
    ${pumpwork_inj} = ssc_var( obj, 'pumpwork_inj');
    ${gross_output} = ssc_var(obj, 'gross_output');
    ${pump_depth} = ssc_var(obj, 'pump_depth_ft');
    ${inj_pump_hp} = ssc_var(obj, 'inj_pump_hp');
    if (${specify_pump_work} == 0)
		${pump_work} = ssc_var(obj, 'pump_work');
	else
		${pump_work} = ${specified_pump_work_amount};
    //${pump_size_hp} = ssc_var(obj, 'pump_hp');

    ${geotherm.delta_pressure_reservoir} = ssc_var(obj, 'reservoir_pressure');
    ${geotherm.avg_reservoir_temp} = ssc_var(obj, 'reservoir_avg_temp');
    ${geotherm.bottom_hole_pressure} = ssc_var(obj, 'bottom_hole_pressure');

	ssc_free( obj );
	
	return 0;
};

equations{ 'system_capacity' } = define() {
	return ${gross_output}*1000;}; // MW to kW
//	return ${geotherm.net_output}*1000;}; // MW to kW > 100% with net output

equations{ 'pump_size_hp' } = define() {
	return ${pumpwork_prod} / (0.7457 * 1000) * ${well_flow_rate} * 7936.64;
};
1856
function update_controls()
{
	flash_message();
	show('geotherm_flash_message', ${conversion_type});
	
	binary_message();
	show('geotherm_binary_message', !${conversion_type});

	// enable/disable all the appropriate controls on the page according to
	// the user's selections
	enable('plant_efficiency_input', !${conversion_type});
	enable("decline_type", ${resource_type} );
	enable("nameplate", !${analysis_type} );
	enable("num_wells", ${analysis_type} );
	enable("conversion_subtype", ${conversion_type});
	enable("specified_pump_work_amount", ${specify_pump_work} );

	// if this is a hydrothermal plant, set this to 'specify decline rate'
	if (${resource_type}==0) {
		value("decline_type", 0);
		enable('decline_type', false);
	}
}

function flash_message()
{
	message = '';
	
	if (${conversion_type})
		message = 'Flash plant efficiency calculated internally';
	
	property( 'geotherm_flash_message','Caption',message );
}


function binary_message()
{
	message = '';
	
	if (!${conversion_type})
		message = 'Plant efficiency set as percentage of max plant efficiency';
	
	property( 'geotherm_binary_message','Caption',message );
}


on_load{"Geothermal Plant and Equipment"}=define() {
	update_controls();
	on_change{'prod_well_choice'}();
};	

on_change{"conversion_type"} = define() {
	update_controls();
	if (value('conversion_type') == 1) {
		value('decline_type', 0);
		enable('decline_type', false);
	}
};

on_change{'analysis_type'} = define() {
	update_controls();
};

on_change{'specify_pump_work'} = define() {
	update_controls();
};

on_change{'prod_well_choice'} = define() {
	if (value('prod_well_choice')==0)
		enable('dt_prod_well', true);
	else
		enable('dt_prod_well', false);
};

on_change{'decline_type'} = define() {
	type = value('decline_type');
	enable('temp_decline_rate', type==0);
	enable('temp_decline_max', type==0);
};
