{
    "Name": "Utility Rate - Billing Demand",
    "Width": 1420.0,
    "Height": 493.0,
    "FormObjects": {
        "GroupBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "GroupBox31"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 9.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 1403.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 479.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Billing Demand Lookback"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "CheckBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "chk_update_peaks"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 357.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 129.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 459.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Use monthly peaks from Year 1 electric load data for Year 0 lookback period"
                },
                "State": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "lbl_monthly_peaks_message"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 834.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 129.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 408.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 51.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": ""
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Divider": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 21"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 675.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 195.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 722.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 20.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Orientation": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Colour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 120.0,
                        "Green": 120.0,
                        "Blue": 120.0,
                        "Alpha": 255.0
                    }
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Billing Demand by Time-of-use Period for Demand Charges"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Divider": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 2111"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 195.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 608.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 20.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Orientation": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Colour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 120.0,
                        "Green": 120.0,
                        "Blue": 120.0,
                        "Alpha": 255.0
                    }
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Billing Demand by Month"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 7"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 1089.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 219.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 300.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 82.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "This table must have one row for each TOU period defined in the Demand Rates by Time-of-use Period and/or Tiers table below."
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 76"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 33.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 51.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 1206.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 60.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "The billing demand lookback inputs determine how SAM calculates the billing demand, or peak kW value, from previous month peak load values for demand charges (below) with ratcheting demand, and for any energy charges (above) that have kWh/kW units with billing demand based on past peak usage. See Help for details."
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "DataMatrix": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_billing_demand_lookback_percentages"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 39.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 216.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 575.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 258.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "PasteAppendRows": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "PasteAppendCols": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowButtons": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ShowRows": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowRowLabels": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "RowLabels": {
                    "Type": 5.0,
                    "String": "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec"
                },
                "ShadeR0C0": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "VerticalLabel": {
                    "Type": 5.0,
                    "String": ""
                },
                "HorizontalLabel": {
                    "Type": 5.0,
                    "String": ""
                },
                "ShadeC0": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowCols": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowColLabels": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ColLabels": {
                    "Type": 5.0,
                    "String": "Billing Demand Percentage (%),Consider Actual Peak Demand (0/1)"
                },
                "NumRowsLabel": {
                    "Type": 5.0,
                    "String": "Number entries:"
                },
                "NumColsLabel": {
                    "Type": 5.0,
                    "String": "Cols:"
                },
                "Layout": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "ChoiceColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "Choices": {
                    "Type": 5.0,
                    "String": ""
                },
                "HideColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "ShowColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "ColorMap": {
                    "Type": 2.0,
                    "Boolean": 0.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_billing_demand_lookback_period"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 165.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 129.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_billing_demand_minimum"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 165.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 156.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "DataMatrix": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_dc_billing_demand_periods"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 690.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 216.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 374.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 258.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "PasteAppendRows": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "PasteAppendCols": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowButtons": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ShowRows": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ShowRowLabels": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "RowLabels": {
                    "Type": 5.0,
                    "String": ""
                },
                "ShadeR0C0": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "VerticalLabel": {
                    "Type": 5.0,
                    "String": ""
                },
                "HorizontalLabel": {
                    "Type": 5.0,
                    "String": ""
                },
                "ShadeC0": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowCols": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowColLabels": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ColLabels": {
                    "Type": 5.0,
                    "String": "Period,Included In Billing Demand (0/1)"
                },
                "NumRowsLabel": {
                    "Type": 5.0,
                    "String": "Number of entries:"
                },
                "NumColsLabel": {
                    "Type": 5.0,
                    "String": "Cols:"
                },
                "Layout": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "ChoiceColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "Choices": {
                    "Type": 5.0,
                    "String": "Choice1,Choice2"
                },
                "HideColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "ShowColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "ColorMap": {
                    "Type": 2.0,
                    "Boolean": 0.0
                }
            }
        },
        "CheckBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_enable_billing_demand"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 258.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Enable billing demand lookback"
                },
                "State": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "MonthlyFactor": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_yearzero_usage_peaks"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 564.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 156.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 96.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 28.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Description": {
                    "Type": 5.0,
                    "String": "Monthly peak demand in Year 0 (kW)"
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        }
    },
    "VarDatabase": {
        "chk_update_peaks": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Copy monthly peaks from Year 1 load data for Year 0 lookback period",
            "Units": " ",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 5.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_billing_demand_lookback_percentages": {
            "Version": 4.0,
            "Type": 3.0,
            "Label": "Ratchet demand charge rates",
            "Units": " ",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 1.0,
            "DefaultValue": [
                [
                    0.0
                ]
            ],
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_billing_demand_lookback_period": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Lookback period",
            "Units": "months",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_billing_demand_minimum": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Minimum billing demand",
            "Units": "kW",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_dc_billing_demand_periods": {
            "Version": 4.0,
            "Type": 3.0,
            "Label": " ",
            "Units": " ",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": [
                [
                    0.0
                ]
            ],
            "UIObject": "DataMatrix",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_enable_billing_demand": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Enable ratchet demand charges",
            "Units": " ",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 3.0,
            "DefaultValue": 0.0,
            "UIObject": "DataMatrix",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_yearzero_usage_peaks": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "Monthly peak demand in Year 0",
            "Units": "kW",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "MonthlyFactor",
            "sscVariableName": "",
            "sscVariableValue": ""
        }
    },
    "Equations": [],
    "Callbacks": [
        "on_load{'Utility Rate - Billing Demand'} = define() {",
        "\tenable_ratchet_demand_charges();",
        "\tcheck_update_year_one_peaks(true);",
        "\tfirstyear_demand_peaks_message();",
        "};",
        "",
        "on_change{'chk_update_peaks'} = define() {",
        "\tcheck_update_year_one_peaks(false);",
        "\tfirstyear_demand_peaks_message();",
        "};",
        "",
        "on_change{'ur_yearzero_usage_peaks'} = define() {",
        "\tfirstyear_demand_peaks_message();",
        "};",
        "",
        "function is_btm() {",
        "\treturn ( financing() != \"Single Owner\"",
        "\t&& financing() != \"Merchant Plant\" &&",
        "\tfinancing() != \"Sale Leaseback\" &&",
        "\tfinancing() != 'Leveraged Partnership Flip' &&",
        "\tfinancing() != 'All Equity Partnership Flip');",
        "}",
        "",
        "function check_update_year_one_peaks(is_on_load) {",
        "\tis_update_peaks_from_load = value('chk_update_peaks');",
        "\tenable('ur_yearzero_usage_peaks', !is_update_peaks_from_load);",
        "\tif ( is_btm() && is_update_peaks_from_load) ",
        "\t{",
        "\t\tif ( value('ur_yearzero_usage_peaks') != value('mpeak'))",
        "\t\t{ ",
        "\t\t\tif (is_on_load) {",
        "\t\t\t\t// If returning to this page with chk_update_peaks == 1, copy the values immediately",
        "\t\t\t\tvalue('ur_yearzero_usage_peaks',value('mpeak'));",
        "\t\t\t}",
        "\t\t\telse {",
        "\t\t\t\tok = yesno('Overwrite Year 0 monthly peak demand?\\nClick Yes to replace Year 0 monthly peak demand with Year 1 values from the Electricity Load page.\\n\\nClick No to cancel.');",
        "\t\t\t\tif ( ok ) { value('ur_yearzero_usage_peaks',value('mpeak')); }",
        "\t\t\t}",
        "\t\t}",
        "\t}\t",
        "}",
        "function firstyear_demand_peaks_message() {",
        "\tmsg = 'Click Edit Values to enter monthly peak demand for Year 0, which is the lookback period for Year 1.';",
        "\tif ( !is_btm() )",
        "\t{",
        "\t\tmsg = 'No electric load data available. Billing demand calculated based on usage for battery charging and self consumption. ' + msg;",
        "\t}",
        "\telseif ( value('load_model') != 1 ) // load_model is null for FOM",
        "\t{",
        "\t\tmsg = 'No load data available. ' + msg;",
        "\t}",
        "\telse // peak demand data is available from load page",
        "\t{",
        "        if ( value('ur_yearzero_usage_peaks') == value('mpeak') )",
        "        { ",
        "            msg = 'Monthly peak demand for Year 0 is the same as the Year 1 load data. Click Edit Values to enter different values for Year 0.'; ",
        "            if ( value('chk_update_peaks') == 1 )",
        "            {",
        "                msg += ' Clear the check box to enable Edit Values.';",
        "            }",
        "        }",
        "    }",
        "\tproperty('lbl_monthly_peaks_message','Caption',msg);",
        "}",
        "",
        "on_change{'ur_enable_billing_demand'} = define() {",
        "\tenable_ratchet_demand_charges();",
        "\tif (is_btm()) {",
        "\t\tcheck_update_year_one_peaks(false);",
        "\t\tfirstyear_demand_peaks_message();",
        "\t}",
        "};",
        "",
        "function enable_ratchet_demand_charges()",
        "{",
        "\tis_enabled = (value('ur_enable_billing_demand')==1);",
        "\tdc_enabled = (value('ur_dc_enable')==1);",
        "\tenable('ur_billing_demand_lookback_percentages',is_enabled);",
        "\tenable('ur_billing_demand_lookback_period',is_enabled);",
        "\tenable('ur_billing_demand_minimum',is_enabled);",
        "\tenable('ur_dc_billing_demand_periods',is_enabled && dc_enabled);",
        "\tenable('ur_yearzero_usage_peaks',is_enabled);",
        "\tshow('lbl_monthly_peaks_message',is_enabled);",
        "\tif ( is_btm() )",
        "\t{",
        "\t\t// calculated monthly peaks data only available from UI",
        "\t\t// for \"Input Time Series Load Data\" option",
        "\t\tenable('chk_update_peaks',( is_enabled && value('load_model') == 1) );",
        "\t}",
        "\telse // no load data for fom configs",
        "\t{",
        "\t\tvalue('chk_update_peaks', 0);",
        "\t\tshow('chk_update_peaks', false );",
        "\t}\t",
        "\trefresh();",
        "}",
        "",
        "function demand_charge_tou_message(){",
        "\tmsg = '';",
        "\tx = value('ur_dc_tou_mat');",
        "}"
    ]
}