Empirical Trough Power Block
890
675
48
Numeric

1
17
Name
5
7
E2TPLF0
X
3
279
Y
3
552
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
19
Numeric

1
17
Name
5
7
E2TPLF1
X
3
351
Y
3
552
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
20
Numeric

1
17
Name
5
7
E2TPLF2
X
3
423
Y
3
552
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
21
Numeric

1
17
Name
5
7
E2TPLF3
X
3
495
Y
3
552
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
22
Numeric

1
17
Name
5
7
E2TPLF4
X
3
567
Y
3
552
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
23
GroupBox

1
8
Name
5
9
GroupBox1
X
3
6
Y
3
3
Width
3
870
Height
3
140
Tool Tip
5
0
Caption
5
21
Plant Characteristics
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox2
X
3
6
Y
3
330
Width
3
870
Height
3
332
Tool Tip
5
0
Caption
5
22
Power Cycle Properties
Bold
2
1
Numeric

1
17
Name
5
10
LHVBoilEff
X
3
651
Y
3
432
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
13
Label

1
13
Name
5
7
Label10
X
3
495
Y
3
507
Width
3
68
Height
3
21
Tool Tip
5
0
Caption
5
2
F3
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
7
Label11
X
3
567
Y
3
507
Width
3
68
Height
3
21
Tool Tip
5
0
Caption
5
2
F4
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
7
Label12
X
3
12
Y
3
96
Width
3
488
Height
3
45
Tool Tip
5
0
Caption
5
88
Parasitic losses typically reduce net output to approximately 90 % of design gross power
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Label

1
13
Name
5
6
Label2
X
3
48
Y
3
633
Width
3
284
Height
3
21
Tool Tip
5
0
Caption
5
26
* Fraction of Design Point
TextColour
4
255
128
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
6
Label3
X
3
48
Y
3
528
Width
3
230
Height
3
21
Tool Tip
5
0
Caption
5
29
Cycle Part-load Therm to Elec
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
6
Label4
X
3
48
Y
3
552
Width
3
230
Height
3
21
Tool Tip
5
0
Caption
5
29
Cycle Part-load Elec to Therm
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
6
Label5
X
3
48
Y
3
576
Width
3
230
Height
3
21
Tool Tip
5
0
Caption
5
24
Cooling Tower Correction
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
6
Label6
X
3
48
Y
3
600
Width
3
230
Height
3
21
Tool Tip
5
0
Caption
5
21
Temp. Correction Mode
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
6
Label7
X
3
279
Y
3
507
Width
3
68
Height
3
21
Tool Tip
5
0
Caption
5
2
F0
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
6
Label8
X
3
351
Y
3
507
Width
3
68
Height
3
21
Tool Tip
5
0
Caption
5
2
F1
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
6
Label9
X
3
423
Y
3
507
Width
3
68
Height
3
21
Tool Tip
5
0
Caption
5
2
F2
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Numeric

1
17
Name
5
8
MaxGrOut
X
3
279
Y
3
456
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
10
Numeric

1
17
Name
5
8
MinGrOut
X
3
279
Y
3
480
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
11
Numeric

1
17
Name
5
7
T2EPLF0
X
3
279
Y
3
528
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
14
Numeric

1
17
Name
5
7
T2EPLF1
X
3
351
Y
3
528
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
15
Numeric

1
17
Name
5
7
T2EPLF2
X
3
423
Y
3
528
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
16
Numeric

1
17
Name
5
7
T2EPLF3
X
3
495
Y
3
528
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
17
Numeric

1
17
Name
5
7
T2EPLF4
X
3
567
Y
3
528
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
18
Numeric

1
17
Name
5
9
TempCorr0
X
3
279
Y
3
576
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
24
Numeric

1
17
Name
5
9
TempCorr1
X
3
351
Y
3
576
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
25
Numeric

1
17
Name
5
9
TempCorr2
X
3
423
Y
3
576
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
26
Numeric

1
17
Name
5
9
TempCorr3
X
3
495
Y
3
576
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
27
Numeric

1
17
Name
5
9
TempCorr4
X
3
567
Y
3
576
Width
3
70
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
28
Choice

1
9
Name
5
9
TempCorrF
X
3
279
Y
3
600
Width
3
163
Height
3
21
Tool Tip
5
0
Items
6
2
Wet-bulb Basis
Dry-bulb Basis
Selection
3
0
TabOrder
3
29
Numeric

1
17
Name
5
6
TurSUE
X
3
651
Y
3
408
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
12
Numeric

1
17
Name
5
8
TurbEffG
X
3
279
Y
3
432
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
9
Numeric

1
17
Name
5
8
TurbOutG
X
3
351
Y
3
21
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
2
LossAdjustment

1
14
Name
5
6
adjust
X
3
594
Y
3
33
Width
3
252
Height
3
63
Tool Tip
5
0
TabOrder
3
24
Description
5
0
Label
5
0
Mode
3
1
AnalysisPeriod
3
25
ShowMode
2
1
AnnualEnabled
2
1
WeeklyEnabled
2
1
Divider

1
10
Name
5
9
object 22
X
3
573
Y
3
15
Width
3
291
Height
3
16
Tool Tip
5
0
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
19
System Availability
Bold
2
1
GroupBox

1
8
Name
5
8
object 4
X
3
6
Y
3
144
Width
3
870
Height
3
180
Tool Tip
5
0
Caption
5
19
Power Cycle Library
Bold
2
1
Label

1
13
Name
5
8
object 7
X
3
507
Y
3
93
Width
3
360
Height
3
48
Tool Tip
5
0
Caption
5
96
System availability losses reduce the system output to represent system outages or other events.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Library

1
8
Name
5
10
pb_library
X
3
12
Y
3
162
Width
3
858
Height
3
147
Tool Tip
5
0
Library
5
29
Empirical Trough Power Cycles
Fields
5
164
Description,Type,Efficiency,Max Output,Min Output,Startup Energy,TEF0,TEF1,TEF2,TEF3,TEF4,TFF0,TFF1,TFF2,TFF3,TFF4,CTC F0,CTC F1,CTC F2,CTC F3,CTC F4,Temp.Corr Mode
Numeric

1
17
Name
5
30
ui_gross_net_conversion_factor
X
3
351
Y
3
45
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
0
Numeric

1
17
Name
5
18
ui_max_therm_input
X
3
651
Y
3
456
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
0
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
0
Numeric

1
17
Name
5
18
ui_min_therm_input
X
3
651
Y
3
480
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
0
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
0
Numeric

1
17
Name
5
15
ui_net_capacity
X
3
351
Y
3
69
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
1
TextEntry

1
11
Name
5
17
ui_pb_description
X
3
279
Y
3
378
Width
3
269
Height
3
24
Tool Tip
5
0
Text
5
0
Editable
2
0
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
TextEntry

1
11
Name
5
10
ui_pb_type
X
3
552
Y
3
378
Width
3
200
Height
3
24
Tool Tip
5
0
Text
5
0
Editable
2
0
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
11
ui_q_design
X
3
279
Y
3
408
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
0
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
8
CheckBox

1
9
Name
5
21
use_pb_library_values
X
3
279
Y
3
348
Width
3
21
Height
3
24
Tool Tip
5
0
Caption
5
0
State
2
0
TabOrder
3
1

57
E2TPLF0
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
0.03737
Numeric
E2TPLF1
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
0.98823
Numeric
E2TPLF2
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
-0.064991
Numeric
E2TPLF3
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
0.039388
Numeric
E2TPLF4
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
0
Numeric
LHVBoilEff
3
1
Boiler LHV Efficiency
 
Empirical Trough Power Block
0
2
1
1
1
1
0.9
Numeric
MaxGrOut
3
1
Max turbine over design operation*
 
Empirical Trough Power Block
0
2
1
1
1
1
1.15
Numeric
MinGrOut
3
1
Min turbine operation*
 
Empirical Trough Power Block
0
2
1
1
1
1
0.25
Numeric
PTTMAX
3
1
 
 
 
0
0
1
1
1
1
0
Default
PTTMIN
3
1
 
 
 
0
0
1
1
1
1
0
Default
T2EPLF0
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
-0.037726
Numeric
T2EPLF1
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
1.0062
Numeric
T2EPLF2
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
0.076316
Numeric
T2EPLF3
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
-0.044775
Numeric
T2EPLF4
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
0
Numeric
TempCorr0
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
1
Numeric
TempCorr1
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
0
Numeric
TempCorr2
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
0
Numeric
TempCorr3
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
0
Numeric
TempCorr4
3
1
 
 
Empirical Trough Power Block
0
0
1
1
1
1
0
Numeric
TempCorrF
3
1
 
 
Empirical Trough Power Block
29
Wet-bulb Basis|Dry-bulb Basis
2
1
1
1
1
0
Choice
TurSUE
3
1
Frac of thermal power for startup
 
Empirical Trough Power Block
0
2
1
1
1
1
0.2
Numeric
TurbEffG
3
1
Rated Cycle Conversion Efficiency
 
Empirical Trough Power Block
0
2
1
1
1
1
0.3774
Numeric
TurbOutG
3
1
Design Gross Output
MWe
Empirical Trough Power Block
0
2
1
1
1
1
110
Numeric
adjust
3
5
Performance factors
 
 
0
1
1
5
1
0
LossAdjustment
lib_E2TPLF0
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_E2TPLF1
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_E2TPLF2
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_E2TPLF3
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_E2TPLF4
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_MaxGrOut
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_MinGrOut
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_T2EPLF0
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_T2EPLF1
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_T2EPLF2
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_T2EPLF3
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_T2EPLF4
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_TempCorr0
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_TempCorr1
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_TempCorr2
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_TempCorr3
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_TempCorr4
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_TempCorrF
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_TurSUE
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_TurbEffG
3
1
 
 
 
0
8
1
1
1
1
0
Default
lib_ui_pb_description
3
4
 
 
 
0
8
1
4
30
Dry Cooled SEGS 80 MWe Turbine
Default
lib_ui_pb_type
3
4
 
 
 
0
8
1
4
20
Steam RH Dry Cooling
Default
pb_library
3
4
 
 
Empirical Trough Power Block
31
Empirical Trough Power Cycles|0
19
1
4
19
SEGS 80 MWe Turbine
Library
system_capacity
3
1
 
 
 
0
8
1
1
1
1
0
Default
ui_gross_net_conversion_factor
3
1
Estimated Gross to Net Conversion Factor
 
Empirical Trough Power Block
0
2
1
1
1
1
0.9
Numeric
ui_max_therm_input
3
1
Max. Thermal Input
MWt
Empirical Trough Power Block
0
8
1
1
1
1
0
Numeric
ui_min_therm_input
3
1
Min. Thermal Input
MWt
Empirical Trough Power Block
0
8
1
1
1
1
0
Numeric
ui_net_capacity
3
1
Estimated Net Output at Design
MWe
Empirical Trough Power Block
0
8
1
1
1
1
100
Numeric
ui_pb_description
3
4
Description from Library
 
Empirical Trough Power Block
0
0
1
4
9
<invalid>
TextEntry
ui_pb_type
3
4
Type from Library
 
Empirical Trough Power Block
0
1
1
4
9
<invalid>
TextEntry
ui_q_design
3
1
Design Cycle Thermal Input
MWt
Empirical Trough Power Block
0
8
1
1
1
1
0
Numeric
use_pb_library_values
3
1
Use library values
 
 
0
0
1
1
1
1
1
CheckBox

1279
/* FOR STEVE:
   Duplicate variables?
   
   Note from SAMwx tcstrough_empirical.cpp PTTMAX = MaxGrOut
   and PTTMIN = MinGrOut. Line 82:
   
   static vtl_table_entry vtl_tcstrough_empirical[] = {
   ...
	{ "PTTMAX",          "csp.tr.pwrb.maxoutput" },
	{ "PTTMIN",          "csp.tr.pwrb.minoutput" },
	{ "MaxGrOut",        "csp.tr.pwrb.maxoutput" },
	{ "MinGrOut",        "csp.tr.pwrb.minoutput" },
  ...
  }; 
*/


equations{ 'PTTMAX' } = define() { return ${MaxGrOut}; };
equations{ 'PTTMIN' } = define() { return ${MinGrOut}; };

equations{ 'ui_net_capacity' } = define() {
	return ${TurbOutG} * ${ui_gross_net_conversion_factor}; 
};

equations{ 'ui_q_design' } = define() {
	return ${TurbOutG} / ${TurbEffG}; 
};


equations{ 'ui_min_therm_input' } = define() {
	return ${ui_q_design} * ( 
	   ${E2TPLF0}
     + ${E2TPLF1} * ${MinGrOut}
     + ${E2TPLF2} * ${MinGrOut}^2
     + ${E2TPLF3} * ${MinGrOut}^3
     + ${E2TPLF4} * ${MinGrOut}^4 ); 
};

equations{ 'ui_max_therm_input' } = define() {
	return ${ui_q_design} * ( 
	   ${E2TPLF0}
     + ${E2TPLF1} * ${MaxGrOut}
     + ${E2TPLF2} * ${MaxGrOut}^2
     + ${E2TPLF3} * ${MaxGrOut}^3
     + ${E2TPLF4} * ${MaxGrOut}^4 ); 
};

equations{ "system_capacity" } = define() {
	return ${ui_net_capacity}*1000; // MWh to kWh
};
2712
on_load{ 'Empirical Trough Power Block' } = define()
{
	on_change{ 'pb_library' }();
	on_change{ 'use_pb_library_values' }();
	loss_adjustment_set();
};

on_change{ 'pb_library' } = define() {

  state = value("use_pb_library_values");
  
  if ( state == 1 ) {

	value( 'ui_pb_description'  , value( 'lib_ui_pb_description' ) );
	value( 'ui_pb_type'  , value( 'lib_ui_pb_type' ) );
	value( 'TurbEffG'  , value( 'lib_TurbEffG' ) );
	value( 'MaxGrOut'  , value( 'lib_MaxGrOut' ) );
	value( 'MinGrOut'  , value( 'lib_MinGrOut' ) );
	value( 'TurSUE'    , value( 'lib_TurSUE'   ) );
	value( 'T2EPLF0'   , value( 'lib_T2EPLF0'  ) );
	value( 'T2EPLF1'   , value( 'lib_T2EPLF1'  ) );
	value( 'T2EPLF2'   , value( 'lib_T2EPLF2'  ) );
	value( 'T2EPLF3'   , value( 'lib_T2EPLF3'  ) );
	value( 'T2EPLF4'   , value( 'lib_T2EPLF4'  ) );
	value( 'E2TPLF0'   , value( 'lib_E2TPLF0'  ) );
	value( 'E2TPLF1'   , value( 'lib_E2TPLF1'  ) );
	value( 'E2TPLF2'   , value( 'lib_E2TPLF2'  ) );
	value( 'E2TPLF3'   , value( 'lib_E2TPLF3'  ) );
	value( 'E2TPLF4'   , value( 'lib_E2TPLF4'  ) );
	value( 'TempCorr0' , value( 'lib_TempCorr0') );
	value( 'TempCorr1' , value( 'lib_TempCorr1') );
	value( 'TempCorr2' , value( 'lib_TempCorr2') );
	value( 'TempCorr3' , value( 'lib_TempCorr3') );
	value( 'TempCorr4' , value( 'lib_TempCorr4') );
	value( 'TempCorrF' , value( 'lib_TempCorrF') );

  }
  										  
};

on_change{'use_pb_library_values'} = define() {

	state = value("use_pb_library_values");

	enable( 'pb_library'         , state == 1 );

	//enable( 'ui_pb_description'  ,   state == 0 );
	//enable( 'ui_pb_type'         ,   state == 0 );
	enable( 'TurbEffG'  ,   state == 0 );
	enable( 'MaxGrOut'  ,   state == 0 );
	enable( 'MinGrOut'  ,	state == 0 );
	enable( 'TurSUE'    ,	state == 0 );
	enable( 'T2EPLF0'   ,	state == 0 );
	enable( 'T2EPLF1'   ,	state == 0 );
	enable( 'T2EPLF2'   ,	state == 0 );
	enable( 'T2EPLF3'   ,	state == 0 );
	enable( 'T2EPLF4'   ,	state == 0 );
	enable( 'E2TPLF0'   ,	state == 0 );
	enable( 'E2TPLF1'   ,	state == 0 );
	enable( 'E2TPLF2'   ,	state == 0 );
	enable( 'E2TPLF3'   ,	state == 0 );
	enable( 'E2TPLF4'   ,	state == 0 );
	enable( 'TempCorr0' ,   state == 0 );
	enable( 'TempCorr1' ,   state == 0 );
	enable( 'TempCorr2' ,	state == 0 );
	enable( 'TempCorr3' ,	state == 0 );
	enable( 'TempCorr4' ,	state == 0 );
	enable( 'TempCorrF' ,	state == 0 );
};

function loss_adjustment_set() 
{
	if (financing() != "LCOE Calculator" && financing() != "None") {
		if (value('system_use_lifetime_output') == 1) {
			property('adjust', 'AnalysisPeriod', value('analysis_period'));
		}
		else {
			property('adjust', 'AnalysisPeriod', 1);
		}
	}
	else {
		property('adjust', 'AnalysisPeriod', 1);
	}
}