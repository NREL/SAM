User Defined Power Cycle
1008
1221
41
GroupBox

1
8
Name
5
42
User Defined Power Cycle Design Parameters
X
3
3
Y
3
6
Width
3
995
Height
3
126
Tool Tip
5
0
Caption
5
42
User Defined Power Cycle Design Parameters
Bold
2
1
Button

1
8
Name
5
14
btn_gen_inputs
X
3
318
Y
3
432
Width
3
501
Height
3
26
Tool Tip
5
0
Caption
5
61
Generate New Independent Variable Combinations in Table Below
TabOrder
3
4294967295
Label

1
13
Name
5
8
lbl_udpc
X
3
24
Y
3
27
Width
3
954
Height
3
45
Tool Tip
5
0
Caption
5
0
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
GroupBox

1
8
Name
5
8
object 4
X
3
15
Y
3
414
Width
3
965
Height
3
150
Tool Tip
5
0
Caption
5
60
Create a template table to populate with your own cycle data
Bold
2
1
GroupBox

1
8
Name
5
10
object 417
X
3
12
Y
3
168
Width
3
965
Height
3
229
Tool Tip
5
0
Caption
5
68
Variable information calculated from power cycle data in table below
Bold
2
1
GroupBox

1
8
Name
5
9
object 42
X
3
3
Y
3
138
Width
3
995
Height
3
1065
Tool Tip
5
0
Caption
5
86
Performance as Function of HTF Temperature, HTF Mass Flow Rate and Ambient Temperature
Bold
2
1
Numeric

1
17
Name
5
17
ud_COPY_T_HTF_des
X
3
180
Y
3
486
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
19
ud_Q_dot_HTF_ND_des
X
3
381
Y
3
369
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
12
ud_T_amb_des
X
3
855
Y
3
486
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
17
ud_T_amb_des_calc
X
3
855
Y
3
240
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
13
ud_T_amb_high
X
3
855
Y
3
510
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
18
ud_T_amb_high_calc
X
3
855
Y
3
264
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
ud_T_amb_levels
X
3
855
Y
3
534
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
0
Format
3
1
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
12
ud_T_amb_low
X
3
855
Y
3
462
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
17
ud_T_amb_low_calc
X
3
855
Y
3
216
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
17
ud_T_htf_des_calc
X
3
186
Y
3
240
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
13
ud_T_htf_high
X
3
180
Y
3
510
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
18
ud_T_htf_high_calc
X
3
186
Y
3
264
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
ud_T_htf_levels
X
3
180
Y
3
534
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
0
Format
3
1
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
12
ud_T_htf_low
X
3
180
Y
3
462
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
17
ud_T_htf_low_calc
X
3
186
Y
3
216
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
18
ud_W_dot_cool_calc
X
3
645
Y
3
102
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
23
ud_W_dot_cooling_ND_des
X
3
648
Y
3
345
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
21
ud_W_dot_gross_ND_des
X
3
381
Y
3
345
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
CheckBox

1
9
Name
5
19
ud_enable_gen_table
X
3
243
Y
3
432
Width
3
26
Height
3
24
Tool Tip
5
0
Caption
5
0
State
2
0
TabOrder
3
4294967295
Numeric

1
17
Name
5
19
ud_f_W_dot_cool_des
X
3
645
Y
3
78
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
DataMatrix

1
27
Name
5
9
ud_ind_od
X
3
183
Y
3
579
Width
3
480
Height
3
606
Tool Tip
5
0
PasteAppendRows
2
1
PasteAppendCols
2
0
ShowButtons
2
1
ShowRows
2
1
ShowRowLabels
2
0
RowLabels
5
0
ShadeR0C0
2
0
VerticalLabel
5
0
HorizontalLabel
5
0
ShadeC0
2
0
ShowCols
2
1
ShowColLabels
2
1
ColLabels
5
76
HTF Temp. , HTF ṁ , Ambient Temp. , Ẇ cycle , Heat in , Ẇ cooling , ṁ water 
NumRowsLabel
5
5
Rows:
NumColsLabel
5
5
Cols:
Layout
3
0
ChoiceColumn
3
4294967295
Choices
5
15
Choice1,Choice2
HideColumn
3
4294967295
ShowColumn
3
4294967295
ColorMap
2
0
Numeric

1
17
Name
5
17
ud_m_dot_des_calc
X
3
489
Y
3
240
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
ud_m_dot_design
X
3
489
Y
3
486
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
18
ud_m_dot_high_calc
X
3
489
Y
3
264
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
17
ud_m_dot_htf_high
X
3
489
Y
3
510
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
19
ud_m_dot_htf_levels
X
3
489
Y
3
534
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
0
Format
3
1
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
16
ud_m_dot_htf_low
X
3
489
Y
3
462
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
17
ud_m_dot_low_calc
X
3
489
Y
3
216
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
21
ud_m_dot_water_ND_des
X
3
648
Y
3
369
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
23
ud_m_dot_water_cool_des
X
3
231
Y
3
78
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
ud_n_T_amb_calc
X
3
855
Y
3
288
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
0
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
ud_n_T_htf_calc
X
3
186
Y
3
288
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
0
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
ud_n_m_dot_calc
X
3
489
Y
3
288
Width
3
90
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
0
Format
3
0
Decimals
3
0
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Label

1
13
Name
5
18
udpc_ind_var_label
X
3
60
Y
3
192
Width
3
150
Height
3
24
Tool Tip
5
0
Caption
5
21
Independent variables
TextColour
4
0
0
0
255
Bold
2
1
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
16
updc_d_var_label
X
3
60
Y
3
321
Width
3
363
Height
3
24
Tool Tip
5
0
Caption
5
68
Dependent variables at system design values of independent variables
TextColour
4
0
0
0
255
Bold
2
1
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0

33
ud_COPY_T_HTF_des
3
1
Design HTF temperature
°C
Power Cycle
0
8
1
1
1
1
0
Default
ud_Q_dot_HTF_ND_des
3
1
Normalized heat input
 
 
0
8
1
1
1
1
0
Numeric
ud_T_amb_des
3
1
Ambient temperature
°C
Power Cycle
0
2
1
1
1
1
27
Default
ud_T_amb_des_calc
3
1
Design ambient temperature
°C
Power Cycle
0
8
1
1
1
1
0
Default
ud_T_amb_high
3
1
High ambient temperature
°C
Power Cycle
0
0
1
1
1
1
55
Default
ud_T_amb_high_calc
3
1
High ambient temperature
°C
Power Cycle
0
8
1
1
1
1
0
Default
ud_T_amb_levels
3
1
Ambient temperature parametric values
 
Power Cycle
0
0
1
1
1
1
20
Default
ud_T_amb_low
3
1
Low ambient temperature
°C
Power Cycle
0
0
1
1
1
1
0
Default
ud_T_amb_low_calc
3
1
Low ambient temperature
°C
Power Cycle
0
8
1
1
1
1
0
Default
ud_T_htf_des_calc
3
1
Design HTF temperature
°C
Power Cycle
0
8
1
1
1
1
0
Default
ud_T_htf_high
3
1
High HTF temperature
°C
Power Cycle
0
0
1
1
1
1
580
Default
ud_T_htf_high_calc
3
1
High HTF temperature
°C
Power Cycle
0
8
1
1
1
1
0
Default
ud_T_htf_levels
3
1
HTF parametric values
 
Power Cycle
0
0
1
1
1
1
20
Default
ud_T_htf_low
3
1
Low HTF temperature
°C
Power Cycle
0
0
1
1
1
1
500
Default
ud_T_htf_low_calc
3
1
Low HTF temperature
°C
Power Cycle
0
8
1
1
1
1
0
Default
ud_W_dot_cool_calc
3
1
Gross power consumed by cooling system
MWe
Power Cycle
0
8
1
1
1
1
0
Default
ud_W_dot_cooling_ND_des
3
1
Normalized cooling power
 
 
0
8
1
1
1
1
0
Numeric
ud_W_dot_gross_ND_des
3
1
Normalized gross power
 
 
0
8
1
1
1
1
0
Numeric
ud_enable_gen_table
3
1
Enable table inputs and macro
 
 
0
0
1
1
1
1
0
Default
ud_f_W_dot_cool_des
3
1
Gross power consumed by cooling system
%
Power Cycle
0
2
1
1
1
1
0
Default
ud_ind_od
3
3
Off design parametrics
 
Power Cycle
0
1
1
3
3
7
1 1 1 1 1 1 1 
1 1 1 1 1 1 1 
1 1 1 1 1 1 1 

DataMatrix
ud_m_dot_des_calc
3
1
Design normalized HTF ṁ
 
Power Cycle
0
8
1
1
1
1
0
Default
ud_m_dot_design
3
1
Design normalized HTF ṁ
 
Power Cycle
0
8
1
1
1
1
1
Default
ud_m_dot_high_calc
3
1
High normalized HTF ṁ
 
Power Cycle
0
8
1
1
1
1
0
Default
ud_m_dot_htf_high
3
1
High normalized HTF ṁ
 
Power Cycle
0
0
1
1
1
1
1.2
Default
ud_m_dot_htf_levels
3
1
HTF ṁ parametric values
 
Power Cycle
0
0
1
1
1
1
20
Default
ud_m_dot_htf_low
3
1
Low normalized HTF ṁ
 
Power Cycle
0
0
1
1
1
1
0.3
Default
ud_m_dot_low_calc
3
1
Low normalized HTF ṁ
 
Power Cycle
0
8
1
1
1
1
0
Default
ud_m_dot_water_ND_des
3
1
Normalized water use
 
 
0
8
1
1
1
1
0
Numeric
ud_m_dot_water_cool_des
3
1
Cooling system water usage
kg/s
Power Cycle
0
2
1
1
1
1
0
Default
ud_n_T_amb_calc
3
1
Ambient temperature parametric values
 
Power Cycle
0
8
1
1
1
1
0
Default
ud_n_T_htf_calc
3
1
HTF parametric values
 
 
0
8
1
1
1
1
0
Default
ud_n_m_dot_calc
3
1
HTF ṁ parametric values
 
Power Cycle
0
8
1
1
1
1
0
Default

2574
//
//  ONLY ADD UI INDICATOR, COMBO CONVERTERS, AND
//  INPUT AGGREGATOR EQUATIONS BELOW!
//
//   If the equations change an input value
//   modify the below main MIMO or add one,
//   referencing in ssc_equations.h
//

	
equations{ 'ud_m_dot_design' } = define(){
	return 1.0; };
	
// Just UI indicator
equations{ 'ud_W_dot_cool_calc' } = define(){
	return ${P_ref}*${ud_f_W_dot_cool_des}/100.0; };

// Just UI indicator
equations{ 'ud_COPY_T_HTF_des' } = define(){
	return ${T_htf_hot_des}; };

// Just UI indicators
equations{ '$MIMO$ ui_udpc_checks' } = define()
{
	obj = ssc_create();
	ssc_var(obj, "ud_ind_od", ${ud_ind_od});
	ssc_var(obj, "T_htf_des_in", ${ud_COPY_T_HTF_des});

	ret = ssc_exec(obj, 'ui_udpc_checks');

	if(ret==0) {
		n_T_htf_calc = ssc_var(obj, "n_T_htf_pars");		//[MWt-hr]
		T_htf_low = ssc_var(obj, "T_htf_low");
		T_htf_des = ssc_var(obj, "T_htf_des");
		T_htf_high = ssc_var(obj, "T_htf_high");
		
		n_T_amb_calc = ssc_var(obj, "n_T_amb_pars");
		T_amb_low = ssc_var(obj, "T_amb_low");
		T_amb_des = ssc_var(obj, "T_amb_des");
		T_amb_high = ssc_var(obj, "T_amb_high");
		
		n_m_dot_calc = ssc_var(obj, "n_m_dot_pars");
		m_dot_low = ssc_var(obj, "m_dot_low");
		m_dot_des = ssc_var(obj, "m_dot_des");
		m_dot_high = ssc_var(obj, "m_dot_high");
		
		W_dot_gross_ND_des = ssc_var(obj, "W_dot_gross_ND_des");
		Q_dot_HTF_ND_des = ssc_var(obj, "Q_dot_HTF_ND_des");
		W_dot_cooling_ND_des = ssc_var(obj, "W_dot_cooling_ND_des");
		m_dot_water_ND_des = ssc_var(obj, "m_dot_water_ND_des");
	}
	else {
		n_T_htf_calc = 1./0.;
		T_htf_low = 1./0.;
		T_htf_des = 1./0.;
		T_htf_high = 1./0.;
		
		n_T_amb_calc = 1./0.;
		T_amb_low = 1./0.;
		T_amb_des = 1./0.;
		T_amb_high = 1./0.;
		
		n_m_dot_calc = 1./0.;
		m_dot_low = 1./0.;
		m_dot_des = 1./0.;
		m_dot_high = 1./0.;
		
		W_dot_gross_ND_des = 1./0.;
		Q_dot_HTF_ND_des = 1./0.;
		W_dot_cooling_ND_des = 1./0.;
		m_dot_water_ND_des = 1./0.;
	}
	
	${ud_n_T_htf_calc} = n_T_htf_calc;
	${ud_T_htf_low_calc} = T_htf_low;
	${ud_T_htf_des_calc} = T_htf_des;
	${ud_T_htf_high_calc} = T_htf_high;
	
	${ud_n_T_amb_calc} = n_T_amb_calc;
	${ud_T_amb_low_calc} = T_amb_low;
	${ud_T_amb_des_calc} = T_amb_des;
	${ud_T_amb_high_calc} = T_amb_high;
	
	${ud_n_m_dot_calc} = n_m_dot_calc;
	${ud_m_dot_low_calc} = m_dot_low;
	${ud_m_dot_des_calc} = m_dot_des;
	${ud_m_dot_high_calc} = m_dot_high;
	
	${ud_W_dot_gross_ND_des} = W_dot_gross_ND_des;
	${ud_Q_dot_HTF_ND_des} = Q_dot_HTF_ND_des;
	${ud_W_dot_cooling_ND_des} = W_dot_cooling_ND_des;
	${ud_m_dot_water_ND_des} = m_dot_water_ND_des;
	
	ssc_free( obj );
};

3165
on_load{'User Defined Power Cycle'} = define(){
	on_change{'ud_enable_gen_table'}();
	if ( technology() == 'MSPT' ) 
	{msg = 'The User Defined Power Cycle model requires that you provide input data generated by an external power cycle model. To model an sCO2 cycle, use the sCO2 Cycle Integration macro with data from the NREL sCO2 Python model. (Click Macro under the Simulate button to show a list of macros.)';}
	else 
	{msg='The User Defined Power Cycle model requires that you provide input data generated by an external power cycle model. See Help for details.';}
	property( 'lbl_udpc','Caption',msg);
};

on_change{'btn_gen_inputs'} = define() {
	//value("ud_ind_od", [[1,2,3,4,5,6,7],[11,22,33,44,55,66,77]]);
	
	T_htf_low = value("ud_T_htf_low");
	T_htf_des = value("ud_COPY_T_HTF_des");
	T_htf_high = value("ud_T_htf_high");
	n_T_htf = value("ud_T_htf_levels");
	m_dot_low = value("ud_m_dot_htf_low");
	m_dot_des = value("ud_m_dot_design");
	m_dot_high = value("ud_m_dot_htf_high");
	n_m_dot = value("ud_m_dot_htf_levels");
	T_amb_low = value("ud_T_amb_low");
	T_amb_des = value("ud_T_amb_des");
	T_amb_high = value("ud_T_amb_high");
	n_T_amb = value("ud_T_amb_levels");
	
	if ( n_T_htf <= 1 ) {
		T_htf_ini = T_htf_des;
		dT_htf = 0;
	}
	else {
		T_htf_ini = T_htf_low;
		dT_htf = (T_htf_high - T_htf_low) / max((n_T_htf - 1), 1);
	}
	if ( n_m_dot <= 1 ) {
		m_dot_ini = m_dot_des;
		dm_dot = 0;
	}
	else {
		m_dot_ini = m_dot_low;
		dm_dot = (m_dot_high - m_dot_low) / max((n_m_dot - 1), 1);
	}
	if ( n_T_amb <= 1 ) {
		T_amb_ini = T_amb_des;
		dT_amb = 0;
	}
	else {
		T_amb_ini = T_amb_low;
		dT_amb = (T_amb_high - T_amb_low) / max((n_T_amb - 1), 1);
	}
	
	tbl_inputs = [];
	tbl_idx = 0;
	m_dot_lvls = [m_dot_low, m_dot_des, m_dot_high];
	for( i=0; i<#m_dot_lvls; i++) {
		for( j=0; j<n_T_htf; j++ ) {
			row = [];
			row += T_htf_ini + j*dT_htf;
			row += m_dot_lvls[i];
			row += T_amb_des;
			row += [0, 0, 0, 0];
			tbl_inputs[tbl_idx] = row;
			tbl_idx++;
		}
	}

	T_amb_lvls = [T_amb_low, T_amb_des, T_amb_high];
	for( i=0; i<#T_amb_lvls; i++) {
		for( j=0; j<n_m_dot; j++ ) {
			row = [];
			row += T_htf_des;
			row += m_dot_ini + j*dm_dot;
			row += T_amb_lvls[i];
			row += [0, 0, 0, 0];
			tbl_inputs[tbl_idx] = row;
			tbl_idx++;
		}
	}
	
	T_htf_lvls = [T_htf_low, T_htf_des, T_htf_high];
	for( i=0; i<#T_htf_lvls; i++) {
		for( j=0; j<n_T_amb; j++ ) {
			row = [];
			row += T_htf_lvls[i];
			row += m_dot_des;
			row += T_amb_ini + j*dT_amb;
			row += [0, 0, 0, 0];
			tbl_inputs[tbl_idx] = row;
			tbl_idx++;
		}
	}

	value("ud_ind_od", tbl_inputs);
	
	value("ud_enable_gen_table", 0);
	on_change{'ud_enable_gen_table'}();
};

on_change{'ud_enable_gen_table'} = define()
{
	tf = value('ud_enable_gen_table')==1;
	enable('btn_gen_inputs', tf);
	
	enable('ud_T_htf_levels',tf);
	enable('ud_T_htf_low', tf);
	enable('ud_COPY_T_HTF_des',tf);
	enable('ud_T_htf_high',tf);
	
	enable('ud_m_dot_htf_levels', tf);
	enable('ud_m_dot_htf_low',tf);
	enable('ud_m_dot_design',tf);
	enable('ud_m_dot_htf_high',tf);
	
	enable('ud_T_amb_levels',tf);
	enable('ud_T_amb_low',tf);
	enable('ud_T_amb_des',tf);
	enable('ud_T_amb_high',tf);
	
	refresh();
};