{
    "Name": "Battery Life Options",
    "Width": 1051.0,
    "Height": 167.0,
    "FormObjects": {
        "GroupBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "Battery Bank Sizing"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 6.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 1042.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 162.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Battery Life Options"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "lbl_batt_chem"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 384.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 75.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 624.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 48.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": ""
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "lbl_batt_life_message"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 384.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 126.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 624.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 36.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": ""
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 711"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 15.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 990.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 48.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "The battery life model determines how battery capacity decreases over time. Capacity may decrease with the number of charge and discharge cycles (cycle degradation), with age regardless of cycling (calendar degradation), or both."
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "RadioChoice": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ui_batt_life_model"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 42.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 72.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 339.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 78.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Selection": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Items": {
                    "Type": 6.0,
                    "StringList": "Cycle and calendar degradation|Li-ion NMC/Graphite|Li-ion LMO/LTO"
                },
                "ShowCaptions": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Horizontal": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 1.0
                }
            }
        }
    },
    "VarDatabase": {
        "ui_batt_life_model": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Battery life model option for user interface",
            "Units": "0/1/2",
            "Group": "Battery Life",
            "IndexLabels": "Cycle and calendar degradation|Li-ion NMC/Graphite|Li-ion LMO/LTO",
            "Flags": 3.0,
            "DefaultValue": 0.0,
            "UIObject": "RadioChoice",
            "sscVariableName": "",
            "sscVariableValue": ""
        }
    },
    "Equations": [],
    "Callbacks": [
        "on_load{'Battery Life Options'} = define() {",
        "\tbattery_type_message();",
        "\tlife_message();",
        "\t// batt_life_model is set on battery life forms",
        "\t// for exclusive tabs for batt techs except fuel cell",
        "\tif ( technology()=='Fuel Cell' )",
        "\t{",
        "\t\tvalue('batt_life_model',${ui_batt_life_model});",
        "\t}",
        "};",
        "",
        "on_change{'ui_batt_life_model'} = define(){",
        "\tbattery_type_message();",
        "\tlife_message();",
        "\tif ( technology() != 'Fuel Cell' )",
        "\t{",
        "\t\tset_batt_life_excl_var();",
        "\t}\t",
        "\telse // fuel cell only",
        "\t{",
        "\t\tvalue('batt_life_model',${ui_batt_life_model});",
        "\t\tcycle_calendar_message();",
        "\t}",
        "};",
        "",
        "function set_batt_life_excl_var()",
        "{",
        "\tvalue('batt_life_excl', value('ui_batt_life_model'));",
        "}",
        "",
        "function life_message()",
        "{",
        "\tmsg = '';",
        "\tclr = 'Black';",
        "\toptions = ['Tables','Li-ion NMC/Graphite','Li-ion LMO/LTO'];",
        "\tif ( ${batt_chem} == 0 )",
        "\t{",
        "\t\tmsg = 'Only the Cycle and Calendar Degradation option is available for lead-acid and flow battery types.';",
        "\t}",
        "\telseif ( ${ui_batt_life_model} == 0 )",
        "\t{",
        "\t\tmsg = 'The Cycle and Calendar Degradation inputs below define battery degradation curves.';",
        "\t}",
        "\telse",
        "\t{",
        "\t\tmsg = 'This option uses a special battery life model for the ' + options[${ui_batt_life_model}] + ' battery type that combines cycle and calendar degradation.';",
        "\t}",
        "\tproperty('lbl_batt_life_message','Caption',msg);",
        "\tproperty('lbl_batt_life_message','TextColour',clr);",
        "}",
        "",
        "function battery_type_message()",
        "{",
        "\tclr = 'Black';",
        "\tmsg = '';",
        "\ttypes = ['Lead Acid: Flooded','Lead Acid: VRLA Gel','Lead Acid: VRLA AGM','Lead Acid: Custom','Lithium Ion: Lithium Manganese Oxide (LMO/Graphite)','Lithium Ion: Lithium Iron Phosphate (LFP/Graphite)','Lithium Ion: Lithium Cobalt Oxide (LCO/Graphite)','Lithium Ion: LMO/Lithium Titanate (LMO/LTO)','Lithium Ion: Nickel Manganese Cobalt Oxide (NMC/Graphite)','Lithium Ion: Nickel Cobalt Aluminum Oxide (NCA/Graphite)','Lithium Ion: Custom','Flow Battery: Vanadium','Flow Battery: Iron'];",
        "\tif ( ${batt_chem} == 1 ) // Li-ion",
        "\t{",
        "\t\tif ( ${batt_type} == 7 ) // LMO/LTO",
        "\t\t{",
        "\t\t\tbest_life = 'Li-ion LMO/LTO';",
        "\t\t\tif ( ${ui_batt_life_model} != 2 ) { clr = 'Red'; }",
        "\t\t}",
        "\t\telseif ( ${batt_type} == 8 ) // NMC/Graphite",
        "\t\t{",
        "\t\t\tbest_life = 'Li-ion NMC/Graphite'; ",
        "\t\t\tif ( ${ui_batt_life_model} != 1 ) { clr = 'Red'; }",
        "\t\t}",
        "\t\telse // other Li-ion types",
        "\t\t{",
        "\t\t\tbest_life = 'empirical cycle and calendar degradation'; ",
        "\t\t\tif ( ${ui_batt_life_model} != 0 || ${batt_calendar_choice} != 1 ) { clr = 'Red'; }",
        "\t\t}",
        "\t}",
        "\telse // lead acid and flow",
        "\t{",
        "\t\tbest_life = 'cycle degradation';",
        "\t\tif ( ${ui_batt_life_model} != 0 || ${batt_calendar_choice} != 0 ) { clr = 'Red'; }",
        "\t}",
        "\tmsg += 'The best battery life option for ' + types[${batt_type}] + ' (batt_type='+ ${batt_type}+')' + ' is ' + best_life + '.';",
        "\tif ( clr == 'Red' ) { msg+=' Choose the appropriate battery life options here or reselect the battery type on the Battery Cell and System page to reset to the default options.'; }",
        "\tproperty('lbl_batt_chem','Caption',msg);",
        "\tproperty('lbl_batt_chem','TextColour',clr);",
        "}",
        ""
    ]
}