{
    "Name": "Utility Rate - Energy Charge",
    "Width": 1418.0,
    "Height": 657.0,
    "FormObjects": {
        "GroupBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "GroupBox3"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 9.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 1403.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 647.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Rates for Energy Charges"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "lbl_wkday"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 789.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 30.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 72.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Weekday"
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 0.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "lbl_wkend"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 789.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 348.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 72.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Weekend"
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 0.0
                }
            }
        },
        "DiurnalPeriod": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_ec_sched_weekday"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 792.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 51.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 514.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 272.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "Schedule": {
                    "Type": 5.0,
                    "String": "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"
                },
                "Max": {
                    "Type": 3.0,
                    "Integer": 36.0
                },
                "Min": {
                    "Type": 3.0,
                    "Integer": 1.0
                }
            }
        },
        "DiurnalPeriod": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_ec_sched_weekend"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 789.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 369.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 514.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 272.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "Schedule": {
                    "Type": 5.0,
                    "String": "111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"
                },
                "Max": {
                    "Type": 3.0,
                    "Integer": 36.0
                },
                "Min": {
                    "Type": 3.0,
                    "Integer": 1.0
                }
            }
        },
        "DataMatrix": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_ec_tou_mat"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 18.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 30.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 730.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 615.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "PasteAppendRows": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "PasteAppendCols": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowButtons": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ShowRows": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ShowRowLabels": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "RowLabels": {
                    "Type": 5.0,
                    "String": ""
                },
                "ShadeR0C0": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "VerticalLabel": {
                    "Type": 5.0,
                    "String": ""
                },
                "HorizontalLabel": {
                    "Type": 5.0,
                    "String": ""
                },
                "ShadeC0": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowCols": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowColLabels": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ColLabels": {
                    "Type": 5.0,
                    "String": "Period,Tier,Max. Usage,Max. Usage Units,Buy ($/kWh),Sell ($/kWh)"
                },
                "NumRowsLabel": {
                    "Type": 5.0,
                    "String": "Number of entries:"
                },
                "NumColsLabel": {
                    "Type": 5.0,
                    "String": "Cols:"
                },
                "Layout": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "ChoiceColumn": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Choices": {
                    "Type": 5.0,
                    "String": "kWh,kWh/kW,kWh daily,kWh/kW daily"
                },
                "HideColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "ShowColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "ColorMap": {
                    "Type": 2.0,
                    "Boolean": 0.0
                }
            }
        }
    },
    "VarDatabase": {
        "ur_ec_sched_weekday": {
            "Version": 4.0,
            "Type": 3.0,
            "Label": "Energy charge TOU weekday schedule",
            "Units": " ",
            "Group": "Electricity Rates - Energy Charge Rates",
            "IndexLabels": "",
            "Flags": 1.0,
            "DefaultValue": [
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ]
            ],
            "UIObject": "DiurnalPeriod",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_ec_sched_weekend": {
            "Version": 4.0,
            "Type": 3.0,
            "Label": "Energy charge TOU weekend schedule",
            "Units": " ",
            "Group": "Electricity Rates - Energy Charge Rates",
            "IndexLabels": "",
            "Flags": 1.0,
            "DefaultValue": [
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ],
                [
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                ]
            ],
            "UIObject": "DiurnalPeriod",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_ec_tou_mat": {
            "Version": 4.0,
            "Type": 3.0,
            "Label": "Energy charge TOU rate matrix",
            "Units": " ",
            "Group": "Electricity Rates - Energy Charge Rates",
            "IndexLabels": "",
            "Flags": 3.0,
            "DefaultValue": [
                [
                    1.0,
                    1.0,
                    9.6,
                    2.0,
                    0.16756,
                    0.0
                ],
                [
                    1.0,
                    2.0,
                    12.48,
                    2.0,
                    0.17999,
                    0.0
                ],
                [
                    1.0,
                    3.0,
                    19.2,
                    2.0,
                    0.34805,
                    0.0
                ],
                [
                    1.0,
                    4.0,
                    1e38,
                    2.0,
                    0.45718,
                    0.0
                ],
                [
                    2.0,
                    1.0,
                    9.6,
                    2.0,
                    0.14747,
                    0.0
                ],
                [
                    2.0,
                    2.0,
                    12.48,
                    2.0,
                    0.1599,
                    0.0
                ],
                [
                    2.0,
                    3.0,
                    19.2,
                    2.0,
                    0.3134,
                    0.0
                ],
                [
                    2.0,
                    4.0,
                    1e38,
                    2.0,
                    0.34283,
                    0.0
                ],
                [
                    3.0,
                    1.0,
                    10.1,
                    2.0,
                    0.14982,
                    0.0
                ],
                [
                    3.0,
                    2.0,
                    13.13,
                    2.0,
                    0.16225,
                    0.0
                ],
                [
                    3.0,
                    3.0,
                    20.2,
                    2.0,
                    0.29989,
                    0.0
                ],
                [
                    3.0,
                    4.0,
                    1e38,
                    2.0,
                    0.35231,
                    0.0
                ],
                [
                    4.0,
                    1.0,
                    10.1,
                    2.0,
                    0.14747,
                    0.0
                ],
                [
                    4.0,
                    2.0,
                    13.13,
                    2.0,
                    0.1599,
                    0.0
                ],
                [
                    4.0,
                    3.0,
                    20.2,
                    2.0,
                    0.29603,
                    0.0
                ],
                [
                    4.0,
                    4.0,
                    1e38,
                    2.0,
                    0.34241,
                    0.0
                ]
            ],
            "UIObject": "DataMatrix",
            "sscVariableName": "",
            "sscVariableValue": ""
        }
    },
    "Equations": [],
    "Callbacks": [
        "// this callback script uses functions defined on Utility Rate - Flat",
        "",
        "on_load{'Utility Rate - Energy Charge'} = define(){",
        "\tset_ec_schedule_inputs();",
        "\tcheck_fom_sell_rates();",
        "};",
        "",
        "on_change{'ur_ec_tou_mat'} = define(){",
        "\tset_ec_schedule_inputs();",
        "\tcheck_fom_sell_rates();",
        "};",
        "",
        "// check sell rates and set to zero if non-zero",
        "// can happen via LK script or URDB rate download",
        "function check_fom_sell_rates()",
        "{",
        "\tif ( is_fom_bool() || is_merchant_plant() || is_iph())",
        "\t{",
        "\t\tx = value('ur_ec_tou_mat');",
        "\t\tis_sell_rate = false;",
        "\t\tfor (i=0; i<#x; i++ )",
        "\t\t{",
        "\t\t\tif ( x[i][5] != 0 ) ",
        "\t\t\t{",
        "\t\t\t\ty[i] = [x[i][0],x[i][1],x[i][2],x[i][3],x[i][4],0]; ",
        "\t\t\t\tis_sell_rate = true;",
        "\t\t\t}",
        "\t\t}",
        "\t\tif ( is_sell_rate )",
        "\t\t{",
        "\t\t\tmsgbox('Setting all Sell Rate(s) to Zero\\nSell rates for front-of-meter battery systems are disabled and should be set to zero. Versions of SAM older than SAM 2020.11.29 r2 incorrectly allowed non-zero sell rates. This file may have been created with an older version of SAM or an LK script may have set sell rates to non-zero values.');",
        "\t\t\tvalue('ur_ec_tou_mat',y);\t\t",
        "\t\t}",
        "\t}",
        "}"
    ]
}