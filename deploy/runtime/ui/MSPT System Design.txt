MSPT System Design
871
1091
26
Numeric

1
17
Name
5
5
P_ref
X
3
687
Y
3
117
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
6
Numeric

1
17
Name
5
9
Q_rec_des
X
3
219
Y
3
165
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
3
Numeric

1
17
Name
5
14
T_htf_cold_des
X
3
219
Y
3
240
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4
Numeric

1
17
Name
5
13
T_htf_hot_des
X
3
219
Y
3
216
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
3
Numeric

1
17
Name
5
10
design_eff
X
3
687
Y
3
165
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
4
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
8
Numeric

1
17
Name
5
7
dni_des
X
3
219
Y
3
117
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
1
Label

1
13
Name
5
10
heater_msg
X
3
408
Y
3
393
Width
3
300
Height
3
54
Tool Tip
5
0
Caption
5
0
TextColour
4
255
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Numeric

1
17
Name
5
11
heater_mult
X
3
219
Y
3
399
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
CheckBox

1
9
Name
5
15
is_parallel_htr
X
3
306
Y
3
372
Width
3
24
Height
3
21
Tool Tip
5
0
Caption
5
0
State
2
0
TabOrder
3
4294967295
Numeric

1
17
Name
5
9
nameplate
X
3
687
Y
3
141
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Divider

1
10
Name
5
14
obj_heater_div
X
3
12
Y
3
354
Width
3
405
Height
3
16
Tool Tip
5
0
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
19
Electric HTF Heater
Bold
2
1
Image

1
8
Name
5
9
object 12
X
3
6
Y
3
483
Width
3
853
Height
3
556
Tool Tip
5
0
Image
7
MSPT System Design_object 12.png
Centered
2
1
Divider

1
10
Name
5
9
object 21
X
3
12
Y
3
273
Width
3
405
Height
3
16
Tool Tip
5
0
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
15
Thermal Storage
Bold
2
1
Divider

1
10
Name
5
11
object 2119
X
3
12
Y
3
198
Width
3
405
Height
3
16
Tool Tip
5
0
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
18
Tower and Receiver
Bold
2
1
Divider

1
10
Name
5
11
object 2120
X
3
444
Y
3
96
Width
3
405
Height
3
22
Tool Tip
5
0
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
11
Power Cycle
Bold
2
1
Divider

1
10
Name
5
11
object 2121
X
3
12
Y
3
96
Width
3
405
Height
3
16
Tool Tip
5
0
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
15
Heliostat Field
Bold
2
1
GroupBox

1
8
Name
5
8
object 4
X
3
6
Y
3
12
Width
3
855
Height
3
462
Tool Tip
5
0
Caption
5
23
Design Point Parameters
Bold
2
1
Label

1
13
Name
5
8
object 7
X
3
18
Y
3
30
Width
3
831
Height
3
66
Tool Tip
5
0
Caption
5
294
The design point parameters determine the nominal ratings of each part of the power tower system. After specifying the design point parameters here, you can specify details of each component of the system on the Heliostat Field, Tower and Receiver, Thermal Storage, and Power Cycle input pages.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
GroupBox

1
8
Name
5
14
picture_border
X
3
6
Y
3
477
Width
3
855
Height
3
567
Tool Tip
5
0
Caption
5
0
Bold
2
1
Numeric

1
17
Name
5
21
q_dot_heater_des_calc
X
3
219
Y
3
423
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
11
q_pb_design
X
3
687
Y
3
189
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
6
solarm
X
3
219
Y
3
141
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
2
Numeric

1
17
Name
5
7
tshours
X
3
219
Y
3
294
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
1
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
5
Numeric

1
17
Name
5
14
tshours_heater
X
3
219
Y
3
447
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
10
tshours_sf
X
3
219
Y
3
318
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
7
Label

1
13
Name
5
6
ui_msg
X
3
447
Y
3
246
Width
3
405
Height
3
87
Tool Tip
5
0
Caption
5
0
TextColour
4
255
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1

79
A_rec_calc
3
1
 
m2
 
0
8
1
1
1
1
-999
Default
A_sf_calc
3
1
 
m2
 
0
8
1
1
1
1
-999
Default
D_rec_calc
3
1
 
m
 
0
8
1
1
1
1
-999
Default
E_heater_su_des_calc
3
1
 
 
 
0
8
1
1
1
1
-999
Default
L_tower_piping_calc
3
1
 
m
 
0
8
1
1
1
1
-999
Default
N_hel_calc
3
1
 
 
 
0
8
1
1
1
1
-999
Default
P_ref
3
1
Design turbine gross output
MWe
System Design
0
2
1
1
1
1
110
Default
Q_rec_des
3
1
Receiver thermal power
MWt
System Design
0
8
1
1
1
1
0
Default
Q_tes_des_calc
3
1
 
MWh-t
 
0
8
1
1
1
1
-999
Default
T_htf_cold_des
3
1
HTF cold temperature
°C
System Design
0
2
1
1
1
1
290
Default
T_htf_hot_des
3
1
HTF hot temperature
°C
System Design
0
2
1
1
1
1
574
Default
V_tes_htf_avail_des_calc
3
1
 
m3
 
0
8
1
1
1
1
-999
Default
V_tes_htf_total_des_calc
3
1
 
m3
 
0
8
1
1
1
1
-999
Default
W_dot_bop_design_calc
3
1
 
MWe
 
0
8
1
1
1
1
-999
Default
W_dot_col_tracking_des_calc
3
1
 
MWe
 
0
8
1
1
1
1
-999
Default
W_dot_cycle_cooling_des_calc
3
1
 
MWe
 
0
8
1
1
1
1
-999
Default
W_dot_cycle_pump_des_calc
3
1
 
MWe
 
0
8
1
1
1
1
-999
Default
W_dot_fixed_calc
3
1
 
MWe
 
0
8
1
1
1
1
-999
Default
W_dot_heater_des_calc
3
1
 
 
 
0
8
1
1
1
1
-999
Default
W_dot_rec_pump_des_calc
3
1
 
MWe
 
0
8
1
1
1
1
-999
Default
W_dot_rec_pump_rec_share_des_calc
3
1
 
MWe
 
0
8
1
1
1
1
-999
Default
W_dot_rec_pump_tower_share_des_calc
3
1
 
MWe
 
0
8
1
1
1
1
-999
Default
average_attenuation_calc
3
1
 
 
 
0
8
1
1
1
1
-999
Default
bop_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
cav_panel_width_calc
3
1
 
m
 
0
8
1
1
1
1
-999
Default
cav_radius_calc
3
1
 
m
 
0
8
1
1
1
1
-999
Default
cav_rec_area_calc
3
1
 
m2
 
0
8
1
1
1
1
-999
Default
cav_rec_height_calc
3
1
 
m
 
0
8
1
1
1
1
-999
Default
cav_rec_width_calc
3
1
 
m
 
0
8
1
1
1
1
-999
Default
contingency_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
csp_financial_model
3
1
 
 
 
0
8
1
1
1
1
0
Default
d_tank_tes_calc
3
1
 
m
 
0
8
1
1
1
1
-999
Default
design_eff
3
1
Cycle thermal efficiency
 
System Design
0
2
1
1
1
1
0.45
Default
dni_des
3
1
Design point DNI
W/m²
System Design
0
2
1
1
1
1
950
Default
epc_total_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
eta_rec_thermal_des_calc
3
1
 
 
 
0
8
1
1
1
1
-999
Default
ext_rec_area_calc
3
1
 
m2
 
0
8
1
1
1
1
-999
Default
fossil_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
h_rec_input_to_cost_model_calc
3
1
 
m
 
0
8
1
1
1
1
-999
Default
h_tower_calc
3
1
 
m
 
0
8
1
1
1
1
-999
Default
heater_cost_calc
3
1
 
$
 
0
0
1
1
1
1
-999
Default
heater_mult
3
1
Heater multiple
 
 
0
2
1
1
1
1
1
Default
heliostat_area_calc
3
1
 
 
 
0
8
1
1
1
1
-999
Default
heliostats_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
installed_per_capacity_calc
3
1
 
$/kWe
 
0
8
1
1
1
1
-999
Default
is_parallel_htr
3
1
 Enable electric heater to charge cold HTF
 
 
0
0
1
1
1
1
0
Default
land_area_base_calc
3
1
 
acre
 
0
8
1
1
1
1
-999
Default
land_max_abs_calc
3
1
 
 
 
0
8
1
1
1
1
-999
Default
land_min_abs_calc
3
1
 
 
 
0
8
1
1
1
1
-999
Default
m_dot_htf_cycle_des_calc
3
1
 
kg/s
 
0
8
1
1
1
1
-999
Default
m_dot_htf_rec_des_calc
3
1
 
kg/s
 
0
8
1
1
1
1
-999
Default
m_dot_htf_rec_max_calc
3
1
 
kg/s
 
0
8
1
1
1
1
-999
Default
nameplate
3
1
Estimated net output at design (nameplate)
MWe
System Design
0
8
1
1
1
1
0
Default
plm_total_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
power_block_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
q_dot_heater_des_calc
3
1
Heater thermal power
MWt
 
0
8
1
1
1
1
-999
Default
q_dot_loss_tes_des_calc
3
1
 
MWt
 
0
8
1
1
1
1
-999
Default
q_dot_piping_loss_des_calc
3
1
 
MWe
 
0
8
1
1
1
1
-999
Default
q_pb_design
3
1
Cycle thermal power
MWt
System Design
0
8
1
1
1
1
0
Default
rec_aspect
3
1
 
 
 
0
8
1
1
1
1
-999
Default
rec_height_calc
3
1
 
m
 
0
8
1
1
1
1
-999
Default
receiver_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
refl_image_error_calc
3
1
 
 
 
0
8
1
1
1
1
-999
Default
sales_tax_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
sf_excess
3
1
Heliostat field multiple
 
System Design
0
2
1
1
1
1
1
Default
site_improvement_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
solarm
3
1
Solar multiple
 
System Design
0
2
1
1
1
1
1.9
Default
storage_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
total_direct_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
total_indirect_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
total_installed_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
total_land_area_before_rad_cooling_calc
3
1
 
acre
 
0
8
1
1
1
1
-999
Default
tower_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
tshours
3
1
Full load hours of storage
hours
System Design
0
2
1
1
1
1
6
Default
tshours_heater
3
1
Heater hours of storage
hours
 
0
8
1
1
1
1
-999
Default
tshours_sf
3
1
Solar field hours of storage
hours
System Design
0
8
1
1
1
1
0
Default
ui_direct_subtotal_cost_calc
3
1
 
$
 
0
8
1
1
1
1
-999
Default
ui_msg
3
4
System design message
 
System Design
0
1
1
4
0
Label
vel_rec_htf_des_calc
3
1
 
m/s
 
0
8
1
1
1
1
-999
Default

7561
equations{ 'csp_financial_model' } = define() {
	if (financing() == "Single Owner"){
		return 1;
	}
	else if(financing() == "Leveraged Partnership Flip"){
		return 2;
	}
	else if(financing() == "All Equity Partnership Flip"){
		return 3;
	}
	else if(financing() == "Sale Leaseback"){
		return 4;
	}
	else if(financing() == "Commercial"){
		return 5;
	}
	else if(financing() == "Merchant Plant"){
		return 6;
	}
	else if(financing() == "LCOE Calculator"){
		return 7;
	}
	else if(financing() == "None"){
		return 8;
	}
	else{
		return -1;
	}
};

equations{ '$MIMO$ ui_mspt_system_design__mspt_cmod' } = define()
{
	obj = ssc_create();

	//#ssc_auto_exec(obj, 'tcsmolten_salt', 2);

	//ret_d = ssc_dump(obj, 'mspt_system_des_mimo_ssc_auto_exec.lk');

	ret = ssc_exec(obj, 'tcsmolten_salt');

	if(ret == 0){
	
		${nameplate} = ssc_var(obj, "nameplate");
		
		${N_hel_calc} = ssc_var(obj, "N_hel_calc");
		${refl_image_error_calc} = ssc_var(obj, "refl_image_error");
		${heliostat_area_calc} = ssc_var(obj, "heliostat_area");                
		${average_attenuation_calc} = ssc_var(obj, "average_attenuation");
		${A_sf_calc} = ssc_var(obj, "A_sf");
		${land_min_abs_calc} = ssc_var(obj, "land_min_abs");
		${land_max_abs_calc} = ssc_var(obj, "land_max_abs");
		${land_area_base_calc} = ssc_var(obj, "land_area_base_calc");
		${total_land_area_before_rad_cooling_calc} = ssc_var(obj, "total_land_area_before_rad_cooling_calc");
		${W_dot_col_tracking_des_calc} = ssc_var(obj, "W_dot_col_tracking_des");
	
		${rec_height_calc} = ssc_var(obj, "rec_height_calc");
		${D_rec_calc} = ssc_var(obj, "D_rec_calc");
		${h_tower_calc} = ssc_var(obj, "h_tower_calc");
		${rec_aspect} = ssc_var(obj, "ext_rec_aspect");
		${ext_rec_area_calc} = ssc_var(obj, "ext_rec_area");
		${cav_rec_height_calc} = ssc_var(obj, "cav_rec_height_calc");
		${cav_rec_width_calc} = ssc_var(obj, "cav_rec_width_calc");
		${L_tower_piping_calc} = ssc_var(obj, "L_tower_piping_calc");  
		${A_rec_calc} = ssc_var(obj, "A_rec");
		${cav_rec_area_calc} = ssc_var(obj, "cav_rec_area");
		${cav_panel_width_calc} = ssc_var(obj, "cav_panel_width");
		${cav_radius_calc} = ssc_var(obj, "cav_radius");
	
		${Q_rec_des} = ssc_var(obj, "q_dot_rec_des");
		${eta_rec_thermal_des_calc} = ssc_var(obj, "eta_rec_thermal_des");
		${W_dot_rec_pump_des_calc} = ssc_var(obj, "W_dot_rec_pump_des"); 
		${W_dot_rec_pump_tower_share_des_calc} = ssc_var(obj, "W_dot_rec_pump_tower_share_des");
		${W_dot_rec_pump_rec_share_des_calc} = ssc_var(obj, "W_dot_rec_pump_rec_share_des");
		${vel_rec_htf_des_calc} = ssc_var(obj, "vel_rec_htf_des");  
		${m_dot_htf_rec_des_calc} = ssc_var(obj, "m_dot_htf_rec_des");     
		${m_dot_htf_rec_max_calc} = ssc_var(obj, "m_dot_htf_rec_max");
		${q_dot_piping_loss_des_calc} = ssc_var(obj, "q_dot_piping_loss_des");   

		${q_dot_heater_des_calc} = ssc_var(obj, "q_dot_heater_des");
		${W_dot_heater_des_calc} = ssc_var(obj, "W_dot_heater_des");
		${E_heater_su_des_calc} = ssc_var(obj, "E_heater_su_des");

		${m_dot_htf_cycle_des_calc} = ssc_var(obj, "m_dot_htf_cycle_des");
		${q_pb_design} = ssc_var(obj, "q_dot_cycle_des");               
		${W_dot_cycle_pump_des_calc} = ssc_var(obj, "W_dot_cycle_pump_des");
		${W_dot_cycle_cooling_des_calc} = ssc_var(obj, "W_dot_cycle_cooling_des");

		${Q_tes_des_calc} = ssc_var(obj, "Q_tes_des");                    
		${V_tes_htf_avail_des_calc} = ssc_var(obj, "V_tes_htf_avail_des");                    
		${V_tes_htf_total_des_calc} = ssc_var(obj, "V_tes_htf_total_des");
		${d_tank_tes_calc} = ssc_var(obj, "d_tank_tes");
		${q_dot_loss_tes_des_calc} = ssc_var(obj, "q_dot_loss_tes_des");  
		${tshours_sf} = ssc_var(obj, "tshours_rec");
		${tshours_heater} = ssc_var(obj, "tshours_heater");

		${W_dot_bop_design_calc} = ssc_var(obj, "W_dot_bop_design");                
		${W_dot_fixed_calc} = ssc_var(obj, "W_dot_fixed");    
		
		${h_rec_input_to_cost_model_calc} = ssc_var(obj, "h_rec_input_to_cost_model");
		${site_improvement_cost_calc} = ssc_var(obj, "csp.pt.cost.site_improvements");
		${heliostats_cost_calc} = ssc_var(obj, "csp.pt.cost.heliostats");
		${tower_cost_calc} = ssc_var(obj, "csp.pt.cost.tower");
		${receiver_cost_calc} = ssc_var(obj, "csp.pt.cost.receiver");
		${storage_cost_calc} = ssc_var(obj, "csp.pt.cost.storage");
		${power_block_cost_calc} = ssc_var(obj, "csp.pt.cost.power_block");   
		${heater_cost_calc} = ssc_var(obj, "heater_cost");        
		${bop_cost_calc} = ssc_var(obj, "csp.pt.cost.bop");
		${fossil_cost_calc} = ssc_var(obj, "csp.pt.cost.fossil");       
		${ui_direct_subtotal_cost_calc} = ssc_var(obj, "ui_direct_subtotal");
		${contingency_cost_calc} = ssc_var(obj, "csp.pt.cost.contingency");
		${total_direct_cost_calc} = ssc_var(obj, "total_direct_cost");
		${epc_total_cost_calc} = ssc_var(obj, "csp.pt.cost.epc.total");
		${plm_total_cost_calc} = ssc_var(obj, "csp.pt.cost.plm.total"); 
		${sales_tax_cost_calc} = ssc_var(obj, "csp.pt.cost.sales_tax.total"); 
		${total_indirect_cost_calc} = ssc_var(obj, "total_indirect_cost"); 
		${total_installed_cost_calc} = ssc_var(obj, "total_installed_cost");
		${installed_per_capacity_calc} = ssc_var(obj, "csp.pt.cost.installed_per_capacity");  
	
	}
	else{
		fail = -789;
		
		${nameplate} = fail;
		
		${N_hel_calc} = fail;
		${refl_image_error_calc} = fail;
		${heliostat_area_calc} = fail;
		${average_attenuation_calc} = fail;
	    ${A_sf_calc} = fail;
	    ${land_min_abs_calc} = fail;
		${land_max_abs_calc} = fail;
	    ${land_area_base_calc} = fail;
        ${total_land_area_before_rad_cooling_calc} = fail;
	    ${W_dot_col_tracking_des_calc} = fail;
	    
	    ${rec_height_calc} = fail;
		${D_rec_calc} = fail;
		${h_tower_calc} = fail;
		${rec_aspect} = fail;
		${ext_rec_area_calc} = fail;
		${cav_rec_height_calc} = fail;
		${cav_rec_width_calc} = fail;
		${L_tower_piping_calc} = fail;
		${A_rec_calc} = fail;
		${cav_rec_area_calc} = fail;
		${cav_panel_width_calc} = fail;
		${cav_radius_calc} = fail;
	    
	    ${Q_rec_des} = fail;
		${eta_rec_thermal_des_calc} = fail;
		${W_dot_rec_pump_des_calc} = fail;
		${W_dot_rec_pump_tower_share_des_calc} = fail;
		${W_dot_rec_pump_rec_share_des_calc} = fail;
		${vel_rec_htf_des_calc} = fail;
		${m_dot_htf_rec_des_calc} = fail;
		${m_dot_htf_rec_max_calc} = fail;
		${q_dot_piping_loss_des_calc} = fail;

	    ${q_dot_heater_des_calc} = fail;
	    ${W_dot_heater_des_calc} = fail;
		${E_heater_su_des_calc} = fail;
	    
	    ${m_dot_htf_cycle_des_calc} = fail;
		${q_pb_design} = fail;
		${W_dot_cycle_pump_des_calc} = fail;
		${W_dot_cycle_cooling_des_calc} = fail;
	    
	    ${Q_tes_des_calc} = fail;               
		${V_tes_htf_avail_des_calc} = fail;
		${V_tes_htf_total_des_calc} = fail;
		${d_tank_tes_calc} = fail;
		${q_dot_loss_tes_des_calc} = fail;
		${tshours_sf} = fail;
		${tshours_heater} = fail;
	    
	    ${W_dot_bop_design_calc} = fail;
		${W_dot_fixed_calc} = fail;
	    
	    ${h_rec_input_to_cost_model_calc} = fail;
	    ${site_improvement_cost_calc} = fail;
		${heliostats_cost_calc} = fail;
		${tower_cost_calc} = fail;
		${receiver_cost_calc} = fail;
		${storage_cost_calc} = fail;
		${power_block_cost_calc} = fail;
		${heater_cost_calc} = fail;
		${bop_cost_calc} = fail;
		${fossil_cost_calc} = fail;
		${ui_direct_subtotal_cost_calc} = fail;
		${contingency_cost_calc} = fail;
		${total_direct_cost_calc} = fail;
		${epc_total_cost_calc} = fail;
		${plm_total_cost_calc} = fail;
		${sales_tax_cost_calc} = fail;
		${total_indirect_cost_calc} = fail;
		${total_installed_cost_calc} = fail;
		${installed_per_capacity_calc} = fail;
	
	}
};

1628
function change_msg ( v ) {
	msg = '';
	m = 'NOT DEFINED';
	if ( v != '' ) {
		if ( v == 'dni_des' || v == 'sf_excess' ) m = 'solar field size at the design point';
		elseif ( v == 'solarm' ||
		         v == 'P_ref'  ||
		         v == 'design_eff' ) m = 'receiver thermal power at the design point';
		v_info = varinfo(v);
		if ( value('override_opt') == 0 )
			msg = 'You changed the value of ' + v_info.label + ', which changes the ' + m + '. You may want to optimize the field to ensure that the field layout and geometry are appropriate for the new value.';
	}
	property('ui_msg','Caption',msg);
}

on_load{'MSPT System Design'} = define() 
	{ change_msg('');
		on_change{'is_parallel_htr'}();};
on_change{'dni_des'} = define()
	{ change_msg('dni_des'); };
on_change{'solarm'} = define() 
	{ change_msg('solarm'); };
on_change{'P_ref'} = define() 
	{ change_msg('P_ref'); };
on_change{'design_eff'} = define() 
	{ change_msg('design_eff'); };
//on_change{'tshours'} = define() { var_change_msg('tshours'); };
on_change{'sf_excess'} = define()
	{ change_msg('sf_excess'); };


on_change{'is_parallel_htr'} = define()
{ 	is_htr = value('is_parallel_htr') == 1;
	enable("heater_mult", is_htr);
	enable("tshours_heater", is_htr);
	enable("q_dot_heater_des_calc", is_htr);
	is_dispatch = value('is_dispatch') == 1;
	msg = "";
	if(is_htr && !is_dispatch){
		msg  = "Dispatch optimization is required when using the electric charger. "
		"Please select dispatch optimization on the System Control page.";
	}
	property('heater_msg','Caption',msg);
};


/*

"W_dot_rec_pump_tower_share_des", 
"W_dot_rec_pump_rec_share_des",   

*/