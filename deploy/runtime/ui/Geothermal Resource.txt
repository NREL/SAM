Geothermal Resource
884
503
27
GroupBox

1
8
Name
5
9
GroupBox2
X
3
6
Y
3
6
Width
3
872
Height
3
107
Tool Tip
5
0
Caption
5
25
Resource Characterization
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox3
X
3
6
Y
3
360
Width
3
872
Height
3
101
Tool Tip
5
0
Caption
5
17
Calculated Design
Bold
2
1
GroupBox

1
8
Name
5
9
GroupBox6
X
3
6
Y
3
117
Width
3
872
Height
3
233
Tool Tip
5
0
Caption
5
20
Reservoir Parameters
Bold
2
1
Numeric

1
17
Name
5
14
fracture_angle
X
3
645
Y
3
288
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
25
Numeric

1
17
Name
5
18
fracture_aperature
X
3
645
Y
3
216
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
22
Numeric

1
17
Name
5
14
fracture_width
X
3
645
Y
3
264
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
24
Numeric

1
17
Name
5
27
geotherm.avg_reservoir_temp
X
3
645
Y
3
405
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
28
geotherm.avg_reservoir_tempF
X
3
519
Y
3
405
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
29
geotherm.bottom_hole_pressure
X
3
519
Y
3
429
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
32
geotherm.bottom_hole_pressureBar
X
3
645
Y
3
429
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Choice

1
9
Name
5
22
geotherm.default_input
X
3
96
Y
3
399
Width
3
201
Height
3
24
Tool Tip
5
0
Items
6
12
Greenfield - Reference - Hydrothermal Flash
Greenfield - Reference - Hydrothermal Binary
Greenfield - Reference - EGS Flash
Greenfield - Reference - EGS Binary
Greenfield - Improved - Hydrothermal Flash
Greenfield - Improved - Hydrothermal Binary
Greenfield - Improved - EGS Flash
Greenfield - Improved - EGS Binary
Brownfield - Reference - EGS Flash
Brownfield - Reference - EGS Binary
Brownfield - Improved - EGS Flash
Brownfield - Improved - EGS Binary
Selection
3
4294967295
TabOrder
3
4294967295
Numeric

1
17
Name
5
33
geotherm.delta_pressure_reservoir
X
3
519
Y
3
381
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
36
geotherm.delta_pressure_reservoirBar
X
3
645
Y
3
381
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
TextEntry

1
11
Name
5
16
geotherm.errors2
X
3
78
Y
3
471
Width
3
799
Height
3
21
Tool Tip
5
0
Text
5
0
Editable
2
0
ForeColour
4
255
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
17
Name
5
22
inj_prod_well_distance
X
3
300
Y
3
288
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
21
Numeric

1
17
Name
5
13
num_fractures
X
3
645
Y
3
240
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
23
Hyperlink

1
9
Name
5
9
object 14
X
3
21
Y
3
84
Width
3
372
Height
3
24
Tool Tip
5
0
Caption
5
42
View the NREL Geothermal Prospector online
URL
5
34
http://maps.nrel.gov/gt_prospector
TabOrder
3
4294967295
Numeric

1
17
Name
5
16
reservoir_height
X
3
300
Y
3
240
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
19
Numeric

1
17
Name
5
22
reservoir_permeability
X
3
300
Y
3
264
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
20
Numeric

1
17
Name
5
25
reservoir_pressure_change
X
3
546
Y
3
138
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
17
RadioChoice

1
11
Name
5
30
reservoir_pressure_change_type
X
3
18
Y
3
138
Width
3
527
Height
3
74
Tool Tip
5
0
Selection
3
2
Items
6
3
Enter change in pressure across the reservoir in units of psi-h per 1000 lb:
Calculate the reservoir pressure change using simple fracture flow (EGS only)
Calculate the reservoir pressure change using permeability * area
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
4294967295
Numeric

1
17
Name
5
15
reservoir_width
X
3
300
Y
3
216
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
18
Numeric

1
17
Name
5
14
resource_depth
X
3
648
Y
3
78
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
6000
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
0
Numeric

1
17
Name
5
18
resource_potential
X
3
648
Y
3
30
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
210
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
1
Numeric

1
17
Name
5
13
resource_temp
X
3
648
Y
3
54
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
200
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
0
RadioChoice

1
11
Name
5
13
resource_type
X
3
21
Y
3
27
Width
3
323
Height
3
47
Tool Tip
5
0
Selection
3
0
Items
6
2
Hydrothermal
Enhanced Geothermal System (EGS)
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
4294967295
Numeric

1
17
Name
5
21
subsurface_water_loss
X
3
645
Y
3
312
Width
3
100
Height
3
21
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
26

38
fracture_angle
3
1
Fracture Angle
deg from horizontal
Geothermal Resource
0
2
1
1
1
1
15
Numeric
fracture_aperature
3
1
Fracture Aperature
m
Geothermal Resource
0
2
1
1
1
1
0.0004
Numeric
fracture_width
3
1
Fracture Width
m
Geothermal Resource
0
2
1
1
1
1
175
Numeric
geotherm.avg_reservoir_temp
3
1
 
'C
Geothermal Resource
0
8
1
1
1
1
0
Numeric
geotherm.avg_reservoir_tempF
3
1
Average Reservoir Temperature
'F
Geothermal Resource
0
8
1
1
1
1
0
Numeric
geotherm.basecase_choice
3
1
Base Case Choice
 
Geothermal Resource
0
3
1
1
1
1
0
Default
geotherm.bottom_hole_pressure
3
1
Production Well Bottom Hole Pressure
psi
Geothermal Resource
0
8
1
1
1
1
0
Numeric
geotherm.bottom_hole_pressureBar
3
1
 
bar
Geothermal Resource
0
8
1
1
1
1
0
Numeric
geotherm.default_input
3
1
Default Type
 
Geothermal Resource
38
1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16
2
1
1
1
1
0
Numeric
geotherm.delta_pressure_reservoir
3
1
Pressure Change Across Reservoir
psi
Geothermal Resource
0
8
1
1
1
1
0
Numeric
geotherm.delta_pressure_reservoirBar
3
1
 
bar
Geothermal Resource
0
10
1
1
1
1
0
Numeric
geotherm.egs_ambient_temp
3
1
Ambient temperature (EGS)
'C
Geothermal Resource
0
2
1
1
1
1
15
Default
geotherm.errors2
3
4
Messages:
 
Geothermal Resource
0
8
1
4
10
No message
TextEntry
geotherm.lookup.depth_array
3
2
 
 
 
0
0
1
2
1
1
0
Default
geotherm.lookup.latitude
3
1
 
 
 
0
0
1
1
1
1
-1
Default
geotherm.lookup.location
3
4
 
 
 
0
0
1
4
10
Denver, CO
Default
geotherm.lookup.longitude
3
1
 
 
 
0
0
1
1
1
1
-1
Default
geotherm.lookup.temp_array
3
2
 
 
 
0
0
1
2
1
1
0
Default
geotherm.resource.choice
3
4
 
 
Geothermal Resource
0
0
1
4
5
empty
Default
geotherm.resource_type
3
1
Resource Type:    
 
Geothermal Resource
0
0
1
1
1
1
0
Default
geotherm.resource_type_name
3
4
Resource Type Name
 
Geothermal Resource
0
8
1
4
1
0
Default
geotherm.temp_gradient
3
1
Temperature Gradient
'C/km
Geothermal Resource
0
9
1
1
1
1
0
Default
inj_prod_well_distance
3
1
Distance From Injection to Production Wells
m
Geothermal Resource
0
2
1
1
1
1
1500
Numeric
num_fractures
3
1
Number of Fractures
 
Geothermal Resource
0
2
1
1
1
1
6
Numeric
reservoir_height
3
1
Height
m
Geothermal Resource
0
2
1
1
1
1
100
Numeric
reservoir_permeability
3
1
Permeability
Darcy units
Geothermal Resource
0
2
1
1
1
1
0.05
Numeric
reservoir_pressure_change
3
1
 
 
Geothermal Resource
0
2
1
1
1
1
0.35
Numeric
reservoir_pressure_change_type
3
1
 
 
Geothermal Resource
0
0
1
1
1
1
0
RadioChoice
reservoir_pressure_change_type_old_setting
3
1
 
 
 
0
8
1
1
1
1
2
Default
reservoir_width
3
1
Width
m
Geothermal Resource
0
2
1
1
1
1
500
Numeric
resource_depth
3
1
Resource Depth
m
Geothermal Resource
0
2
1
1
1
1
6000
Numeric
resource_potential
3
1
Total Resource Potential
MW
Geothermal Resource
0
2
1
1
1
1
210
Numeric
resource_temp
3
1
Resource Temperature
'C
Geothermal Resource
0
2
1
1
1
1
200
Numeric
resource_type
3
1
 
 
 
0
0
1
1
1
1
0
RadioChoice
rock_density
3
1
Density
kg/m3
Geothermal Resource
0
2
1
1
1
1
2600
Default
rock_specific_heat
3
1
Specific Heat
J/kg-'C
Geothermal Resource
0
2
1
1
1
1
950
Default
rock_thermal_conductivity
3
1
Thermal Conductivity
J/m-day-'C
Geothermal Resource
0
2
1
1
1
1
259200
Default
subsurface_water_loss
3
1
Subsurface Water Loss
% of water injected
Geothermal Resource
0
2
1
1
1
1
2
Numeric

362
equations{ 'geotherm.delta_pressure_reservoirBar' } = define() {
	return ${geotherm.delta_pressure_reservoir}/14.50377373066; };

equations{ 'geotherm.bottom_hole_pressureBar' } = define() {
	return ${geotherm.bottom_hole_pressure}/14.50377373066; };

equations{ 'geotherm.avg_reservoir_tempF' } = define() {
	return (${geotherm.avg_reservoir_temp}*9/5)+32; };


4353
function handle_change_to_hydrothermal()
{
	// if we just changed to 'hydrothermal'
	if (${resource_type} == 0) {
		if (${reservoir_pressure_change_type} == 1) {
			old_setting = ${reservoir_pressure_change_type_old_setting};
			value("reservoir_pressure_change_type", old_setting);
		}
		
		if (${decline_type} == 1)
			value("decline_type",0);
	}
}

on_change{'resource_type'} = define() {
	handle_change_to_hydrothermal();
};

on_change{'geotherm.default_input'} = define() {
	default = value('geotherm.default_input');
	if (default == 0) get_getem_data_from_file('Greenfield_Reference_Hydrothermal_Flash.json');
	else if (default == 1) get_getem_data_from_file('Greenfield_Reference_Hydrothermal_Binary.json');
	else if (default == 2) get_getem_data_from_file('Greenfield_Reference_EGS_Flash.json');
	else if (default == 3) get_getem_data_from_file('Greenfield_Reference_EGS_Binary.json');
	else if (default == 4) get_getem_data_from_file('Greenfield_Improved_Hydrothermal_Flash.json');
	else if (default == 5) get_getem_data_from_file('Greenfield_Improved_Hydrothermal_Binary.json');
	else if (default == 6) get_getem_data_from_file('Greenfield_Improved_EGS_Flash.json');
	else if (default == 7) get_getem_data_from_file('Greenfield_Improved_EGS_Binary.json');
	else if (default == 8) get_getem_data_from_file('Brownfield_Reference_Hydrothermal_Flash.json');
	else if (default == 9) get_getem_data_from_file('Brownfield_Reference_Hydrothermal_Binary.json');
	else if (default == 10) get_getem_data_from_file('Brownfield_Reference_EGS_Flash.json');
	else if (default == 11) get_getem_data_from_file('Brownfield_Reference_EGS_Binary.json');
	else if (default == 12) get_getem_data_from_file('Brownfield_Improved_Hydrothermal_Flash.json');
	else if (default == 13) get_getem_data_from_file('Brownfield_Improved_Hydrothermal_Binary.json');
	else if (default == 14) get_getem_data_from_file('Brownfield_Improved_EGS_Flash.json');
	else if (default == 15) get_getem_data_from_file('Brownfield_Improved_EGS_Binary.json');
};

function get_getem_data_from_file(filename)
{
	defaults_dir = replace(appdir(), '\\', '/' ) + '/../libraries/GETEMDefaults/';
	defaults_dir += filename;
	x = read_json(defaults_dir);
	defs = x.defaults;
	ow_def = yesno('Do you want to overwrite the case defaults with GETEM defaults from this configuration?');
	if (ow_def)
		set_getem_defaults_from_data(defs);
}

function set_getem_defaults_from_data(defs)
{
	getem_params = defs.getemparams;
	
	value('analysis_period',getem_params.analysis_period);
	//value('geotherm.cost.prod_cost_curve_well_diam', getem_params.geotherm.cost.prod_cost_curve_well_diam);
	//value('geotherm.cost.prod_cost_curve_well_type', getem_params.geotherm.cost.prod_cost_curve_well_type);
	value('nameplate', getem_params.nameplate);
	value('well_flow_rate', getem_params.well_flow_rate);
	//value('geotherm.cost.contingency_percent', getem_params.geotherm.cost.contingency_percent);
	value('excess_pressure_pump', getem_params.excess_pressure_pump);
	value('well_diameter', getem_params.well_diameter);
	//value('geotherm.cost.pump_per_foot', getem_params.geotherm.cost.pump_per_foot);
	//value('geotherm.cost.pump_per_hp', getem_params.geotherm.cost.pump_per_hp);
	value('delta_pressure_equip', getem_params.delta_pressure_equip);
	value('reservoir_pressure_change', getem_params.reservoir_pressure_change);
	value('subsurface_water_loss', getem_params.subsurface_water_loss);
	value('temp_decline_rate', getem_params.temp_decline_rate);
	value('conversion_type', getem_params. conversion_type);
	value('resource_type', getem_params.resource_type);
	value('wet_bulb_temp', getem_params.wet_bulb_temp);
	value('ambient_pressure', getem_params.ambient_pressure);
		
}

on_change{'reservoir_pressure_change_type'} = define() {
	// if we're not evaluating an EGS resource, alert
	if ( ${reservoir_pressure_change_type} == 1 && ${resource_type} != 1) {
		msgbox('This option is only allowed for EGS resources.');
		handle_change_to_hydrothermal();
	}
	save_old_pressure_change_setting();
};

on_load{'Geothermal Resource'} = define() {
	save_old_pressure_change_setting();
};

function save_old_pressure_change_setting() {
	// save the last setting that wasn't option 1
	if ( ${reservoir_pressure_change_type} != 1) 
		${reservoir_pressure_change_type_old_setting} = ${reservoir_pressure_change_type};
}
