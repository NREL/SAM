PV Albedo and Radiation
882
639
38
GroupBox

1
8
Name
5
14
GroupBoxAlbedo
X
3
9
Y
3
153
Width
3
870
Height
3
482
Tool Tip
5
0
Caption
5
6
Albedo
Bold
2
1
MonthlyFactor

1
8
Name
5
6
albedo
X
3
135
Y
3
174
Width
3
110
Height
3
24
Tool Tip
5
0
Description
5
22
Monthly Albedo [0...1]
TabOrder
3
2
Numeric

1
17
Name
5
8
albedo_0
X
3
228
Y
3
375
Width
3
34
Height
3
21
Tool Tip
5
0
Value
1
0.2
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
20
Numeric

1
17
Name
5
8
albedo_1
X
3
228
Y
3
399
Width
3
34
Height
3
21
Tool Tip
5
0
Value
1
0.2
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
25
Numeric

1
17
Name
5
8
albedo_2
X
3
228
Y
3
423
Width
3
34
Height
3
21
Tool Tip
5
0
Value
1
0.2
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
30
Numeric

1
17
Name
5
8
albedo_3
X
3
228
Y
3
447
Width
3
34
Height
3
21
Tool Tip
5
0
Value
1
0.2
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
35
Numeric

1
17
Name
5
8
albedo_4
X
3
228
Y
3
471
Width
3
34
Height
3
21
Tool Tip
5
0
Value
1
0.2
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
40
Numeric

1
17
Name
5
8
albedo_5
X
3
228
Y
3
495
Width
3
34
Height
3
21
Tool Tip
5
0
Value
1
0.2
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
45
Numeric

1
17
Name
5
8
albedo_6
X
3
228
Y
3
519
Width
3
34
Height
3
21
Tool Tip
5
0
Value
1
0.2
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
50
Numeric

1
17
Name
5
8
albedo_7
X
3
228
Y
3
543
Width
3
34
Height
3
21
Tool Tip
5
0
Value
1
0.2
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
55
Numeric

1
17
Name
5
8
albedo_8
X
3
228
Y
3
567
Width
3
34
Height
3
21
Tool Tip
5
0
Value
1
0.2
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
60
Numeric

1
17
Name
5
8
albedo_9
X
3
228
Y
3
591
Width
3
34
Height
3
21
Tool Tip
5
0
Value
1
0.2
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
0
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
65
SpatialAlbedo

1
10
Name
5
22
albedo_spatial_monthly
X
3
330
Y
3
339
Width
3
514
Height
3
272
Tool Tip
5
0
TabOrder
3
4294967295
Schedule
5
0
Max
3
9
Min
3
0
Label

1
13
Name
5
13
albedo_warn_1
X
3
33
Y
3
243
Width
3
252
Height
3
24
Tool Tip
5
0
Caption
5
48
Spatial albedos will be averaged for subarray 1.
TextColour
4
255
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
13
albedo_warn_2
X
3
33
Y
3
264
Width
3
252
Height
3
24
Tool Tip
5
0
Caption
5
48
Spatial albedos will be averaged for subarray 2.
TextColour
4
255
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
13
albedo_warn_3
X
3
33
Y
3
285
Width
3
252
Height
3
24
Tool Tip
5
0
Caption
5
48
Spatial albedos will be averaged for subarray 3.
TextColour
4
255
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Label

1
13
Name
5
13
albedo_warn_4
X
3
33
Y
3
306
Width
3
252
Height
3
24
Tool Tip
5
0
Caption
5
48
Spatial albedos will be averaged for subarray 4.
TextColour
4
255
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
Image

1
8
Name
5
15
fixed_tilt_back
X
3
651
Y
3
267
Width
3
126
Height
3
72
Tool Tip
5
0
Image
7
PV Albedo and Radiation_fixed_tilt_back.png
Centered
2
1
Image

1
8
Name
5
16
fixed_tilt_front
X
3
351
Y
3
267
Width
3
126
Height
3
72
Tool Tip
5
0
Image
7
PV Albedo and Radiation_fixed_tilt_front.png
Centered
2
1
RadioChoice

1
11
Name
5
10
irrad_mode
X
3
456
Y
3
27
Width
3
326
Height
3
118
Tool Tip
5
0
Selection
3
1
Items
6
5
DNI and DHI
DNI and GHI
GHI and DHI
POA from reference cell
POA from pyranometer
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
4
Label

1
13
Name
5
14
label_albedo_0
X
3
201
Y
3
375
Width
3
20
Height
3
21
Tool Tip
5
0
Caption
5
2
0:
TextColour
4
0
51
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
14
label_albedo_1
X
3
201
Y
3
399
Width
3
20
Height
3
21
Tool Tip
5
0
Caption
5
2
1:
TextColour
4
81
60
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
14
label_albedo_2
X
3
201
Y
3
423
Width
3
20
Height
3
21
Tool Tip
5
0
Caption
5
2
2:
TextColour
4
106
0
28
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
14
label_albedo_3
X
3
201
Y
3
447
Width
3
20
Height
3
21
Tool Tip
5
0
Caption
5
2
3:
TextColour
4
38
0
126
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
14
label_albedo_4
X
3
201
Y
3
471
Width
3
20
Height
3
21
Tool Tip
5
0
Caption
5
2
4:
TextColour
4
0
111
142
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
14
label_albedo_5
X
3
201
Y
3
495
Width
3
20
Height
3
21
Tool Tip
5
0
Caption
5
2
5:
TextColour
4
0
153
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
14
label_albedo_6
X
3
201
Y
3
519
Width
3
20
Height
3
21
Tool Tip
5
0
Caption
5
2
6:
TextColour
4
118
177
63
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
14
label_albedo_7
X
3
201
Y
3
543
Width
3
20
Height
3
21
Tool Tip
5
0
Caption
5
2
7:
TextColour
4
200
202
125
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
14
label_albedo_8
X
3
201
Y
3
567
Width
3
20
Height
3
21
Tool Tip
5
0
Caption
5
2
8:
TextColour
4
226
208
186
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
14
label_albedo_9
X
3
201
Y
3
591
Width
3
20
Height
3
21
Tool Tip
5
0
Caption
5
2
9:
TextColour
4
192
192
192
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
1
AlignTop
2
0
Label

1
13
Name
5
13
label_albedos
X
3
210
Y
3
351
Width
3
53
Height
3
21
Tool Tip
5
0
Caption
5
7
Albedos
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
0
AlignRight
2
0
AlignTop
2
0
GroupBox

1
8
Name
5
8
object 4
X
3
449
Y
3
9
Width
3
430
Height
3
138
Tool Tip
5
0
Caption
5
28
Weather File Irradiance Data
Bold
2
1
GroupBox

1
8
Name
5
9
object 45
X
3
9
Y
3
9
Width
3
430
Height
3
138
Tool Tip
5
0
Caption
5
17
Sky Diffuse Model
Bold
2
1
Image

1
8
Name
5
18
one_axis_tilt_back
X
3
609
Y
3
258
Width
3
99
Height
3
81
Tool Tip
5
0
Image
7
PV Albedo and Radiation_one_axis_tilt_back.png
Centered
2
1
Image

1
8
Name
5
19
one_axis_tilt_front
X
3
309
Y
3
258
Width
3
99
Height
3
81
Tool Tip
5
0
Image
7
PV Albedo and Radiation_one_axis_tilt_front.png
Centered
2
1
RadioChoice

1
11
Name
5
9
sky_model
X
3
27
Y
3
27
Width
3
254
Height
3
71
Tool Tip
5
0
Selection
3
3
Items
6
3
Isotropic
HDKR
Perez
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
3
RadioChoice

1
11
Name
5
19
use_spatial_albedos
X
3
333
Y
3
195
Width
3
213
Height
3
51
Tool Tip
5
0
Selection
3
0
Items
6
2
Use uniform monthly albedo values
Use spatial monthly albedo values
ShowCaptions
2
1
Horizontal
2
0
TabOrder
3
4294967295
CheckBox

1
9
Name
5
13
use_wf_albedo
X
3
333
Y
3
174
Width
3
386
Height
3
21
Tool Tip
5
0
Caption
5
41
Use albedo from weather file if available
State
2
0
TabOrder
3
1

17
albedo
3
2
Monthly albedo
 
Location and Resource
0
2
1
2
1
12
0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 

MonthlyFactor
albedo_0
3
1
Spatial albedo index value 0
 
Location and Resource
0
3
1
1
1
1
0.2
Default
albedo_1
3
1
Spatial albedo index value 1
 
Location and Resource
0
3
1
1
1
1
0.2
Default
albedo_2
3
1
Spatial albedo index value 2
 
Location and Resource
0
3
1
1
1
1
0.2
Default
albedo_3
3
1
Spatial albedo index value 3
 
Location and Resource
0
3
1
1
1
1
0.2
Default
albedo_4
3
1
Spatial albedo index value 4
 
Location and Resource
0
3
1
1
1
1
0.2
Default
albedo_5
3
1
Spatial albedo index value 5
 
Location and Resource
0
3
1
1
1
1
0.2
Default
albedo_6
3
1
Spatial albedo index value 6
 
Location and Resource
0
3
1
1
1
1
0.2
Default
albedo_7
3
1
Spatial albedo index value 7
 
Location and Resource
0
3
1
1
1
1
0.2
Default
albedo_8
3
1
Spatial albedo index value 8
 
Location and Resource
0
3
1
1
1
1
0.2
Default
albedo_9
3
1
Spatial albedo index value 9
 
Location and Resource
0
3
1
1
1
1
0.2
Default
albedo_spatial
3
3
Spatial albedos
 
Location and Resource
0
8
1
3
12
10
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 

Default
albedo_spatial_monthly
3
3
Spatial monthly albedo
 
Location and Resource
0
3
1
3
12
10
5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 

SpatialAlbedo
irrad_mode
3
1
Weather file irradiance data
0=beam&diffuse,1=total&beam,2=total&diffuse,3=poa_reference,4=poa_pyranometer
Location and Resource
0
3
1
1
1
1
0
RadioChoice
sky_model
3
1
Sky diffuse model
0=Isotropic,1=HDKR,2=Perez
Location and Resource
20
Isotropic|HDKR|Perez
3
1
1
1
1
2
RadioChoice
use_spatial_albedos
3
1
Use spatial albedos
 
Location and Resource
0
3
1
1
1
1
0
RadioChoice
use_wf_albedo
3
1
Use albedo in weather file if it exists
 
Location and Resource
0
3
1
1
1
1
0
CheckBox

381
equations{ 'albedo_spatial' } = define(){
	albedos = [
		${albedo_0}, ${albedo_1}, ${albedo_2}, ${albedo_3}, ${albedo_4},
		${albedo_5}, ${albedo_6}, ${albedo_7}, ${albedo_8},	${albedo_9}
	];
	
	for ( i=0; i<12; i++ ) {
		for ( j=0; j<10; j++ ) {
			albedo_index = ${albedo_spatial_monthly}[i][j];
			albedo_spatial[i][j] = albedos[albedo_index];
		}
	}
	return albedo_spatial;
};

2846
function enable_transp_model()
{
	if( value('irrad_mode') < 3 ){
		enable('sky_model', true);
	} else {
		enable('sky_model', false);
	}
}

function enable_spatial_albedos() {	
	// Get enabled tracking types from System Design page
	e1 = true;
	e2 = value('subarray2_enable');
	e3 = value('subarray3_enable');
	e4 = value('subarray4_enable');
	t1 = value('subarray1_track_mode');
	t2 = value('subarray2_track_mode');
	t3 = value('subarray3_track_mode');
	t4 = value('subarray4_track_mode');
	
	// Decide which image to show   (-1=no image, 0=fixed, 1=one-axis)
	if (value('use_spatial_albedos') == 0) {array_to_show = -1;}
	elseif (e1 && (t1 == 0 || t1 == 4)) {array_to_show = 0;}
	elseif (e1 && t1 == 1) {array_to_show = 1;}
	elseif (e2 && (t2 == 0 || t2 == 4)) {array_to_show = 0;}
	elseif (e2 && t2 == 1) {array_to_show = 1;}
	elseif (e3 && (t3 == 0 || t3 == 4)) {array_to_show = 0;}
	elseif (e3 && t3 == 1) {array_to_show = 1;}
	elseif (e4 && (t4 == 0 || t4 == 4)) {array_to_show = 0;}
	elseif (e4 && t4 == 1) {array_to_show = 1;}
	else {array_to_show = -1;}
	
	// Decide which red warnings to show about using average spatial
	show('albedo_warn_1', value('use_spatial_albedos') && e1 && t1 != 0 && t1 != 1 && t1 != 4);
	show('albedo_warn_2', value('use_spatial_albedos') && e2 && t2 != 0 && t2 != 1 && t2 != 4);
	show('albedo_warn_3', value('use_spatial_albedos') && e3 && t3 != 0 && t3 != 1 && t3 != 4);
	show('albedo_warn_4', value('use_spatial_albedos') && e4 && t4 != 0 && t4 != 1 && t4 != 4);
	
	// First hide all images:
	property('fixed_tilt_front', 'Y', 1000);
	property('fixed_tilt_back', 'Y', 1000);
	property('one_axis_tilt_front', 'Y', 1000);
	property('one_axis_tilt_back', 'Y', 1000);
	
	// Selectively enable, resize, hide or show albedo widgets
	enable('albedo', value('use_spatial_albedos') == 0);
	show('albedo_spatial_monthly', value('use_spatial_albedos') == 1);
	show('label_albedos', value('use_spatial_albedos') == 1);
	for ( i=0; i<10; i++ ) {
		show('albedo_' + i, value('use_spatial_albedos') == 1);
		show('label_albedo_' + i, value('use_spatial_albedos') == 1);
	}
	if ( value('use_spatial_albedos') == 1 ) {
		property('GroupBoxAlbedo','Height', 482);
		if ( array_to_show == 0 ) {					// fixed-tilt image
			property('fixed_tilt_front', 'Y', 267);
			property('fixed_tilt_back', 'Y', 267);
		}
		elseif ( array_to_show == 1 ) {				// 1-axis image
			property('one_axis_tilt_front', 'Y', 258);
			property('one_axis_tilt_back', 'Y', 258);
		}
	}
	else {
		property('GroupBoxAlbedo','Height', 101);
	}
}

on_change{'irrad_mode'} = define(){
	enable_transp_model();
};

on_change{'use_spatial_albedos'} = define() {
	enable_spatial_albedos();
};

on_load{'PV Albedo and Radiation'} = define() {
	enable_transp_model();
	enable_disable_spatial_albedos();	// from System Design UI Form
	enable_spatial_albedos();
};
