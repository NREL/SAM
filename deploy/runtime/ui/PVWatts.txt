PVWatts
883
606
32
GroupBox

1
8
Name
5
9
GroupBox1
X
3
9
Y
3
6
Width
3
872
Height
3
176
Tool Tip
5
0
Caption
5
17
System Parameters
Bold
2
1
Numeric

1
17
Name
5
12
ac_nameplate
X
3
204
Y
3
114
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4
Choice

1
9
Name
5
10
array_type
X
3
498
Y
3
207
Width
3
174
Height
3
24
Tool Tip
5
0
Items
6
5
Fixed open rack
Fixed roof mount
1-axis tracking
1-axis backtracking
2-axis tracking
Selection
3
4294967295
TabOrder
3
6
Numeric

1
17
Name
5
7
azimuth
X
3
498
Y
3
261
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
8
CheckBox

1
9
Name
5
18
batt_simple_enable
X
3
471
Y
3
33
Width
3
177
Height
3
24
Tool Tip
5
0
Caption
5
21
Enable simple battery
State
2
1
TabOrder
3
4294967295
Numeric

1
17
Name
5
11
dc_ac_ratio
X
3
204
Y
3
87
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
3
CheckBox

1
9
Name
5
19
en_user_spec_losses
X
3
270
Y
3
384
Width
3
24
Height
3
24
Tool Tip
5
0
Caption
5
0
State
2
0
TabOrder
3
20
Numeric

1
17
Name
5
3
gcr
X
3
498
Y
3
288
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
9
Label

1
13
Name
5
19
gcr_pvwatts_warning
X
3
600
Y
3
288
Width
3
270
Height
3
39
Tool Tip
5
0
Caption
5
86
For 2-axis tracking, the ground coverage ratio is only used for land area calculations
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Numeric

1
17
Name
5
7
inv_eff
X
3
204
Y
3
141
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
5
Numeric

1
17
Name
5
8
loss_age
X
3
498
Y
3
516
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
18
Numeric

1
17
Name
5
10
loss_avail
X
3
498
Y
3
543
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
19
Numeric

1
17
Name
5
9
loss_conn
X
3
498
Y
3
435
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
15
Numeric

1
17
Name
5
8
loss_lid
X
3
498
Y
3
462
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
16
Numeric

1
17
Name
5
13
loss_mismatch
X
3
204
Y
3
516
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
13
Numeric

1
17
Name
5
14
loss_nameplate
X
3
498
Y
3
489
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
17
Numeric

1
17
Name
5
12
loss_shading
X
3
204
Y
3
462
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
11
Numeric

1
17
Name
5
9
loss_snow
X
3
204
Y
3
489
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
12
Numeric

1
17
Name
5
12
loss_soiling
X
3
204
Y
3
435
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
10
Numeric

1
17
Name
5
11
loss_wiring
X
3
204
Y
3
543
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
14
Numeric

1
17
Name
5
6
losses
X
3
498
Y
3
573
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
2
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
22
Numeric

1
17
Name
5
11
losses_user
X
3
498
Y
3
384
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
21
Choice

1
9
Name
5
11
module_type
X
3
204
Y
3
60
Width
3
141
Height
3
24
Tool Tip
5
0
Items
6
3
Standard
Premium
Thin film
Selection
3
4294967295
TabOrder
3
2
Image

1
8
Name
5
9
object 12
X
3
78
Y
3
216
Width
3
190
Height
3
102
Tool Tip
5
0
Image
7
PVWatts_object 12.png
Centered
2
1
Divider

1
10
Name
5
9
object 21
X
3
444
Y
3
123
Width
3
423
Height
3
16
Tool Tip
5
0
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
47
Module Area Estimate for Land Area Calculations
Bold
2
1
Divider

1
10
Name
5
11
object 2125
X
3
75
Y
3
411
Width
3
528
Height
3
22
Tool Tip
5
0
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
30
Specify System Loss Categories
Bold
2
1
GroupBox

1
8
Name
5
8
object 4
X
3
9
Y
3
336
Width
3
872
Height
3
267
Tool Tip
5
0
Caption
5
13
System Losses
Bold
2
1
GroupBox

1
8
Name
5
10
object 430
X
3
9
Y
3
186
Width
3
872
Height
3
144
Tool Tip
5
0
Caption
5
24
Orientation and Tracking
Bold
2
1
Label

1
13
Name
5
8
object 7
X
3
30
Y
3
357
Width
3
828
Height
3
24
Tool Tip
5
0
Caption
5
125
System losses account for performance losses you would expect in a real system that are not explicitly calculated by PVWatts.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Numeric

1
17
Name
5
15
system_capacity
X
3
204
Y
3
33
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
1
Numeric

1
17
Name
5
4
tilt
X
3
498
Y
3
234
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
7
Numeric

1
17
Name
5
17
total_module_area
X
3
621
Y
3
141
Width
3
90
Height
3
24
Tool Tip
5
0
Value
1
0
Mode
3
1
Format
3
0
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295

24
ac_nameplate
3
1
Rated inverter size
kWac
PVWatts
0
8
1
1
1
1
0
Numeric
array_type
3
1
Array type
 
PVWatts
84
Fixed open rack|Fixed roof mount|1-axis tracking|1-axis backtracking|2-axis tracking
2
1
1
1
1
0
Choice
azimuth
3
1
Azimuth
degrees
PVWatts
0
2
1
1
1
1
180
Numeric
batt_simple_enable
3
1
Enable simple battery
 
PVWatts
0
141
1
1
1
1
0
Default
dc_ac_ratio
3
1
DC to AC ratio
 
PVWatts
0
2
1
1
1
1
1.1
Numeric
en_user_spec_losses
3
1
Specify total system loss
 
PVWatts
0
8
1
1
1
1
0
CheckBox
gcr
3
1
Ground coverage ratio
 
PVWatts
0
2
1
1
1
1
0.4
Numeric
inv_eff
3
1
Inverter efficiency
%
PVWatts
0
2
1
1
1
1
96
Numeric
loss_age
3
1
Age
%
PVWatts
0
2
1
1
1
1
0
Numeric
loss_avail
3
1
Availability
%
PVWatts
0
2
1
1
1
1
3
Numeric
loss_conn
3
1
Connections
%
PVWatts
0
2
1
1
1
1
0.5
Numeric
loss_lid
3
1
Light-induced degradation
%
PVWatts
0
2
1
1
1
1
1.5
Numeric
loss_mismatch
3
1
Mismatch
%
PVWatts
0
2
1
1
1
1
2
Numeric
loss_nameplate
3
1
Nameplate
%
PVWatts
0
2
1
1
1
1
1
Numeric
loss_shading
3
1
Shading
%
PVWatts
0
2
1
1
1
1
3
Numeric
loss_snow
3
1
Snow
%
PVWatts
0
2
1
1
1
1
0
Numeric
loss_soiling
3
1
Soiling
%
PVWatts
0
2
1
1
1
1
2
Numeric
loss_wiring
3
1
Wiring
%
PVWatts
0
2
1
1
1
1
2
Numeric
losses
3
1
Total system losses
%
PVWatts
0
8
1
1
1
1
14
Numeric
losses_user
3
1
Total loss
%
PVWatts
0
2
1
1
1
1
14
Numeric
module_type
3
1
Module type
 
PVWatts
26
Standard|Premium|Thin film
2
1
1
1
1
0
Choice
system_capacity
3
1
System nameplate capacity
kWdc
PVWatts
0
2
1
1
1
1
4
Numeric
tilt
3
1
Tilt
degrees
PVWatts
0
2
1
1
1
1
42.82
Numeric
total_module_area
3
1
Estimated total module area
mÂ²
PVWatts
0
8
1
1
1
1
0
Numeric

711
equations{'ac_nameplate'} = define() {
	return ${system_capacity}/${dc_ac_ratio};
};

equations{ 'losses' } = define() {
	if( ${en_user_spec_losses} ) return ${losses_user};
	else return 100* (1 - (1-0.01*${loss_soiling})
					*(1-0.01*${loss_shading})
					*(1-0.01*${loss_snow})
					*(1-0.01*${loss_mismatch})
					*(1-0.01*${loss_wiring})
					*(1-0.01*${loss_conn})
					*(1-0.01*${loss_lid})
					*(1-0.01*${loss_nameplate})
					*(1-0.01*${loss_age})
					*(1-0.01*${loss_avail}) );
};

equations{ 'total_module_area' } = define() {
	eff = ?${module_type}[0.19,0.21,0.18]; // [standard,premium,thin film], see cmod_pvwattsv7.cpp module.stc_eff for each module.type
	return ${system_capacity} / eff;
};



1199
function pvwatts_ui_update() {
	arr = ${array_type};
	//enable( 'gcr', (arr==0||arr==2||arr==3) );
	enable( 'tilt', (arr!=4));
	enable( 'azimuth', (arr!=4));
	if (arr == 4) {
		property('gcr_pvwatts_warning', 'Caption', 'For 2-axis tracking, the ground coverage ratio is only used for land area calculations');
	}
	else {
		property('gcr_pvwatts_warning', 'Caption', '');
	}
	
	enul = ${en_user_spec_losses};
	enable( 'losses_user',  enul);	
	losses = [ 'soiling', 'shading', 'snow', 'mismatch', 'wiring', 'conn', 'lid', 'nameplate', 'age', 'avail' ];
	for( i=0;i<#losses;i++ )
		enable( 'loss_' + losses[i], !enul );		
}

// do this here instead of equations so
// versions.lk will work for opening files
// older than 2018.11.11
function check_batt_config() {
	 t = technology();
	 if ( t == 'PVWatts Battery' ) 
	 { value('batt_simple_enable', 1); }
	 else 
	 { value('batt_simple_enable', 0); }
 	show( 'batt_simple_enable', 0 ); // hidden variable set by equations
	refresh();
}

on_load{'PVWatts'} = define() {
	pvwatts_ui_update();
	check_batt_config();
};

on_change{'array_type'} = define() {
	pvwatts_ui_update();
};

on_change{'en_user_spec_losses'} = define() {
	pvwatts_ui_update();
};
